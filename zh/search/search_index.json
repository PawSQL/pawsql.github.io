{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"License \u00b6 MIT License Copyright \u00a9 2016-2022 Martin Donath Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"\u9996\u9875"},{"location":"#license","text":"MIT License Copyright \u00a9 2016-2022 Martin Donath Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"License"},{"location":"eula/","text":"End-User License Agreement (EULA) of PawSQL \u00b6 This EULA agreement governs your acquisition and use of our PawSQL software (\"Software\") directly from Paw SQL or indirectly through a Paw SQL authorized reseller or distributor (a \"Reseller\"). Please read this EULA agreement carefully before completing the installation process and using the PawSQL software. It provides a license to use the PawSQL software and contains warranty information and liability disclaimers. If you register for a free trial of the PawSQL software, this EULA agreement will also govern that trial. By clicking \"accept\" or installing and/or using the PawSQL software, you are confirming your acceptance of the Software and agreeing to become bound by the terms of this EULA agreement. If you are entering into this EULA agreement on behalf of a company or other legal entity, you represent that you have the authority to bind such entity and its affiliates to these terms and conditions. If you do not have such authority or if you do not agree with the terms and conditions of this EULA agreement, do not install or use the Software, and you must not accept this EULA agreement. This EULA agreement shall apply only to the Software supplied by Paw SQL herewith regardless of whether other software is referred to or described herein. The terms also apply to any Paw SQL updates, supplements, Internet-based services, and support services for the Software, unless other terms accompany those items on delivery. If so, those terms apply. License Grant \u00b6 Paw SQL hereby grants you a personal, non-transferable, non-exclusive licence to use the PawSQL software on your devices in accordance with the terms of this EULA agreement. You are permitted to load the PawSQL software (for example a PC, laptop, mobile or tablet) under your control. You are responsible for ensuring your device meets the minimum requirements of the PawSQL software. You are not permitted to: Edit, alter, modify, adapt, translate or otherwise change the whole or any part of the Software nor permit the whole or any part of the Software to be combined with or become incorporated in any other software, nor decompile, disassemble or reverse engineer the Software or attempt to do any such things Reproduce, copy, distribute, resell or otherwise use the Software for any commercial purpose Allow any third party to use the Software on behalf of or for the benefit of any third party Use the Software in any way which breaches any applicable local, national or international law use the Software for any purpose that Paw SQL considers is a breach of this EULA agreement Intellectual Property and Ownership \u00b6 Paw SQL shall at all times retain ownership of the Software as originally downloaded by you and all subsequent downloads of the Software by you. The Software (and the copyright, and other intellectual property rights of whatever nature in the Software, including any modifications made thereto) are and shall remain the property of Paw SQL. Paw SQL reserves the right to grant licences to use the Software to third parties. Termination \u00b6 This EULA agreement is effective from the date you first use the Software and shall continue until terminated. You may terminate it at any time upon written notice to Paw SQL. Governing Law \u00b6 This EULA agreement, and any dispute arising out of or in connection with this EULA agreement, shall be governed by and construed in accordance with the laws of China, USA and other countries.","title":"End-User License Agreement (EULA) of PawSQL"},{"location":"eula/#end-user-license-agreement-eula-of-pawsql","text":"This EULA agreement governs your acquisition and use of our PawSQL software (\"Software\") directly from Paw SQL or indirectly through a Paw SQL authorized reseller or distributor (a \"Reseller\"). Please read this EULA agreement carefully before completing the installation process and using the PawSQL software. It provides a license to use the PawSQL software and contains warranty information and liability disclaimers. If you register for a free trial of the PawSQL software, this EULA agreement will also govern that trial. By clicking \"accept\" or installing and/or using the PawSQL software, you are confirming your acceptance of the Software and agreeing to become bound by the terms of this EULA agreement. If you are entering into this EULA agreement on behalf of a company or other legal entity, you represent that you have the authority to bind such entity and its affiliates to these terms and conditions. If you do not have such authority or if you do not agree with the terms and conditions of this EULA agreement, do not install or use the Software, and you must not accept this EULA agreement. This EULA agreement shall apply only to the Software supplied by Paw SQL herewith regardless of whether other software is referred to or described herein. The terms also apply to any Paw SQL updates, supplements, Internet-based services, and support services for the Software, unless other terms accompany those items on delivery. If so, those terms apply.","title":"End-User License Agreement (EULA) of PawSQL"},{"location":"eula/#license-grant","text":"Paw SQL hereby grants you a personal, non-transferable, non-exclusive licence to use the PawSQL software on your devices in accordance with the terms of this EULA agreement. You are permitted to load the PawSQL software (for example a PC, laptop, mobile or tablet) under your control. You are responsible for ensuring your device meets the minimum requirements of the PawSQL software. You are not permitted to: Edit, alter, modify, adapt, translate or otherwise change the whole or any part of the Software nor permit the whole or any part of the Software to be combined with or become incorporated in any other software, nor decompile, disassemble or reverse engineer the Software or attempt to do any such things Reproduce, copy, distribute, resell or otherwise use the Software for any commercial purpose Allow any third party to use the Software on behalf of or for the benefit of any third party Use the Software in any way which breaches any applicable local, national or international law use the Software for any purpose that Paw SQL considers is a breach of this EULA agreement","title":"License Grant"},{"location":"eula/#intellectual-property-and-ownership","text":"Paw SQL shall at all times retain ownership of the Software as originally downloaded by you and all subsequent downloads of the Software by you. The Software (and the copyright, and other intellectual property rights of whatever nature in the Software, including any modifications made thereto) are and shall remain the property of Paw SQL. Paw SQL reserves the right to grant licences to use the Software to third parties.","title":"Intellectual Property and Ownership"},{"location":"eula/#termination","text":"This EULA agreement is effective from the date you first use the Software and shall continue until terminated. You may terminate it at any time upon written notice to Paw SQL.","title":"Termination"},{"location":"eula/#governing-law","text":"This EULA agreement, and any dispute arising out of or in connection with this EULA agreement, shall be governed by and construed in accordance with the laws of China, USA and other countries.","title":"Governing Law"},{"location":"license/","text":"License \u00b6 MIT License Copyright \u00a9 2016-2022 Martin Donath Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"License"},{"location":"license/#license","text":"MIT License Copyright \u00a9 2016-2022 Martin Donath Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"License"},{"location":"readme/","text":"PawSQL optimizes SQL queries by Clicks PawSQL Advisor \u00b6 In addition to integrating the powerful index recommendation function of Paw Index Advisor , PawSQL Advisor also integrates the industry's best practices for query optimization for relational databases, and audits and rewrites SQL capatility from the aspects of correctness and performance. PawSQL Advisor is integrated with the most popular IDE, such as IntelliJ IDEA , PhpStorm, PyCharm , WebStorm. It helps database application developers and database administrator optimize their queries by One Click . Features \u00b6 Rules-based SQL auditing , targeting correctness auditing and performance optimization. Rewrite optimization , recommended semantically equivalent, but more efficient SQL. Intelligent index recommendation , based on input SQL syntax, database objects and statistics information. What-if validation to ensure gaining better performance after SQL rewriting and indexing recommendations. Get started \u00b6 Start the JetBrains integrated development environment(IntelliJ IDEA, CLion, PyCharm and etc,), open the project Setting, select Plugins; Enter \"PawSQL Advisor\" in Marketplace and click Install; Configure the running parameters of PawSQL Advisor on the Setting page; Right-click on the SQL file or folder to be analyzed, and click \"Run PawSQL Advisor\"; Wait for a while and the optimization recommendations will be presented to you. Paw Index Advisor \u00b6 Paw Index Advisor is an automatic and intelligent cost-based index recommendation tool for MySQL and PostgreSQL databases. Paw Index Advisor is integrated with the most popular IDE, such as IntelliJ IDEA , PhpStorm, PyCharm , WebStorm. It helps database application developers and database administrator optimize their queries by One Click . Features \u00b6 Combination of cost based and heuristic algorithm based Support MySQL and PostgreSQL and derivatives, such as Opengauss, Maria Support index recommendation covering matching, screening, sort-avoiding,covering De-duplicate with existing indexes Support query rewrites, sattc, view folding, and ordinal rewrite Client-based, non-invasion to production system Support what-if validation , make sure indexes recommended be used in later query execution Get started \u00b6 Start the JetBrains IDE(IntelliJ IDEA, CLion, PyCharm and etc), open the project Setting, select Plugins; Enter [ Paw Index Advisor ] in martketplace and click install Configure the running parameters of Paw Index Advisor on the Setting page Right click on the SQL file or folder to be analyzed, and click \"Run Index Advisor\" Wait for minutes and recommended indexes will be presented to you to accelerate your database queries. Claim: PawSQL Advisor and Paw Index Advisor is delivered as a beta version for free trial. You are welcomed to file bugs at https://pawsql.youtrack.cloud/newIssue .","title":"Readme"},{"location":"readme/#pawsql-advisor","text":"In addition to integrating the powerful index recommendation function of Paw Index Advisor , PawSQL Advisor also integrates the industry's best practices for query optimization for relational databases, and audits and rewrites SQL capatility from the aspects of correctness and performance. PawSQL Advisor is integrated with the most popular IDE, such as IntelliJ IDEA , PhpStorm, PyCharm , WebStorm. It helps database application developers and database administrator optimize their queries by One Click .","title":"PawSQL Advisor"},{"location":"readme/#features","text":"Rules-based SQL auditing , targeting correctness auditing and performance optimization. Rewrite optimization , recommended semantically equivalent, but more efficient SQL. Intelligent index recommendation , based on input SQL syntax, database objects and statistics information. What-if validation to ensure gaining better performance after SQL rewriting and indexing recommendations.","title":"Features"},{"location":"readme/#get-started","text":"Start the JetBrains integrated development environment(IntelliJ IDEA, CLion, PyCharm and etc,), open the project Setting, select Plugins; Enter \"PawSQL Advisor\" in Marketplace and click Install; Configure the running parameters of PawSQL Advisor on the Setting page; Right-click on the SQL file or folder to be analyzed, and click \"Run PawSQL Advisor\"; Wait for a while and the optimization recommendations will be presented to you.","title":"Get started"},{"location":"readme/#paw-index-advisor","text":"Paw Index Advisor is an automatic and intelligent cost-based index recommendation tool for MySQL and PostgreSQL databases. Paw Index Advisor is integrated with the most popular IDE, such as IntelliJ IDEA , PhpStorm, PyCharm , WebStorm. It helps database application developers and database administrator optimize their queries by One Click .","title":"Paw Index Advisor"},{"location":"readme/#features_1","text":"Combination of cost based and heuristic algorithm based Support MySQL and PostgreSQL and derivatives, such as Opengauss, Maria Support index recommendation covering matching, screening, sort-avoiding,covering De-duplicate with existing indexes Support query rewrites, sattc, view folding, and ordinal rewrite Client-based, non-invasion to production system Support what-if validation , make sure indexes recommended be used in later query execution","title":"Features"},{"location":"readme/#get-started_1","text":"Start the JetBrains IDE(IntelliJ IDEA, CLion, PyCharm and etc), open the project Setting, select Plugins; Enter [ Paw Index Advisor ] in martketplace and click install Configure the running parameters of Paw Index Advisor on the Setting page Right click on the SQL file or folder to be analyzed, and click \"Run Index Advisor\" Wait for minutes and recommended indexes will be presented to you to accelerate your database queries. Claim: PawSQL Advisor and Paw Index Advisor is delivered as a beta version for free trial. You are welcomed to file bugs at https://pawsql.youtrack.cloud/newIssue .","title":"Get started"},{"location":"blog/","text":".md-sidebar--secondary:not([hidden]) { visibility: hidden; } Blog \u00b6 Four Pitfalls of SQL Processing with NULL Values \u00b6 NULL value processing is the most error-prone for database application developers, mainly because we are accustomed to using binary Boolean logic to think, while the database's processing logic for NULL values is three-valued logic. In fact, the most flawed component in the database optimizers is actually the logic related to NULL value processing. Even mature database software, such as DB2/Teradata, still has more than 20% of the bugs related NULL processing. Tomas Nemec \u00b7 @Tomas Aug 5, 2022 \u00b7 10 min read \u00b7 In this article, we analyze the root causes of the NULL value pitfalls, and concludes a simple and effective logic to infer the final result. At the same time, we explain the applicable conditions and solutions for the four common scenarios in daily development work; Finally, three optimization rules related to NULL value processing in PawSQL Advisor are introduced and evaluated by examples. After reading this article, you can will be able to cope with all the scenarios regarding to NULL value handling in your daily work. Continue reading Top 5 SQL Optimization Tools \u00b6 The Structured Query Language has become the most used query language and it is supported by most modern relational database management systems. There are many ways to write a query to get the same result in SQL but the performance may differ significantly. SQL optimization tools help developers or database administrators to determine the best way to execute a query with the best performance. Paw SQL \u00b7 @pawsql Aug 26, 2022 \u00b7 10 5 read \u00b7 In this article, we evaluate five widely used SQL optimization tools, providing their cons and pros. Continue reading","title":"Blog"},{"location":"blog/#blog","text":"","title":"Blog"},{"location":"blog/#four-pitfalls-of-sql-processing-with-null-values","text":"NULL value processing is the most error-prone for database application developers, mainly because we are accustomed to using binary Boolean logic to think, while the database's processing logic for NULL values is three-valued logic. In fact, the most flawed component in the database optimizers is actually the logic related to NULL value processing. Even mature database software, such as DB2/Teradata, still has more than 20% of the bugs related NULL processing. Tomas Nemec \u00b7 @Tomas Aug 5, 2022 \u00b7 10 min read \u00b7 In this article, we analyze the root causes of the NULL value pitfalls, and concludes a simple and effective logic to infer the final result. At the same time, we explain the applicable conditions and solutions for the four common scenarios in daily development work; Finally, three optimization rules related to NULL value processing in PawSQL Advisor are introduced and evaluated by examples. After reading this article, you can will be able to cope with all the scenarios regarding to NULL value handling in your daily work. Continue reading","title":"Four Pitfalls of SQL Processing with NULL Values"},{"location":"blog/#top-5-sql-optimization-tools","text":"The Structured Query Language has become the most used query language and it is supported by most modern relational database management systems. There are many ways to write a query to get the same result in SQL but the performance may differ significantly. SQL optimization tools help developers or database administrators to determine the best way to execute a query with the best performance. Paw SQL \u00b7 @pawsql Aug 26, 2022 \u00b7 10 5 read \u00b7 In this article, we evaluate five widely used SQL optimization tools, providing their cons and pros. Continue reading","title":"Top 5 SQL Optimization Tools"},{"location":"blog/2022/four_pitfalls_null_processing/","text":"Four Pitfalls of SQL Processing with NULL Values \u00b6 NULL value processing is the most error-prone for database application developers, mainly because we are accustomed to using binary Boolean logic to think, while the database's processing logic for NULL values is three-valued logic . In fact, the most flawed component in the database optimizers is actually the logic related to NULL value processing. Even mature database software, such as DB2/Teradata, still has more than 20% of the bugs related NULL processing. Tomas Nemec \u00b7 @Tomas Aug 5, 2022 \u00b7 10 min read \u00b7 Overview \u00b6 In this article, we analyze the root causes of the NULL value pitfalls, and concludes a simple and effective logic to infer the final result. At the same time, we explain the applicable conditions and solutions for the four common scenarios in daily development work; Finally, three optimization rules related to NULL value processing in PawSQL Advisor are introduced and evaluated by examples. After reading this article, you will be able to cope with all the scenarios regarding to NULL value handling in your daily work. Code of Examination \u00b6 The following examination logic covers all scenarios for NULL values in SQL processing, and by understanding the following logic, you can avoid the NULL pitfalls. The result of all comparison and arithmetic operators ( >, =, <, <>, <=, >=, +,-,*, / ) with NULL result is unknown The logical operations( AND, OR, NOT ) of unknown follows the truth values table of three-valued operations If the result of the operation is returned directly to the user, use NULL to represent unknown If the result of the operation is true or false as a condition during SQL processing, then the operation needs to be performed by the three-value logic, and the final result is determined by the following logic 4.1. {false\u3001unknown} -> false 4.2. {true} ->true In set operations such as UNION or INTERSECT , NULL values are considered equal to each other. Three-valued Logic 1 \u00b6 In logic, a three-valued logic (also trinary logic, trivalent, ternary, or trilean, sometimes abbreviated 3VL) is any of several many-valued logic systems in which there are three truth values indicating true, false and some indeterminate third value. This is contrasted with the more commonly known bivalent logics (such as classical sentential or Boolean logic) which provide only for true and false. pitfalls of NULL Values \u00b6 Comparison with NULL Values \u00b6 Conclusion : expr = null can\u2019t determine the expression expr to be null , and is null should be used to determine whether the expr is null. Suppose there is a customer table with following five columns, among which two columns ( c_nationcode , c_phone ) are nullable. CREATE TABLE customer ( c_custkey int4 NOT NULL , c_name varchar ( 25 ) NOT NULL , c_nationcode char ( 8 ) NULL , c_phone varchar ( 15 ) NULL , c_regdate date NULL , CONSTRAINT customer_pkey PRIMARY KEY ( c_custkey ) ); insert into customer values ( 1 , 'Randy' , 'en' , '13910010010' , '20210911' ); insert into customer values ( 2 , 'Mandy' , null , '13910010012' , '20200211' ); insert into customer values ( 3 , 'Ray' , 'us' , null , '20180902' ); If a developer wants to find out the customers with empty phones through the following statement, he won't succeed because the result of following statement is always empty. select * from customer where c_phone = null ; The correct way should be\uff1a select * from customer where c_phone is null ; Let's examine according to the Code of Examination , the predicate c_phone = null is evaluated to unknown ; then according to Rule 4.1, unknown is treated as false . c_phone = null -> unknown -> false ; 2. Case When expression with NULL \u00b6 Conclusion : case expr when null can't determine if the expression is null, the correct way is case when expr is null . Problems in the where or having clause are easier to detect and correct, while it is much more difficult to dectect null usages in case when expressions, either by human or by existing SQL auditing tools. For example, if we want to decode the nation code to nation name, and the code is null, we want to set nation name to China : select c_name , case c_nationcode when 'us' then 'USA' when 'cn' then 'China' when null then 'China' else 'Others' end from customer The above statement does not convert the country code to null to China . Because when null is actually an operation performed by an c_nationcode = null . The correct way to to do it should be: select c_name , case when c_nationcode = 'us' then 'USA' when c_nationcode = 'cn' then 'China' when c_nationcode is null then 'China' else 'Others' end from customer 3. NOT IN with NULL \u00b6 Conclusion A predicate of a not in subquery with nullable select elements will always be evaluated to false. Suppose we have an orders table where the customer id( o_custkey ) and order date( o_orderdate ) are nullable due to missing data. CREATE TABLE orders ( o_orderkey int4 NOT NULL , o_custkey int4 NULL , o_orderdate date NULL , CONSTRAINT orders_pkey PRIMARY KEY ( o_orderkey ) ); insert into orders values ( 1 , 1 , '2021-01-01' ); insert into orders values ( 2 , null , '2020-09-01' ); insert into orders values ( 3 , 3 , null ); Now we want to find customers without orders for marketing. The expected result is the customer whose c_custkey is 2 , and the query statement might look like this, select * from customer where c_custkey not in ( select o_custkey from orders ) In fact, the above query return nothing to us. The reason is that the o_custkey in the subquery has null values, and the processing logic of NOT IN is like this c_custkey not in ( 1 \uff0c 3 , null ) \u2192 c_custkey <> 1 and c_custkey <> 3 and c_custkey <> null \u2192 c_custkey <> 1 and c_custkey <> 3 and unknown \u2192 unknown -> false In fact, if there are null values in the result set of the subquery, the SQL will always return empty result set. There are two correct ways: Add a NOT NULL predicate to the subquery, that is select * from customer where c_custkey not in ( select o_custkey from orders where o_custkey is not null ) Rewrite the NOT IN subquery to the not exists subquery, that is select * from customer where not exists ( select o_custkey from orders where o_custkey = c_custkey ) Note : PawSQL Advisor adopts the first method to do rewrite optimization, but it is more powerful, PawSQL Advisor first determines whether the columns in the subquery may be empty, and if it is possible, it will recommend the rewritten SQL to the user. 4. ALL Subquery with NULL \u00b6 Conclusion : A condition of an ALL -qualified subquery with nullable select elements will always be evaluated to false. Suppose we want to find out the orders which are wrongly registered after the user is revoked. One of solution is this following query statement. select * from customer where c_regdate > ALL ( select o_orderdate from orders where c_custkey = o_custkey ) Similar to NOT IN above, this sql does not return the expected result due to the presence of NULL in the result of the subquery. The ALL operation is actually performed by comparing it with the returned result set, and then performing the AND operation, and the final result is unknown . While unknown as a condition to be evaluated is, the result is false . There are two ways to correct it: Add a NOT NULL predicate to the subquery, select * from customer where c_regdate > all ( select o_orderdate from orders where o_orderdate is not null ) Rewrite expr > all to aggregate scalar subquery expr > (select max()...) 2 select * from customer where c_regdate > ( select max ( o_custkey ) from orders ) Note : PawSQL Advisor adopts the second way to rewrite optimization, because PawSQL Advisor can further optimize the performance of the second rewritten SQL by rewriting ('max/min subquery rewrite rule'). NULL Optimization in PawSQL Advisor \u00b6 PawSQL Advisor has three rewrite optimization rules for NULL processing, corresponding to the four cases above. RuleCode Rule Description UseEqual4NullRewrite expr = null or case expr when null can't determine whether the expr is null , is null should be used NotInNullableSubQueryRewrite A predicate of a not in subquery with nullable select elements will always be evaluated to false. AllQualifierSubQueryRewrite A condition of an ALL -qualified subquery with nullable select elements will always be evaluated to false. PawSQL Advisor is more powerful, it will be based on whether the definition of a column in the DDL is nullable, and whether the operation on the column will produce nullable results, to determine whether the query column in the subquery is nullable, if it is possible to be empty, it will recommend the rewritten SQL to the user. Logic of NotInNullableSubQueryRewrite iterate parse tree of input query \uff0c retrieve all the NOT IN predicate for each NOT IN predicate { if the predicate is PredicateInValueSelect ( ` expr not in ( select ....) ` ){ check whether result set of subquery is nullable if no \uff0c return ; if yes \uff0c for each nullabe SELECT element ( rc ){ check whether there is a predicate ` rc is not null ` in the subquery if no \uff0c create a predicate ` rc is not null ` and combine with the conditions of WHERE clause in the sub query ; if yes \uff0c continue ; } } if the predicate is PredicateInValueList ( ` expr not in values ( 1 , 2 , null ) ` ) for each value in the value list if the value is NULL \uff0c delete it } Logic of checking whether result set of subquery is nullable isNullable ( SELECT expr ){ if ( expr is column of a table ) { if ( column is defined nullable ) return true ; else return true ; } else if ( expr is NULL ) { return true ; } else if ( expr is constant of variable ) { return false ; } else if ( expr is a combined expr ){ return ( arg1 || arg2 || ...); } else if ( expr is a function ) { if ( the function is one of ( \"SUM\" , \"Count\" , \"AVG\" )) return false ; else return isNullable ( arguements of the function ) } else if ( expr is SSQ ) { return isNullable ( SELECT expr of the SSQ ) } else { return true ; } } Examination of The PawSQL Advisor regarding to NULL processing \u00b6 Sever cases of NULL handling are demonstrated. The columns c_phone and c_nationkey in the customer table definition are nullable. -- Case 1: = null rewritten to is null select count ( * ) from customer where c_phone = null ; -- Case 2: case expr when null is rewritten to case when expr is null select case c_phone when null then 1 when '139%' then 0 else - 1 end from customer where not c_phone = null ; -- Case 3: c_nationkey nullable, increase the c_nationkey is not null condition select count ( * ) from nation where n_nationkey not in ( select c_nationkey from customer ); -- Case 4: c_nationkey nullable, so max(c_nationkey) is nullable, increasing the c_nationkey is not null condition select count ( * ) from nation where n_nationkey not in ( select max ( c_nationkey ) from customer group by c_mktsegment ); -- Case 5: count()/sum() is never empty, so there is no need to rewrite it select count ( * ) from nation where ( n_name , n_nationkey ) not in ( select 'China' , c_nationkey from customer ); -- Case 6: c_name is not null, but c_nationkey nullable, so you need to increase the c_nationkey is not null condition select count ( * ) from nation where n_nationkey not in ( select count ( c_nationkey ) from customer group by c_mktsegment ); -- Case 7: c_nationkey is nullable, so it is rewritten as > (select min(c_nationkey) from customer) select count ( * ) from customer where n_nationkey > all ( select c_nationkey from customer ); PawSQL Advisor Output (Summary) \u00b6 /********************************************************************\\ * * * PawSQL Optimization Summary * * * * Powered by PawSQL(2021- ) * * * \\********************************************************************/ 1 . Optimization Summary - There are 7 query analyzed ; - There are 6 optimization rewrites for 6 queries ; - There are 9 violations of optimization rule against 6 queries ; - There are 1 indices recommended for 4 queries ; - There is 12 . 91 % performance improvement . 2 . Optimization Rule Violations - RuleUseEqual4Null : [ null . sql - stmt2 , null . sql - stmt1 ] - RuleAllQualifierSubQueryRewrite : [ null . sql - stmt7 ] - RuleNoCond4NonAggSelect : [ null . sql - stmt3 , null . sql - stmt6 , null . sql - stmt7 ] - RuleNotInNullableSubQueryRewrite : [ null . sql - stmt4 , null . sql - stmt3 , null . sql - stmt6 ] ... PawSQL Advisor Output (single SQL details) \u00b6 Case 1: = null rewritten to is null -- Original SQL select count ( * ) from customer where c_phone = null ; -- Rewritten SQL select count ( * ) from customer where customer . c_phone is null ; Case 2: case expr when null rewritten as case when expr is null -- Original SQL select case c_phone when null then 1 when '139%' then 0 else - 1 end from customer ; -- Rewritten SQL select case when c_phone is null then 1 when c_phone = '139%' then 0 else - 1 end from customer ; Case 3: c_nationkey is nullable, add the condition c_nationkey is not null -- Original SQL select count ( * ) from nation where n_nationkey not in ( select c_nationkey from customer ); -- Rewritten SQL select count ( * ) from nation where n_nationkey not in ( select c_nationkey from customer where c_nationkey is not null ) Case 4: c_nationkey is nullable, so max(c_nationkey) is nullable, adding the condition c_nationkey is not null -- Original SQL select count ( * ) from nation where n_nationkey not in ( select max ( c_nationkey ) from customer group by c_mktsegment ); -- Rewritten SQL select count ( * ) from nation where n_nationkey not in ( select max ( customer . c_nationkey ) from customer where c_nationkey is not null group by c_mktsegment ) Case 5: count(c_nationkey) is never empty, so there is no need to rewrite it. select count ( * ) from nation where n_nationkey not in ( select count ( c_nationkey ) from customer group by c_mktsegment ); Case 6: c_name is not empty, but c_nationkey is nullable, so the c_nationkey is not null condition needs to be added. -- Original SQL select count ( * ) from nation where ( n_name , n_nationkey ) not in ( select 'China' , c_nationkey from customer ); -- Rewritten SQL select count ( * ) from nation where ( n_name , n_nationkey ) not in ( select 'China' , c_nationkey from customer where customer . c_nationkey is not null ) Case 7: c_nationkey is nullable, so rewritten as > (select min(c_nationkey) from customer) -- Original SQL select count ( * ) from customer where n_nationkey > all ( select c_nationkey from customer ); -- Rewritten SQL select count ( * ) from customer where n_nationkey > ( select min ( c_nationkey ) from customer ) https://en.wikipedia.org/wiki/Three-valued_logic \u21a9 If expr < all or expr < = all , then rewrite it as expr < (select min() ...) \u21a9","title":"Four pitfalls of SQL Processing with NULL Values"},{"location":"blog/2022/four_pitfalls_null_processing/#four-pitfalls-of-sql-processing-with-null-values","text":"NULL value processing is the most error-prone for database application developers, mainly because we are accustomed to using binary Boolean logic to think, while the database's processing logic for NULL values is three-valued logic . In fact, the most flawed component in the database optimizers is actually the logic related to NULL value processing. Even mature database software, such as DB2/Teradata, still has more than 20% of the bugs related NULL processing. Tomas Nemec \u00b7 @Tomas Aug 5, 2022 \u00b7 10 min read \u00b7","title":"Four Pitfalls of SQL Processing with NULL Values"},{"location":"blog/2022/four_pitfalls_null_processing/#overview","text":"In this article, we analyze the root causes of the NULL value pitfalls, and concludes a simple and effective logic to infer the final result. At the same time, we explain the applicable conditions and solutions for the four common scenarios in daily development work; Finally, three optimization rules related to NULL value processing in PawSQL Advisor are introduced and evaluated by examples. After reading this article, you will be able to cope with all the scenarios regarding to NULL value handling in your daily work.","title":"Overview"},{"location":"blog/2022/four_pitfalls_null_processing/#code-of-examination","text":"The following examination logic covers all scenarios for NULL values in SQL processing, and by understanding the following logic, you can avoid the NULL pitfalls. The result of all comparison and arithmetic operators ( >, =, <, <>, <=, >=, +,-,*, / ) with NULL result is unknown The logical operations( AND, OR, NOT ) of unknown follows the truth values table of three-valued operations If the result of the operation is returned directly to the user, use NULL to represent unknown If the result of the operation is true or false as a condition during SQL processing, then the operation needs to be performed by the three-value logic, and the final result is determined by the following logic 4.1. {false\u3001unknown} -> false 4.2. {true} ->true In set operations such as UNION or INTERSECT , NULL values are considered equal to each other.","title":"Code of Examination"},{"location":"blog/2022/four_pitfalls_null_processing/#three-valued-logic1","text":"In logic, a three-valued logic (also trinary logic, trivalent, ternary, or trilean, sometimes abbreviated 3VL) is any of several many-valued logic systems in which there are three truth values indicating true, false and some indeterminate third value. This is contrasted with the more commonly known bivalent logics (such as classical sentential or Boolean logic) which provide only for true and false.","title":"Three-valued Logic1"},{"location":"blog/2022/four_pitfalls_null_processing/#pitfalls-of-null-values","text":"","title":"pitfalls of NULL Values"},{"location":"blog/2022/four_pitfalls_null_processing/#comparison-with-null-values","text":"Conclusion : expr = null can\u2019t determine the expression expr to be null , and is null should be used to determine whether the expr is null. Suppose there is a customer table with following five columns, among which two columns ( c_nationcode , c_phone ) are nullable. CREATE TABLE customer ( c_custkey int4 NOT NULL , c_name varchar ( 25 ) NOT NULL , c_nationcode char ( 8 ) NULL , c_phone varchar ( 15 ) NULL , c_regdate date NULL , CONSTRAINT customer_pkey PRIMARY KEY ( c_custkey ) ); insert into customer values ( 1 , 'Randy' , 'en' , '13910010010' , '20210911' ); insert into customer values ( 2 , 'Mandy' , null , '13910010012' , '20200211' ); insert into customer values ( 3 , 'Ray' , 'us' , null , '20180902' ); If a developer wants to find out the customers with empty phones through the following statement, he won't succeed because the result of following statement is always empty. select * from customer where c_phone = null ; The correct way should be\uff1a select * from customer where c_phone is null ; Let's examine according to the Code of Examination , the predicate c_phone = null is evaluated to unknown ; then according to Rule 4.1, unknown is treated as false . c_phone = null -> unknown -> false ;","title":"Comparison with NULL Values"},{"location":"blog/2022/four_pitfalls_null_processing/#2-case-when-expression-with-null","text":"Conclusion : case expr when null can't determine if the expression is null, the correct way is case when expr is null . Problems in the where or having clause are easier to detect and correct, while it is much more difficult to dectect null usages in case when expressions, either by human or by existing SQL auditing tools. For example, if we want to decode the nation code to nation name, and the code is null, we want to set nation name to China : select c_name , case c_nationcode when 'us' then 'USA' when 'cn' then 'China' when null then 'China' else 'Others' end from customer The above statement does not convert the country code to null to China . Because when null is actually an operation performed by an c_nationcode = null . The correct way to to do it should be: select c_name , case when c_nationcode = 'us' then 'USA' when c_nationcode = 'cn' then 'China' when c_nationcode is null then 'China' else 'Others' end from customer","title":"2. Case When expression with NULL"},{"location":"blog/2022/four_pitfalls_null_processing/#3-not-in-with-null","text":"Conclusion A predicate of a not in subquery with nullable select elements will always be evaluated to false. Suppose we have an orders table where the customer id( o_custkey ) and order date( o_orderdate ) are nullable due to missing data. CREATE TABLE orders ( o_orderkey int4 NOT NULL , o_custkey int4 NULL , o_orderdate date NULL , CONSTRAINT orders_pkey PRIMARY KEY ( o_orderkey ) ); insert into orders values ( 1 , 1 , '2021-01-01' ); insert into orders values ( 2 , null , '2020-09-01' ); insert into orders values ( 3 , 3 , null ); Now we want to find customers without orders for marketing. The expected result is the customer whose c_custkey is 2 , and the query statement might look like this, select * from customer where c_custkey not in ( select o_custkey from orders ) In fact, the above query return nothing to us. The reason is that the o_custkey in the subquery has null values, and the processing logic of NOT IN is like this c_custkey not in ( 1 \uff0c 3 , null ) \u2192 c_custkey <> 1 and c_custkey <> 3 and c_custkey <> null \u2192 c_custkey <> 1 and c_custkey <> 3 and unknown \u2192 unknown -> false In fact, if there are null values in the result set of the subquery, the SQL will always return empty result set. There are two correct ways: Add a NOT NULL predicate to the subquery, that is select * from customer where c_custkey not in ( select o_custkey from orders where o_custkey is not null ) Rewrite the NOT IN subquery to the not exists subquery, that is select * from customer where not exists ( select o_custkey from orders where o_custkey = c_custkey ) Note : PawSQL Advisor adopts the first method to do rewrite optimization, but it is more powerful, PawSQL Advisor first determines whether the columns in the subquery may be empty, and if it is possible, it will recommend the rewritten SQL to the user.","title":"3. NOT IN with NULL"},{"location":"blog/2022/four_pitfalls_null_processing/#4-all-subquery-with-null","text":"Conclusion : A condition of an ALL -qualified subquery with nullable select elements will always be evaluated to false. Suppose we want to find out the orders which are wrongly registered after the user is revoked. One of solution is this following query statement. select * from customer where c_regdate > ALL ( select o_orderdate from orders where c_custkey = o_custkey ) Similar to NOT IN above, this sql does not return the expected result due to the presence of NULL in the result of the subquery. The ALL operation is actually performed by comparing it with the returned result set, and then performing the AND operation, and the final result is unknown . While unknown as a condition to be evaluated is, the result is false . There are two ways to correct it: Add a NOT NULL predicate to the subquery, select * from customer where c_regdate > all ( select o_orderdate from orders where o_orderdate is not null ) Rewrite expr > all to aggregate scalar subquery expr > (select max()...) 2 select * from customer where c_regdate > ( select max ( o_custkey ) from orders ) Note : PawSQL Advisor adopts the second way to rewrite optimization, because PawSQL Advisor can further optimize the performance of the second rewritten SQL by rewriting ('max/min subquery rewrite rule').","title":"4. ALL Subquery with NULL"},{"location":"blog/2022/four_pitfalls_null_processing/#null-optimization-in-pawsql-advisor","text":"PawSQL Advisor has three rewrite optimization rules for NULL processing, corresponding to the four cases above. RuleCode Rule Description UseEqual4NullRewrite expr = null or case expr when null can't determine whether the expr is null , is null should be used NotInNullableSubQueryRewrite A predicate of a not in subquery with nullable select elements will always be evaluated to false. AllQualifierSubQueryRewrite A condition of an ALL -qualified subquery with nullable select elements will always be evaluated to false. PawSQL Advisor is more powerful, it will be based on whether the definition of a column in the DDL is nullable, and whether the operation on the column will produce nullable results, to determine whether the query column in the subquery is nullable, if it is possible to be empty, it will recommend the rewritten SQL to the user. Logic of NotInNullableSubQueryRewrite iterate parse tree of input query \uff0c retrieve all the NOT IN predicate for each NOT IN predicate { if the predicate is PredicateInValueSelect ( ` expr not in ( select ....) ` ){ check whether result set of subquery is nullable if no \uff0c return ; if yes \uff0c for each nullabe SELECT element ( rc ){ check whether there is a predicate ` rc is not null ` in the subquery if no \uff0c create a predicate ` rc is not null ` and combine with the conditions of WHERE clause in the sub query ; if yes \uff0c continue ; } } if the predicate is PredicateInValueList ( ` expr not in values ( 1 , 2 , null ) ` ) for each value in the value list if the value is NULL \uff0c delete it } Logic of checking whether result set of subquery is nullable isNullable ( SELECT expr ){ if ( expr is column of a table ) { if ( column is defined nullable ) return true ; else return true ; } else if ( expr is NULL ) { return true ; } else if ( expr is constant of variable ) { return false ; } else if ( expr is a combined expr ){ return ( arg1 || arg2 || ...); } else if ( expr is a function ) { if ( the function is one of ( \"SUM\" , \"Count\" , \"AVG\" )) return false ; else return isNullable ( arguements of the function ) } else if ( expr is SSQ ) { return isNullable ( SELECT expr of the SSQ ) } else { return true ; } }","title":"NULL Optimization in PawSQL Advisor"},{"location":"blog/2022/four_pitfalls_null_processing/#examination-of-the-pawsql-advisor-regarding-to-null-processing","text":"Sever cases of NULL handling are demonstrated. The columns c_phone and c_nationkey in the customer table definition are nullable. -- Case 1: = null rewritten to is null select count ( * ) from customer where c_phone = null ; -- Case 2: case expr when null is rewritten to case when expr is null select case c_phone when null then 1 when '139%' then 0 else - 1 end from customer where not c_phone = null ; -- Case 3: c_nationkey nullable, increase the c_nationkey is not null condition select count ( * ) from nation where n_nationkey not in ( select c_nationkey from customer ); -- Case 4: c_nationkey nullable, so max(c_nationkey) is nullable, increasing the c_nationkey is not null condition select count ( * ) from nation where n_nationkey not in ( select max ( c_nationkey ) from customer group by c_mktsegment ); -- Case 5: count()/sum() is never empty, so there is no need to rewrite it select count ( * ) from nation where ( n_name , n_nationkey ) not in ( select 'China' , c_nationkey from customer ); -- Case 6: c_name is not null, but c_nationkey nullable, so you need to increase the c_nationkey is not null condition select count ( * ) from nation where n_nationkey not in ( select count ( c_nationkey ) from customer group by c_mktsegment ); -- Case 7: c_nationkey is nullable, so it is rewritten as > (select min(c_nationkey) from customer) select count ( * ) from customer where n_nationkey > all ( select c_nationkey from customer );","title":"Examination of The PawSQL Advisor regarding to NULL processing"},{"location":"blog/2022/four_pitfalls_null_processing/#pawsql-advisor-output-summary","text":"/********************************************************************\\ * * * PawSQL Optimization Summary * * * * Powered by PawSQL(2021- ) * * * \\********************************************************************/ 1 . Optimization Summary - There are 7 query analyzed ; - There are 6 optimization rewrites for 6 queries ; - There are 9 violations of optimization rule against 6 queries ; - There are 1 indices recommended for 4 queries ; - There is 12 . 91 % performance improvement . 2 . Optimization Rule Violations - RuleUseEqual4Null : [ null . sql - stmt2 , null . sql - stmt1 ] - RuleAllQualifierSubQueryRewrite : [ null . sql - stmt7 ] - RuleNoCond4NonAggSelect : [ null . sql - stmt3 , null . sql - stmt6 , null . sql - stmt7 ] - RuleNotInNullableSubQueryRewrite : [ null . sql - stmt4 , null . sql - stmt3 , null . sql - stmt6 ] ...","title":"PawSQL Advisor Output (Summary)"},{"location":"blog/2022/four_pitfalls_null_processing/#pawsql-advisor-output-single-sql-details","text":"Case 1: = null rewritten to is null -- Original SQL select count ( * ) from customer where c_phone = null ; -- Rewritten SQL select count ( * ) from customer where customer . c_phone is null ; Case 2: case expr when null rewritten as case when expr is null -- Original SQL select case c_phone when null then 1 when '139%' then 0 else - 1 end from customer ; -- Rewritten SQL select case when c_phone is null then 1 when c_phone = '139%' then 0 else - 1 end from customer ; Case 3: c_nationkey is nullable, add the condition c_nationkey is not null -- Original SQL select count ( * ) from nation where n_nationkey not in ( select c_nationkey from customer ); -- Rewritten SQL select count ( * ) from nation where n_nationkey not in ( select c_nationkey from customer where c_nationkey is not null ) Case 4: c_nationkey is nullable, so max(c_nationkey) is nullable, adding the condition c_nationkey is not null -- Original SQL select count ( * ) from nation where n_nationkey not in ( select max ( c_nationkey ) from customer group by c_mktsegment ); -- Rewritten SQL select count ( * ) from nation where n_nationkey not in ( select max ( customer . c_nationkey ) from customer where c_nationkey is not null group by c_mktsegment ) Case 5: count(c_nationkey) is never empty, so there is no need to rewrite it. select count ( * ) from nation where n_nationkey not in ( select count ( c_nationkey ) from customer group by c_mktsegment ); Case 6: c_name is not empty, but c_nationkey is nullable, so the c_nationkey is not null condition needs to be added. -- Original SQL select count ( * ) from nation where ( n_name , n_nationkey ) not in ( select 'China' , c_nationkey from customer ); -- Rewritten SQL select count ( * ) from nation where ( n_name , n_nationkey ) not in ( select 'China' , c_nationkey from customer where customer . c_nationkey is not null ) Case 7: c_nationkey is nullable, so rewritten as > (select min(c_nationkey) from customer) -- Original SQL select count ( * ) from customer where n_nationkey > all ( select c_nationkey from customer ); -- Rewritten SQL select count ( * ) from customer where n_nationkey > ( select min ( c_nationkey ) from customer ) https://en.wikipedia.org/wiki/Three-valued_logic \u21a9 If expr < all or expr < = all , then rewrite it as expr < (select min() ...) \u21a9","title":"PawSQL Advisor Output (single SQL details)"},{"location":"blog/2022/top5_sql_optimization_tools/","text":"Top 5 SQL Optimization Tools \u00b6 The Structured Query Language has become the most used query language and it is supported by most modern relational database management systems. There are many ways to write a query to get the same result in SQL but the performance may differ significantly. SQL optimization tools help developers or database administrators to determine the best way to execute a query with the best performance. ![ @pawsql ][ @pawsql avatar] Paw SQL \u00b7 @pawsql Aug 26, 2022 \u00b7 5 min read\u00b7 List of the top 5 SQL optimization tools \u00b6 SolarWinds Database Performance Analyzer Toad SQL Optimizer for Oracle EverSQL Query Optimizer PawSQL Advisor SQL tuning Here are the details on the pros and cons of each tool: SolarWinds Database Performance Analyzer \u00b6 Pros: Azure SQL databases, MySQL, Aurora, ASE, Oracle, MariaDB, and IBM Db2 supported Full-featured SQL query optimization tool On-going Performance insights Configuration tunning Cons: Weak query tuning More like finding the performance problems instead of solving them. Price: 14-day free trial , starts at $1,995 Toad SQL Optimizer for Oracle \u00b6 Pros: a part of an excellent suite for DBAs Query execution plan visualization Identify slow queries Inspect System Global Area (SGA) Cons: Only Oracle supported Designed for DBAs, too complicated for engineers without DBA skills Requires local installation Price: 14-days Free trial, Starts at $1,164 EverSQL ** \u00b6 Pros: Automatic SQL rewrite Supports MySQL, PostgreSQL, MariaDB, Percona, SQL Server, Cloud SQL, Aurora No installation required Missing indexes recommendations Machine learning algorithms On-going Performance insights Friendly for Software Developers Cons: Recommendations are not verified; the example rewrite is no good for performance. Some indexes recommended are not used. Price: Free for basic usage , one optimization a month. Advanced edition starts at $75. PawSQL Advisor \u00b6 Pros: Rules-based SQL auditing Rewrite optimization, recommended semantically equivalent, but more efficient SQL. Powerful and intelligent index recommendation What-if analysis to ensure gaining better performance after SQL rewriting and indexing recommendations. Cons: Only available as a plugin on Intellij based tools, such as IntelliJ IDEA, CLion, PyCharm Only support MySQL, PostgreSQL and derivatives, such as Opengauss, Maria Price: Free for now, no pricing policy announced SQL tuning \u00b6 Pros: On-line, no installation required Cons: Only Oracle support The software is sometimes buggy, some users report non-relevant recommendations Very basic, provides general recommendations Doesn't offer rewritten query Price: Free","title":"Top 5 SQL Optimization Tools"},{"location":"blog/2022/top5_sql_optimization_tools/#top-5-sql-optimization-tools","text":"The Structured Query Language has become the most used query language and it is supported by most modern relational database management systems. There are many ways to write a query to get the same result in SQL but the performance may differ significantly. SQL optimization tools help developers or database administrators to determine the best way to execute a query with the best performance. ![ @pawsql ][ @pawsql avatar] Paw SQL \u00b7 @pawsql Aug 26, 2022 \u00b7 5 min read\u00b7","title":"Top 5 SQL Optimization Tools"},{"location":"blog/2022/top5_sql_optimization_tools/#list-of-the-top-5-sql-optimization-tools","text":"SolarWinds Database Performance Analyzer Toad SQL Optimizer for Oracle EverSQL Query Optimizer PawSQL Advisor SQL tuning Here are the details on the pros and cons of each tool:","title":"List of the top 5 SQL optimization tools"},{"location":"blog/2022/top5_sql_optimization_tools/#solarwinds-database-performance-analyzer","text":"Pros: Azure SQL databases, MySQL, Aurora, ASE, Oracle, MariaDB, and IBM Db2 supported Full-featured SQL query optimization tool On-going Performance insights Configuration tunning Cons: Weak query tuning More like finding the performance problems instead of solving them. Price: 14-day free trial , starts at $1,995","title":"SolarWinds Database Performance Analyzer"},{"location":"blog/2022/top5_sql_optimization_tools/#toad-sql-optimizer-for-oracle","text":"Pros: a part of an excellent suite for DBAs Query execution plan visualization Identify slow queries Inspect System Global Area (SGA) Cons: Only Oracle supported Designed for DBAs, too complicated for engineers without DBA skills Requires local installation Price: 14-days Free trial, Starts at $1,164","title":"Toad SQL Optimizer for Oracle"},{"location":"blog/2022/top5_sql_optimization_tools/#eversql","text":"Pros: Automatic SQL rewrite Supports MySQL, PostgreSQL, MariaDB, Percona, SQL Server, Cloud SQL, Aurora No installation required Missing indexes recommendations Machine learning algorithms On-going Performance insights Friendly for Software Developers Cons: Recommendations are not verified; the example rewrite is no good for performance. Some indexes recommended are not used. Price: Free for basic usage , one optimization a month. Advanced edition starts at $75.","title":"EverSQL**"},{"location":"blog/2022/top5_sql_optimization_tools/#pawsql-advisor","text":"Pros: Rules-based SQL auditing Rewrite optimization, recommended semantically equivalent, but more efficient SQL. Powerful and intelligent index recommendation What-if analysis to ensure gaining better performance after SQL rewriting and indexing recommendations. Cons: Only available as a plugin on Intellij based tools, such as IntelliJ IDEA, CLion, PyCharm Only support MySQL, PostgreSQL and derivatives, such as Opengauss, Maria Price: Free for now, no pricing policy announced","title":"PawSQL  Advisor"},{"location":"blog/2022/top5_sql_optimization_tools/#sql-tuning","text":"Pros: On-line, no installation required Cons: Only Oracle support The software is sometimes buggy, some users report non-relevant recommendations Very basic, provides general recommendations Doesn't offer rewritten query Price: Free","title":"SQL tuning"},{"location":"pawcloud/introduction/","text":"\u6982\u8ff0 \u00b6 PawSQL Cloud\u662fPawSQL Advisor\u7684SaaS\u7248\u672c\uff0c\u5b83\u6574\u5408\u4e86\u4e1a\u754c\u5173\u4e8e\u5173\u7cfb\u6570\u636e\u5e93\u67e5\u8be2\u4f18\u5316\u6700\u4f73\u5b9e\u8df5\uff0c\u901a\u8fc7\u67e5\u8be2\u91cd\u5199\u4f18\u5316\u3001\u667a\u80fd\u7d22\u5f15\u63a8\u8350\uff0c\u5e2e\u52a9\u5e94\u7528\u5f00\u53d1\u4eba\u5458\u53ca\u6570\u636e\u5e93\u7ba1\u7406\u4eba\u5458\u4e00\u7ad9\u5f0f\u89e3\u51b3SQL\u6027\u80fd\u95ee\u9898\u3002 \u76f8\u6bd4\u8f83PawSQL Advisor/Paw Index Advisor\u7b49\u57fa\u4e8eIntelliJ\u7684\u63d2\u4ef6\uff0cPawSQL Cloud\u514d\u5b89\u88c5\uff0c\u4e0d\u4f9d\u8d56\u5176\u4ed6\u5de5\u5177\uff0c\u4e0d\u4ec5\u9002\u5408\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c\u4e5f\u9002\u5408\u6570\u636e\u5e93\u7ba1\u7406\u4eba\u5458\u7b49\u975e\u5f00\u53d1\u4eba\u5458\u4f7f\u7528\uff1bPawSQL Cloud\u540c\u65f6\u80fd\u591f\u8bb0\u5f55\u60a8\u7684\u4f18\u5316\u5386\u53f2\uff0c\u4fbf\u4e8e\u65e5\u540e\u67e5\u770b\u548c\u8ddf\u8e2a\uff0c\u540c\u65f6\u4f18\u5316\u7ed3\u679c\u53ef\u4ee5\u901a\u8fc7\u94fe\u63a5\u548c\u540c\u4e8b\u5171\u4eab\u3002 \u6838\u5fc3\u529f\u80fd \u00b6 \u57fa\u4e8e\u89c4\u5219\u7684SQL\u5ba1\u67e5\uff0c\u5305\u62ec\u6b63\u786e\u6027\u5ba1\u67e5\u548c\u6027\u80fd\u4f18\u5316\u5ba1\u67e5\u89c4\u5219\u3002 \u4e30\u5bcc\u7684\u91cd\u5199\u4f18\u5316\uff0c\u63a8\u8350\u8bed\u4e49\u7b49\u4ef7\uff0c\u4f46\u6267\u884c\u6548\u7387\u66f4\u9ad8\u7684SQL\u3002 \u667a\u80fd\u7d22\u5f15\u63a8\u8350\uff0c\u6ee1\u8db3\u5404\u79cdSQL\u8bed\u6cd5\u7ec4\u5408\u7684\u573a\u666f\u4e0b\uff0c\u63a8\u8350\u6700\u4f18\u7684\u7d22\u5f15\u7ec4\u5408\u3002 \u57fa\u4e8e\u4ee3\u4ef7\u7684\u6027\u80fd\u9a8c\u8bc1\uff0c\u786e\u4fdd\u57fa\u4e8eSQL\u91cd\u5199\u548c\u7d22\u5f15\u63a8\u8350\u7684\u65b0\u65b9\u6848\u6709\u7740\u66f4\u597d\u7684\u6027\u80fd\u3002 \u7d22\u5f15\u5206\u6790\uff0c\u5b9a\u4f4d\u5197\u4f59\u7d22\u5f15\uff0c\u8282\u7701\u7cfb\u7edf\u8d44\u6e90\u3002 \u652f\u6301\u6570\u636e\u5e93 \u00b6 PawSQL\u57fa\u4e8e\u81ea\u7814\u7684SQL\u89e3\u6790\u5668\uff0c\u652f\u6301\u591a\u79cd\u6570\u636e\u5e93\u7c7b\u578b\u4ee5\u53caSQL\u65b9\u8a00\uff0c\u5f53\u524d\u652f\u6301\u7684\u6570\u636e\u5e93\u5217\u8868\u5982\u4e0b\uff0c\u8fd8\u5728\u4e0d\u65ad\u589e\u52a0\u4e2d... MySQL 5.6\u53ca\u4ee5\u4e0a (official) PostgreSQL 9.1\u53ca\u4ee5\u4e0a (official) openGauss 1.0\u53ca\u4ee5\u4e0a (official) MariaDB 5.6\u53ca\u4ee5\u4e0a\uff08alpha\uff09 Oracle 11g\u53ca\u4ee5\u4e0a\uff08alpha\uff09 KingbaseES V8\uff08alpha\uff09 \u4e09\u6b65\u5b8c\u6210\u60a8\u7684SQL\u4f18\u5316 \u00b6 \u9009\u62e9/\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4 \u8f93\u5165\u5f85\u4f18\u5316SQL \u67e5\u8be2\u4f18\u5316\u914d\u7f6e 1. \u9009\u62e9/\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4 \u00b6 \u5de5\u4f5c\u7a7a\u95f4 \u662f\u4f60\u8fdb\u884c SQL\u4f18\u5316 \u7684\u4e0a\u4e0b\u6587\u73af\u5883\uff0c\u4e00\u822c\u5305\u62ec\u6570\u636e\u8868\u3001\u89c6\u56fe\u3001\u7d22\u5f15\u7684\u5b9a\u4e49\u53ca\u5176\u4e0a\u7684\u4e00\u4e9b\u7edf\u8ba1\u4fe1\u606f. PawSQL Cloud\u652f\u6301\u4ee5\u4e0b\u65b9\u5f0f\u521b\u5efa\u60a8\u7684\u5de5\u4f5c\u7a7a\u95f4\u3002 \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u4fe1\u606f\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4 \u652f\u6301MySQL/PostgreSQL/Opengauss/MariaDB\u7b49\u6570\u636e\u5e93 \u901a\u8fc7DDL\u6587\u4ef6\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4 \u901a\u8fc7\u624b\u5de5\u8f93\u5165DDL\u8bed\u53e5\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4 \u901a\u8fc7\u6570\u636e\u5e93dump\u51fa\u6765\u7684DDL\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4 \u63d0\u793a : \u5bf9\u4e8e\u6bcf\u4e00\u79cd\u5de5\u4f5c\u7a7a\u95f4\u521b\u5efa\u65b9\u5f0f\uff0cPawSQL\u63d0\u4f9b\u4e86\u5728\u7ebf\u6307\u5357\u5e2e\u60a8\u521b\u5efa\u60a8\u7684\u5de5\u4f5c\u7a7a\u95f4\u3002 2. \u8f93\u5165\u5f85\u4f18\u5316SQL \u00b6 \u5f85\u4f18\u5316SQL\u662f\u60a8\u8fdb\u884c\u67e5\u8be2\u4f18\u5316\u7684\u5bf9\u8c61\uff0c\u5b83\u7684\u6765\u6e90\u53ef\u4ee5\u662f \u6570\u636e\u5e93SQL\u65e5\u5fd7 \u652f\u6301MySQL\u6162\u65e5\u5fd7/\u901a\u7528\u65e5\u5fd7\uff0cPostgreSQL\u7684SQL\u65e5\u5fd7\uff0copengauss\u7684SQL\u65e5\u5fd7 \u5f85\u4f18\u5316SQL\u7ec4\u6210\u7684\u6587\u672c\u6587\u4ef6\uff1b\u4ee5 ; \u5206\u5272 \u6587\u672c\u6846\u624b\u5de5\u8f93\u5165\u7684SQL\u8bed\u53e5\uff1b\u4ee5 ; \u5206\u5272 \u63d0\u793a : \u540c\u6837\u7684\uff0c\u60a8\u53ef\u4ee5\u770b\u5230PawSQL\u63d0\u4f9b\u4e86\u5728\u7ebf\u6307\u5357\u5e2e\u60a8\u83b7\u53d6\u5f85\u4f18\u5316\u7684SQL\u3002 3. \u521b\u5efa\u67e5\u8be2\u4f18\u5316 \u00b6 \u67e5\u8be2\u4f18\u5316 \u8868\u793a\u5728\u60a8\u7684 \u5de5\u4f5c\u7a7a\u95f4 \u5185\u5bf9\u4e00\u7ec4SQL\u67e5\u8be2\u8fdb\u884c\u7684\u6027\u80fd\u4f18\u5316\u8bca\u65ad\uff0c\u4e00\u822c\u5305\u62ecSQL\u5ba1\u67e5\u3001\u91cd\u5199\u4f18\u5316\u3001\u7d22\u5f15\u63a8\u8350\u7b49\u3002 \u7528\u6237\u53ef\u4ee5\u5bf9\u4f18\u5316\u4efb\u52a1\u8f93\u5165\u3001\u8f93\u51fa\u3001\u6570\u636e\u6e90\u4ee5\u53ca\u6267\u884c\u8fc7\u7a0b\u7684\u914d\u7f6e\u3002 3.1 \u57fa\u7840\u914d\u7f6e \u00b6 \u4f18\u5316ID : \u6807\u8bc6\u60a8\u672c\u6b21\u4f18\u5316\u7684ID \u662f\u5426\u4ec5\u7d22\u5f15\u63a8\u8350 \uff1a\u6b64\u9009\u9879\u63a7\u5236\u662f\u5426\u542f\u7528\u91cd\u5199\u4f18\u5316\uff0c\u5728SQL\u5df2\u7ecf\u4e0a\u7ebf\u7684\u60c5\u51b5\u4e0b\uff0c\u4fee\u6539SQL\u53ef\u80fd\u65e0\u6cd5\u7acb\u5373\u5b9e\u65bd\uff0c\u5728\u6b64\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u7981\u7528\u6b64\u9009\u9879\uff1bPawSQL\u5c06\u4e0d\u4f1a\u91cd\u5199\u60a8\u7684SQL\uff0c\u53ea\u662f\u57fa\u4e8e\u539fSQL\u8fdb\u884c\u7d22\u5f15\u63a8\u8350\u3002 3.2 \u4f18\u5316\u9a8c\u8bc1 \u00b6 \u662f\u5426\u66f4\u65b0DDL\u4fe1\u606f \uff0c\u662f\u5426\u8fde\u63a5\u5230\u9a8c\u8bc1\u6570\u636e\u5e93\u83b7\u53d6\u6700\u65b0\u7684DDL\u4fe1\u606f\u3002 \u662f\u5426\u542f\u7528What-If\u6027\u80fd\u9a8c\u8bc1 \uff0c\u6b64\u9009\u9879\u63a7\u5236\u662f\u5426\u5bf9\u63a8\u8350\u7684\u4f18\u5316\u5efa\u8bae\u8fdb\u884c\u6027\u80fd\u9a8c\u8bc1\uff0c\u5982\u679c\u542f\u7528\u6b64\u9009\u9879\uff0cPawSQL\u5728\u4f18\u5316\u8be6\u60c5\u4e2d\u4f1a\u63d0\u4f9bSQL\u4f18\u5316\u524d\u540e\u7684\u6267\u884c\u8ba1\u5212\u53ca\u4ee3\u4ef7\u4fe1\u606f\uff0c\u4ece\u800c\u786e\u4fdd\u63a8\u8350\u7684\u4f18\u5316\u5efa\u8bae\uff08\u91cd\u5199\u4f18\u5316\u53ca\u7d22\u5f15\u63a8\u8350\uff09\u80fd\u591f\u771f\u5b9e\u63d0\u5347\u6570\u636e\u5e93\u6027\u80fd\u3002 \u6027\u80fd\u9a8c\u8bc1\u65f6\u662f\u5426\u542f\u7528Analyze \uff0c\u5982\u679c\u542f\u7528\u6b64\u9009\u9879\uff0c\u5219\u5728\u8fdb\u884cWhat-If\u6027\u80fd\u9a8c\u8bc1\u65f6\u83b7\u53d6SQL\u7684\u771f\u5b9e\u89e3\u6790\u53ca\u6267\u884c\u65f6\u95f4\uff0c\u907f\u514d\u4e86MySQL\u5bf9\u4e2d\u95f4\u7ed3\u679c\u8868explain\u7684\u7f3a\u9677\uff0c\u4ee3\u4ef7\u4f30\u7b97\u66f4\u52a0\u7cbe\u786e\u3002 **\u6ce8\u610f\uff1a**\u6700\u540e\u4e24\u4e2a\u6027\u80fd\u9a8c\u8bc1\u7684\u9009\u9879\u5e94\u907f\u514d\u5728\u751f\u4ea7\u5e93\u4e0a\u4f7f\u7528\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u6ca1\u6709\u5185\u7f6ewhat-if(\u5185\u7f6e\u865a\u62df\u7d22\u5f15)\u7684\u6570\u636e\u5e93(MySQL/Postgres\u7686\u662f)\u6765\u8bf4\uff0c\u6027\u80fd\u9a8c\u8bc1\u662f\u901a\u8fc7\u521b\u5efa\u63a8\u8350\u7d22\u5f15\u5e76\u8fdb\u884cexplain\u5206\u6790\u6267\u884c\u8ba1\u5212\uff0c\u7136\u540e\u5220\u9664\u63a8\u8350\u7d22\u5f15\u7684\u65b9\u5f0f\u6765\u505a\u7684\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5728\u751f\u4ea7\u5e93\u4e0a\u4f1a\u6d88\u8017\u4e00\u5b9a\u7684\u8d44\u6e90\uff0c\u4e14\u6267\u884c\u65f6\u95f4\u53ef\u80fd\u4f1a\u6bd4\u8f83\u957f\uff0c\u53ef\u80fd\u5bf9\u751f\u4ea7\u5e93\u4e0a\u7684\u4e1a\u52a1\u8fd0\u884c\u4ea7\u751f\u5f71\u54cd\u3002 3.3 \u7d22\u5f15\u63a8\u8350\u914d\u7f6e \u00b6 \u662f\u5426\u548c\u73b0\u6709\u7d22\u5f15\u53bb\u91cd \uff0c\u6b64\u9009\u9879\u8868\u793a\u63a8\u8350\u7d22\u5f15\u65f6\uff0c\u662f\u5426\u548c\u73b0\u6709\u7d22\u5f15\u53bb\u91cd\u3002 \u542f\u7528\u6b64\u9009\u9879\u7684\u573a\u666f\u662f\u4e0d\u8003\u8651\u5220\u9664\u73b0\u6709\u7684\u7d22\u5f15\uff0c\u56e0\u4e3a\u8f93\u5165\u7684SQL\u53ea\u662f\u5e76\u4e0d\u80fd\u4ee3\u8868\u8fd9\u4e2a\u6570\u636e\u5e93\u4e0a\u6240\u6709\u7684SQL\u573a\u666f\uff0c\u6240\u4ee5\u53ea\u8003\u8651\u65b0\u589e\u5bf9\u8f93\u5165SQL\u6709\u5e2e\u52a9\u7684\u7d22\u5f15\u3002\u5982\u679c\u80fd\u591f\u786e\u4fdd\u8f93\u5165\u7684SQL\u5305\u542b\u6b64\u6570\u636e\u5e93\u6240\u6709\u7684\u67e5\u8be2\uff0c\u90a3\u4e48\u53ea\u4fdd\u7559\u63a8\u8350\u7684\u7d22\u5f15\u5c31\u53ef\u4ee5\u4e86\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4e0d\u9009\u62e9\u6b64\u9009\u9879\uff0c\u5e76\u4e14\u4f7f\u7528\u65b0\u63a8\u8350\u7684\u7d22\u5f15\u4ee3\u66ff\u73b0\u6709\u7684\u7d22\u5f15\u3002 \u662f\u5426\u63a8\u8350\u8986\u76d6\u7d22\u5f15 \uff0c\u6b64\u9009\u9879\u8868\u793a\u63a8\u8350\u7d22\u5f15\u65f6\u662f\u5426\u8003\u8651\u8986\u76d6\u7d22\u5f15\u7b56\u7565\u3002 \u8986\u76d6\u7d22\u5f15\u53ef\u4ee5\u8ba9\u67e5\u8be2\u53ea\u8bbf\u95ee\u7d22\u5f15\u800c\u4e0d\u9700\u8981\u8bbf\u95ee\u6570\u636e\u8868\uff08\u8bf7\u53c2\u8003\u300a\u9ad8\u6548\u7d22\u5f15\u7684\u51c6\u5219\u300b\uff09\uff0c\u5728\u4e00\u4e9b\u573a\u666f\u4e0b\uff0c\u8986\u76d6\u7d22\u5f15\u80fd\u591f\u5927\u5e45\u63d0\u793a\u67e5\u8be2\u6027\u80fd\u3002\u4f46\u662f\u8986\u76d6\u7d22\u5f15\u4f1a\u5305\u542b\u67e5\u8be2\u6761\u4ef6\u4e2d\u6ca1\u6709\u4f7f\u7528\u7684\u5217\uff0c\u4ece\u800c\u589e\u52a0\u7d22\u5f15\u6240\u5360\u7684\u78c1\u76d8\u7a7a\u95f4\u5927\u5c0f\u3002 \u8986\u76d6\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570 \uff0c\u6b64\u9879\u8bbe\u7f6e\u8868\u793a\u5728\u8fdb\u884c\u8986\u76d6\u7d22\u5f15\u63a8\u8350\u65f6\uff0c\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570\u9650\u5236\u3002\u5982\u4ee5\u4e0a\u6240\u8ff0\uff0c\u8986\u76d6\u7d22\u5f15\u4f1a\u5305\u542b\u67e5\u8be2\u6761\u4ef6\u4e2d\u6ca1\u6709\u4f7f\u7528\u7684\u5217\uff0c\u4ece\u800c\u589e\u52a0\u7d22\u5f15\u6240\u5360\u7684\u78c1\u76d8\u7a7a\u95f4\u5927\u5c0f\u3002\u6b64\u9009\u9879\u53ef\u4ee5\u63a7\u5236\u8986\u76d6\u7d22\u5f15\u6240\u5360\u7a7a\u95f4\u7684\u5927\u5c0f\uff0c\u8ba9PawSQL\u80fd\u591f\u4e3a\u7528\u6237\u63d0\u4f9b\u4e00\u5b9a\u7a7a\u95f4\u9650\u5236\u7684\u60c5\u51b5\u4e0b\u5229\u7528\u8986\u76d6\u7d22\u5f15\u7684\u975e\u56de\u8868\u7279\u6027\u3002 \u7d22\u5f15\u7684\u6700\u5927\u5217\u6570 \uff0c\u6b64\u9009\u9879\u9650\u5236\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570\uff0c\u7d22\u5f15\u4f1a\u5360\u7528\u4e00\u5b9a\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u4e14\u592a\u591a\u5217\u7684\u7d22\u5f15\u4f1a\u8ba9\u7d22\u5f15\u6811\u7684\u5c42\u7ea7\u52a0\u6df1\uff0c\u4ece\u800c\u589e\u52a0\u7d22\u5f15\u8bbf\u95ee\u7684\u4ee3\u4ef7\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6b64\u9879\u8bbe\u7f6e\u63a7\u5236\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570\u3002 **\u5355\u8868\u6700\u5927\u7d22\u5f15\u6570\u76ee\uff0c**\u5982\u300a\u9ad8\u6548\u7d22\u5f15\u7684\u51c6\u5219\u300b\u4e2d\u6240\u8ff0\uff0c\u7d22\u5f15\u4e0d\u662f\u514d\u8d39\u7684\u5348\u9910\uff0c\u5b83\u4f1a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\uff0c\u5e76\u5bf9\u5bf9DML\u64cd\u4f5c\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u6570\u636e\u5e93\u7ba1\u7406\u5668\u5199\u5165\u8868\u7684\u6bcf\u4e00\u884c\uff0c\u5b83\u8fd8\u5fc5\u987b\u66f4\u65b0\u4efb\u4f55\u53d7\u5f71\u54cd\u7684\u7d22\u5f15\u3002\u56e0\u6b64\uff0cPawSQL\u901a\u8fc7\u6b64\u9009\u9879\u6765\u5ba1\u67e5\u5355\u8868\u7684\u7d22\u5f15\u6570\u91cf\uff0c\u5e76\u8fdb\u884c\u8b66\u544a\u63d0\u793a\u3002 3.4 \u4f18\u5316\u89c4\u5219\u914d\u7f6e \u00b6 \u662f\u5426\u542f\u7528\u8be5\u4f18\u5316\u89c4\u5219\uff0c\u4ee5\u53ca\u4fee\u6539\u76f8\u5e94\u9608\u503c \u4f18\u5316\u7ed3\u679c\u89e3\u6790 \u00b6 \u6c47\u603b\u7ed3\u679c\u5c55\u793a \u00b6 \u5185\u5bb9\u5305\u62ec \u4f18\u5316\u6982\u8981 \u63a8\u8350\u7684\u7d22\u5f15 SQL\u4f18\u5316\u5217\u8868 \u5355SQL\u4f18\u5316\u8be6\u60c5 \u00b6 \u539f\u59cbSQL \u91cd\u5199\u4f18\u5316 \u91cd\u5199\u540e\u7684SQL \u91cd\u5199\u6240\u5e94\u7528\u7684\u4f18\u5316\u7b56\u7565 \u91cd\u5199\u4f18\u5316\u5bf9\u5e94\u7684SQL\u7247\u6bb5 \u89c4\u5219\u5ba1\u67e5\u60c5\u51b5 \u8fdd\u53cd\u7684\u5ba1\u67e5\u89c4\u5219 \u8fdd\u53cd\u89c4\u5219\u7684SQL\u7247\u6bb5 \u7d22\u5f15\u63a8\u8350\u60c5\u51b5 \u63a8\u8350\u7684\u7d22\u5f15 \u7d22\u5f15\u63a8\u8350\u7684\u4f9d\u636e \u7d22\u5f15\u5206\u6790 \u5404\u4e2a\u8868\u4e0a\u7684\u7d22\u5f15\u5217\u8868\uff0c\u662f\u5426\u662f\u5197\u4f59\u7d22\u5f15 \u73b0\u6709\u7d22\u5f15\u5982\u4f55\u5e2e\u52a9\u6b64SQL \u5355\u8868\u7d22\u5f15\u4e2a\u6570\u8d85\u8fc7\u9608\u503c\u63d0\u793a \u6027\u80fd\u9a8c\u8bc1 \u6027\u80fd\u63d0\u5347\u6bd4 \u9a8c\u8bc1\u751f\u6548\u7684\u63a8\u8350\u7d22\u5f15 \u4f18\u5316\u4e4b\u524d\u7684\u6267\u884c\u8ba1\u5212 \u4f18\u5316\u4e4b\u540e\u7684\u6267\u884c\u8ba1\u5212 \u5173\u4e8ePawSQL \u00b6 PawSQL\u4e13\u6ce8\u6570\u636e\u5e93\u6027\u80fd\u4f18\u5316\u7684\u81ea\u52a8\u5316\u548c\u667a\u80fd\u5316\uff0c\u652f\u6301MySQL\uff0cPostgreSQL\uff0cOpengauss\uff0cOracle(alpha), MariaDB(alpha)\u7b49\uff0c\u63d0\u4f9b\u7684SQL\u4f18\u5316\u4ea7\u54c1\u5305\u62ec: PawSQL Cloud \uff0c\u5728\u7ebf\u81ea\u52a8\u5316SQL\u4f18\u5316\u5de5\u5177\uff0c\u652f\u6301SQL\u5ba1\u67e5\uff0c\u667a\u80fd\u67e5\u8be2\u91cd\u5199\u3001\u57fa\u4e8e\u4ee3\u4ef7\u7684\u7d22\u5f15\u63a8\u8350\uff0c\u9002\u7528\u4e8e\u6570\u636e\u5e93\u7ba1\u7406\u5458\u53ca\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c PawSQL Advisor \uff0cJetBrain\u7684DataGrip\u3001IDEA\u7b49IDE\u7684\u63d2\u4ef6, \u9002\u7528\u4e8e\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c\u53ef\u4ee5IDEA/DataGrip\u7684\u5e94\u7528\u5e02\u573a\u901a\u8fc7\u540d\u79f0\u641c\u7d22\u201cPawSQL Advisor\u201d\u5b89\u88c5\u3002 PawSQL Engine, \u662fPawSQL\u7cfb\u5217\u4ea7\u54c1\u7684\u540e\u7aef\u4f18\u5316\u5f15\u64ce\uff0c\u53ef\u4ee5\u4ee5docker\u955c\u50cf\u7684\u65b9\u5f0f\u72ec\u7acb\u5b89\u88c5\u90e8\u7f72\uff0c\u5e76\u901a\u8fc7http/json\u7684\u63a5\u53e3\u63d0\u4f9bSQL\u4f18\u5316\u670d\u52a1\u3002 \u8054\u7cfb\u6211\u4eec \u00b6 \u90ae\u4ef6\uff1a service@pawsql.com Twitter: https://twitter.com/pawsql \u626b\u63cf\u5173\u6ce8PawSQL\u516c\u4f17\u53f7","title":"PawSQL Cloud"},{"location":"pawcloud/introduction/#_1","text":"PawSQL Cloud\u662fPawSQL Advisor\u7684SaaS\u7248\u672c\uff0c\u5b83\u6574\u5408\u4e86\u4e1a\u754c\u5173\u4e8e\u5173\u7cfb\u6570\u636e\u5e93\u67e5\u8be2\u4f18\u5316\u6700\u4f73\u5b9e\u8df5\uff0c\u901a\u8fc7\u67e5\u8be2\u91cd\u5199\u4f18\u5316\u3001\u667a\u80fd\u7d22\u5f15\u63a8\u8350\uff0c\u5e2e\u52a9\u5e94\u7528\u5f00\u53d1\u4eba\u5458\u53ca\u6570\u636e\u5e93\u7ba1\u7406\u4eba\u5458\u4e00\u7ad9\u5f0f\u89e3\u51b3SQL\u6027\u80fd\u95ee\u9898\u3002 \u76f8\u6bd4\u8f83PawSQL Advisor/Paw Index Advisor\u7b49\u57fa\u4e8eIntelliJ\u7684\u63d2\u4ef6\uff0cPawSQL Cloud\u514d\u5b89\u88c5\uff0c\u4e0d\u4f9d\u8d56\u5176\u4ed6\u5de5\u5177\uff0c\u4e0d\u4ec5\u9002\u5408\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c\u4e5f\u9002\u5408\u6570\u636e\u5e93\u7ba1\u7406\u4eba\u5458\u7b49\u975e\u5f00\u53d1\u4eba\u5458\u4f7f\u7528\uff1bPawSQL Cloud\u540c\u65f6\u80fd\u591f\u8bb0\u5f55\u60a8\u7684\u4f18\u5316\u5386\u53f2\uff0c\u4fbf\u4e8e\u65e5\u540e\u67e5\u770b\u548c\u8ddf\u8e2a\uff0c\u540c\u65f6\u4f18\u5316\u7ed3\u679c\u53ef\u4ee5\u901a\u8fc7\u94fe\u63a5\u548c\u540c\u4e8b\u5171\u4eab\u3002","title":"\u6982\u8ff0"},{"location":"pawcloud/introduction/#_2","text":"\u57fa\u4e8e\u89c4\u5219\u7684SQL\u5ba1\u67e5\uff0c\u5305\u62ec\u6b63\u786e\u6027\u5ba1\u67e5\u548c\u6027\u80fd\u4f18\u5316\u5ba1\u67e5\u89c4\u5219\u3002 \u4e30\u5bcc\u7684\u91cd\u5199\u4f18\u5316\uff0c\u63a8\u8350\u8bed\u4e49\u7b49\u4ef7\uff0c\u4f46\u6267\u884c\u6548\u7387\u66f4\u9ad8\u7684SQL\u3002 \u667a\u80fd\u7d22\u5f15\u63a8\u8350\uff0c\u6ee1\u8db3\u5404\u79cdSQL\u8bed\u6cd5\u7ec4\u5408\u7684\u573a\u666f\u4e0b\uff0c\u63a8\u8350\u6700\u4f18\u7684\u7d22\u5f15\u7ec4\u5408\u3002 \u57fa\u4e8e\u4ee3\u4ef7\u7684\u6027\u80fd\u9a8c\u8bc1\uff0c\u786e\u4fdd\u57fa\u4e8eSQL\u91cd\u5199\u548c\u7d22\u5f15\u63a8\u8350\u7684\u65b0\u65b9\u6848\u6709\u7740\u66f4\u597d\u7684\u6027\u80fd\u3002 \u7d22\u5f15\u5206\u6790\uff0c\u5b9a\u4f4d\u5197\u4f59\u7d22\u5f15\uff0c\u8282\u7701\u7cfb\u7edf\u8d44\u6e90\u3002","title":"\u6838\u5fc3\u529f\u80fd"},{"location":"pawcloud/introduction/#_3","text":"PawSQL\u57fa\u4e8e\u81ea\u7814\u7684SQL\u89e3\u6790\u5668\uff0c\u652f\u6301\u591a\u79cd\u6570\u636e\u5e93\u7c7b\u578b\u4ee5\u53caSQL\u65b9\u8a00\uff0c\u5f53\u524d\u652f\u6301\u7684\u6570\u636e\u5e93\u5217\u8868\u5982\u4e0b\uff0c\u8fd8\u5728\u4e0d\u65ad\u589e\u52a0\u4e2d... MySQL 5.6\u53ca\u4ee5\u4e0a (official) PostgreSQL 9.1\u53ca\u4ee5\u4e0a (official) openGauss 1.0\u53ca\u4ee5\u4e0a (official) MariaDB 5.6\u53ca\u4ee5\u4e0a\uff08alpha\uff09 Oracle 11g\u53ca\u4ee5\u4e0a\uff08alpha\uff09 KingbaseES V8\uff08alpha\uff09","title":"\u652f\u6301\u6570\u636e\u5e93"},{"location":"pawcloud/introduction/#sql","text":"\u9009\u62e9/\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4 \u8f93\u5165\u5f85\u4f18\u5316SQL \u67e5\u8be2\u4f18\u5316\u914d\u7f6e","title":"\u4e09\u6b65\u5b8c\u6210\u60a8\u7684SQL\u4f18\u5316"},{"location":"pawcloud/introduction/#1","text":"\u5de5\u4f5c\u7a7a\u95f4 \u662f\u4f60\u8fdb\u884c SQL\u4f18\u5316 \u7684\u4e0a\u4e0b\u6587\u73af\u5883\uff0c\u4e00\u822c\u5305\u62ec\u6570\u636e\u8868\u3001\u89c6\u56fe\u3001\u7d22\u5f15\u7684\u5b9a\u4e49\u53ca\u5176\u4e0a\u7684\u4e00\u4e9b\u7edf\u8ba1\u4fe1\u606f. PawSQL Cloud\u652f\u6301\u4ee5\u4e0b\u65b9\u5f0f\u521b\u5efa\u60a8\u7684\u5de5\u4f5c\u7a7a\u95f4\u3002 \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u4fe1\u606f\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4 \u652f\u6301MySQL/PostgreSQL/Opengauss/MariaDB\u7b49\u6570\u636e\u5e93 \u901a\u8fc7DDL\u6587\u4ef6\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4 \u901a\u8fc7\u624b\u5de5\u8f93\u5165DDL\u8bed\u53e5\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4 \u901a\u8fc7\u6570\u636e\u5e93dump\u51fa\u6765\u7684DDL\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4 \u63d0\u793a : \u5bf9\u4e8e\u6bcf\u4e00\u79cd\u5de5\u4f5c\u7a7a\u95f4\u521b\u5efa\u65b9\u5f0f\uff0cPawSQL\u63d0\u4f9b\u4e86\u5728\u7ebf\u6307\u5357\u5e2e\u60a8\u521b\u5efa\u60a8\u7684\u5de5\u4f5c\u7a7a\u95f4\u3002","title":"1. \u9009\u62e9/\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4"},{"location":"pawcloud/introduction/#2-sql","text":"\u5f85\u4f18\u5316SQL\u662f\u60a8\u8fdb\u884c\u67e5\u8be2\u4f18\u5316\u7684\u5bf9\u8c61\uff0c\u5b83\u7684\u6765\u6e90\u53ef\u4ee5\u662f \u6570\u636e\u5e93SQL\u65e5\u5fd7 \u652f\u6301MySQL\u6162\u65e5\u5fd7/\u901a\u7528\u65e5\u5fd7\uff0cPostgreSQL\u7684SQL\u65e5\u5fd7\uff0copengauss\u7684SQL\u65e5\u5fd7 \u5f85\u4f18\u5316SQL\u7ec4\u6210\u7684\u6587\u672c\u6587\u4ef6\uff1b\u4ee5 ; \u5206\u5272 \u6587\u672c\u6846\u624b\u5de5\u8f93\u5165\u7684SQL\u8bed\u53e5\uff1b\u4ee5 ; \u5206\u5272 \u63d0\u793a : \u540c\u6837\u7684\uff0c\u60a8\u53ef\u4ee5\u770b\u5230PawSQL\u63d0\u4f9b\u4e86\u5728\u7ebf\u6307\u5357\u5e2e\u60a8\u83b7\u53d6\u5f85\u4f18\u5316\u7684SQL\u3002","title":"2. \u8f93\u5165\u5f85\u4f18\u5316SQL"},{"location":"pawcloud/introduction/#3","text":"\u67e5\u8be2\u4f18\u5316 \u8868\u793a\u5728\u60a8\u7684 \u5de5\u4f5c\u7a7a\u95f4 \u5185\u5bf9\u4e00\u7ec4SQL\u67e5\u8be2\u8fdb\u884c\u7684\u6027\u80fd\u4f18\u5316\u8bca\u65ad\uff0c\u4e00\u822c\u5305\u62ecSQL\u5ba1\u67e5\u3001\u91cd\u5199\u4f18\u5316\u3001\u7d22\u5f15\u63a8\u8350\u7b49\u3002 \u7528\u6237\u53ef\u4ee5\u5bf9\u4f18\u5316\u4efb\u52a1\u8f93\u5165\u3001\u8f93\u51fa\u3001\u6570\u636e\u6e90\u4ee5\u53ca\u6267\u884c\u8fc7\u7a0b\u7684\u914d\u7f6e\u3002","title":"3. \u521b\u5efa\u67e5\u8be2\u4f18\u5316"},{"location":"pawcloud/introduction/#31","text":"\u4f18\u5316ID : \u6807\u8bc6\u60a8\u672c\u6b21\u4f18\u5316\u7684ID \u662f\u5426\u4ec5\u7d22\u5f15\u63a8\u8350 \uff1a\u6b64\u9009\u9879\u63a7\u5236\u662f\u5426\u542f\u7528\u91cd\u5199\u4f18\u5316\uff0c\u5728SQL\u5df2\u7ecf\u4e0a\u7ebf\u7684\u60c5\u51b5\u4e0b\uff0c\u4fee\u6539SQL\u53ef\u80fd\u65e0\u6cd5\u7acb\u5373\u5b9e\u65bd\uff0c\u5728\u6b64\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u7981\u7528\u6b64\u9009\u9879\uff1bPawSQL\u5c06\u4e0d\u4f1a\u91cd\u5199\u60a8\u7684SQL\uff0c\u53ea\u662f\u57fa\u4e8e\u539fSQL\u8fdb\u884c\u7d22\u5f15\u63a8\u8350\u3002","title":"3.1 \u57fa\u7840\u914d\u7f6e"},{"location":"pawcloud/introduction/#32","text":"\u662f\u5426\u66f4\u65b0DDL\u4fe1\u606f \uff0c\u662f\u5426\u8fde\u63a5\u5230\u9a8c\u8bc1\u6570\u636e\u5e93\u83b7\u53d6\u6700\u65b0\u7684DDL\u4fe1\u606f\u3002 \u662f\u5426\u542f\u7528What-If\u6027\u80fd\u9a8c\u8bc1 \uff0c\u6b64\u9009\u9879\u63a7\u5236\u662f\u5426\u5bf9\u63a8\u8350\u7684\u4f18\u5316\u5efa\u8bae\u8fdb\u884c\u6027\u80fd\u9a8c\u8bc1\uff0c\u5982\u679c\u542f\u7528\u6b64\u9009\u9879\uff0cPawSQL\u5728\u4f18\u5316\u8be6\u60c5\u4e2d\u4f1a\u63d0\u4f9bSQL\u4f18\u5316\u524d\u540e\u7684\u6267\u884c\u8ba1\u5212\u53ca\u4ee3\u4ef7\u4fe1\u606f\uff0c\u4ece\u800c\u786e\u4fdd\u63a8\u8350\u7684\u4f18\u5316\u5efa\u8bae\uff08\u91cd\u5199\u4f18\u5316\u53ca\u7d22\u5f15\u63a8\u8350\uff09\u80fd\u591f\u771f\u5b9e\u63d0\u5347\u6570\u636e\u5e93\u6027\u80fd\u3002 \u6027\u80fd\u9a8c\u8bc1\u65f6\u662f\u5426\u542f\u7528Analyze \uff0c\u5982\u679c\u542f\u7528\u6b64\u9009\u9879\uff0c\u5219\u5728\u8fdb\u884cWhat-If\u6027\u80fd\u9a8c\u8bc1\u65f6\u83b7\u53d6SQL\u7684\u771f\u5b9e\u89e3\u6790\u53ca\u6267\u884c\u65f6\u95f4\uff0c\u907f\u514d\u4e86MySQL\u5bf9\u4e2d\u95f4\u7ed3\u679c\u8868explain\u7684\u7f3a\u9677\uff0c\u4ee3\u4ef7\u4f30\u7b97\u66f4\u52a0\u7cbe\u786e\u3002 **\u6ce8\u610f\uff1a**\u6700\u540e\u4e24\u4e2a\u6027\u80fd\u9a8c\u8bc1\u7684\u9009\u9879\u5e94\u907f\u514d\u5728\u751f\u4ea7\u5e93\u4e0a\u4f7f\u7528\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u6ca1\u6709\u5185\u7f6ewhat-if(\u5185\u7f6e\u865a\u62df\u7d22\u5f15)\u7684\u6570\u636e\u5e93(MySQL/Postgres\u7686\u662f)\u6765\u8bf4\uff0c\u6027\u80fd\u9a8c\u8bc1\u662f\u901a\u8fc7\u521b\u5efa\u63a8\u8350\u7d22\u5f15\u5e76\u8fdb\u884cexplain\u5206\u6790\u6267\u884c\u8ba1\u5212\uff0c\u7136\u540e\u5220\u9664\u63a8\u8350\u7d22\u5f15\u7684\u65b9\u5f0f\u6765\u505a\u7684\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5728\u751f\u4ea7\u5e93\u4e0a\u4f1a\u6d88\u8017\u4e00\u5b9a\u7684\u8d44\u6e90\uff0c\u4e14\u6267\u884c\u65f6\u95f4\u53ef\u80fd\u4f1a\u6bd4\u8f83\u957f\uff0c\u53ef\u80fd\u5bf9\u751f\u4ea7\u5e93\u4e0a\u7684\u4e1a\u52a1\u8fd0\u884c\u4ea7\u751f\u5f71\u54cd\u3002","title":"3.2 \u4f18\u5316\u9a8c\u8bc1"},{"location":"pawcloud/introduction/#33","text":"\u662f\u5426\u548c\u73b0\u6709\u7d22\u5f15\u53bb\u91cd \uff0c\u6b64\u9009\u9879\u8868\u793a\u63a8\u8350\u7d22\u5f15\u65f6\uff0c\u662f\u5426\u548c\u73b0\u6709\u7d22\u5f15\u53bb\u91cd\u3002 \u542f\u7528\u6b64\u9009\u9879\u7684\u573a\u666f\u662f\u4e0d\u8003\u8651\u5220\u9664\u73b0\u6709\u7684\u7d22\u5f15\uff0c\u56e0\u4e3a\u8f93\u5165\u7684SQL\u53ea\u662f\u5e76\u4e0d\u80fd\u4ee3\u8868\u8fd9\u4e2a\u6570\u636e\u5e93\u4e0a\u6240\u6709\u7684SQL\u573a\u666f\uff0c\u6240\u4ee5\u53ea\u8003\u8651\u65b0\u589e\u5bf9\u8f93\u5165SQL\u6709\u5e2e\u52a9\u7684\u7d22\u5f15\u3002\u5982\u679c\u80fd\u591f\u786e\u4fdd\u8f93\u5165\u7684SQL\u5305\u542b\u6b64\u6570\u636e\u5e93\u6240\u6709\u7684\u67e5\u8be2\uff0c\u90a3\u4e48\u53ea\u4fdd\u7559\u63a8\u8350\u7684\u7d22\u5f15\u5c31\u53ef\u4ee5\u4e86\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4e0d\u9009\u62e9\u6b64\u9009\u9879\uff0c\u5e76\u4e14\u4f7f\u7528\u65b0\u63a8\u8350\u7684\u7d22\u5f15\u4ee3\u66ff\u73b0\u6709\u7684\u7d22\u5f15\u3002 \u662f\u5426\u63a8\u8350\u8986\u76d6\u7d22\u5f15 \uff0c\u6b64\u9009\u9879\u8868\u793a\u63a8\u8350\u7d22\u5f15\u65f6\u662f\u5426\u8003\u8651\u8986\u76d6\u7d22\u5f15\u7b56\u7565\u3002 \u8986\u76d6\u7d22\u5f15\u53ef\u4ee5\u8ba9\u67e5\u8be2\u53ea\u8bbf\u95ee\u7d22\u5f15\u800c\u4e0d\u9700\u8981\u8bbf\u95ee\u6570\u636e\u8868\uff08\u8bf7\u53c2\u8003\u300a\u9ad8\u6548\u7d22\u5f15\u7684\u51c6\u5219\u300b\uff09\uff0c\u5728\u4e00\u4e9b\u573a\u666f\u4e0b\uff0c\u8986\u76d6\u7d22\u5f15\u80fd\u591f\u5927\u5e45\u63d0\u793a\u67e5\u8be2\u6027\u80fd\u3002\u4f46\u662f\u8986\u76d6\u7d22\u5f15\u4f1a\u5305\u542b\u67e5\u8be2\u6761\u4ef6\u4e2d\u6ca1\u6709\u4f7f\u7528\u7684\u5217\uff0c\u4ece\u800c\u589e\u52a0\u7d22\u5f15\u6240\u5360\u7684\u78c1\u76d8\u7a7a\u95f4\u5927\u5c0f\u3002 \u8986\u76d6\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570 \uff0c\u6b64\u9879\u8bbe\u7f6e\u8868\u793a\u5728\u8fdb\u884c\u8986\u76d6\u7d22\u5f15\u63a8\u8350\u65f6\uff0c\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570\u9650\u5236\u3002\u5982\u4ee5\u4e0a\u6240\u8ff0\uff0c\u8986\u76d6\u7d22\u5f15\u4f1a\u5305\u542b\u67e5\u8be2\u6761\u4ef6\u4e2d\u6ca1\u6709\u4f7f\u7528\u7684\u5217\uff0c\u4ece\u800c\u589e\u52a0\u7d22\u5f15\u6240\u5360\u7684\u78c1\u76d8\u7a7a\u95f4\u5927\u5c0f\u3002\u6b64\u9009\u9879\u53ef\u4ee5\u63a7\u5236\u8986\u76d6\u7d22\u5f15\u6240\u5360\u7a7a\u95f4\u7684\u5927\u5c0f\uff0c\u8ba9PawSQL\u80fd\u591f\u4e3a\u7528\u6237\u63d0\u4f9b\u4e00\u5b9a\u7a7a\u95f4\u9650\u5236\u7684\u60c5\u51b5\u4e0b\u5229\u7528\u8986\u76d6\u7d22\u5f15\u7684\u975e\u56de\u8868\u7279\u6027\u3002 \u7d22\u5f15\u7684\u6700\u5927\u5217\u6570 \uff0c\u6b64\u9009\u9879\u9650\u5236\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570\uff0c\u7d22\u5f15\u4f1a\u5360\u7528\u4e00\u5b9a\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u4e14\u592a\u591a\u5217\u7684\u7d22\u5f15\u4f1a\u8ba9\u7d22\u5f15\u6811\u7684\u5c42\u7ea7\u52a0\u6df1\uff0c\u4ece\u800c\u589e\u52a0\u7d22\u5f15\u8bbf\u95ee\u7684\u4ee3\u4ef7\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6b64\u9879\u8bbe\u7f6e\u63a7\u5236\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570\u3002 **\u5355\u8868\u6700\u5927\u7d22\u5f15\u6570\u76ee\uff0c**\u5982\u300a\u9ad8\u6548\u7d22\u5f15\u7684\u51c6\u5219\u300b\u4e2d\u6240\u8ff0\uff0c\u7d22\u5f15\u4e0d\u662f\u514d\u8d39\u7684\u5348\u9910\uff0c\u5b83\u4f1a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\uff0c\u5e76\u5bf9\u5bf9DML\u64cd\u4f5c\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u6570\u636e\u5e93\u7ba1\u7406\u5668\u5199\u5165\u8868\u7684\u6bcf\u4e00\u884c\uff0c\u5b83\u8fd8\u5fc5\u987b\u66f4\u65b0\u4efb\u4f55\u53d7\u5f71\u54cd\u7684\u7d22\u5f15\u3002\u56e0\u6b64\uff0cPawSQL\u901a\u8fc7\u6b64\u9009\u9879\u6765\u5ba1\u67e5\u5355\u8868\u7684\u7d22\u5f15\u6570\u91cf\uff0c\u5e76\u8fdb\u884c\u8b66\u544a\u63d0\u793a\u3002","title":"3.3 \u7d22\u5f15\u63a8\u8350\u914d\u7f6e"},{"location":"pawcloud/introduction/#34","text":"\u662f\u5426\u542f\u7528\u8be5\u4f18\u5316\u89c4\u5219\uff0c\u4ee5\u53ca\u4fee\u6539\u76f8\u5e94\u9608\u503c","title":"3.4 \u4f18\u5316\u89c4\u5219\u914d\u7f6e"},{"location":"pawcloud/introduction/#_4","text":"","title":"\u4f18\u5316\u7ed3\u679c\u89e3\u6790"},{"location":"pawcloud/introduction/#_5","text":"\u5185\u5bb9\u5305\u62ec \u4f18\u5316\u6982\u8981 \u63a8\u8350\u7684\u7d22\u5f15 SQL\u4f18\u5316\u5217\u8868","title":"\u6c47\u603b\u7ed3\u679c\u5c55\u793a"},{"location":"pawcloud/introduction/#sql_1","text":"\u539f\u59cbSQL \u91cd\u5199\u4f18\u5316 \u91cd\u5199\u540e\u7684SQL \u91cd\u5199\u6240\u5e94\u7528\u7684\u4f18\u5316\u7b56\u7565 \u91cd\u5199\u4f18\u5316\u5bf9\u5e94\u7684SQL\u7247\u6bb5 \u89c4\u5219\u5ba1\u67e5\u60c5\u51b5 \u8fdd\u53cd\u7684\u5ba1\u67e5\u89c4\u5219 \u8fdd\u53cd\u89c4\u5219\u7684SQL\u7247\u6bb5 \u7d22\u5f15\u63a8\u8350\u60c5\u51b5 \u63a8\u8350\u7684\u7d22\u5f15 \u7d22\u5f15\u63a8\u8350\u7684\u4f9d\u636e \u7d22\u5f15\u5206\u6790 \u5404\u4e2a\u8868\u4e0a\u7684\u7d22\u5f15\u5217\u8868\uff0c\u662f\u5426\u662f\u5197\u4f59\u7d22\u5f15 \u73b0\u6709\u7d22\u5f15\u5982\u4f55\u5e2e\u52a9\u6b64SQL \u5355\u8868\u7d22\u5f15\u4e2a\u6570\u8d85\u8fc7\u9608\u503c\u63d0\u793a \u6027\u80fd\u9a8c\u8bc1 \u6027\u80fd\u63d0\u5347\u6bd4 \u9a8c\u8bc1\u751f\u6548\u7684\u63a8\u8350\u7d22\u5f15 \u4f18\u5316\u4e4b\u524d\u7684\u6267\u884c\u8ba1\u5212 \u4f18\u5316\u4e4b\u540e\u7684\u6267\u884c\u8ba1\u5212","title":"\u5355SQL\u4f18\u5316\u8be6\u60c5"},{"location":"pawcloud/introduction/#pawsql","text":"PawSQL\u4e13\u6ce8\u6570\u636e\u5e93\u6027\u80fd\u4f18\u5316\u7684\u81ea\u52a8\u5316\u548c\u667a\u80fd\u5316\uff0c\u652f\u6301MySQL\uff0cPostgreSQL\uff0cOpengauss\uff0cOracle(alpha), MariaDB(alpha)\u7b49\uff0c\u63d0\u4f9b\u7684SQL\u4f18\u5316\u4ea7\u54c1\u5305\u62ec: PawSQL Cloud \uff0c\u5728\u7ebf\u81ea\u52a8\u5316SQL\u4f18\u5316\u5de5\u5177\uff0c\u652f\u6301SQL\u5ba1\u67e5\uff0c\u667a\u80fd\u67e5\u8be2\u91cd\u5199\u3001\u57fa\u4e8e\u4ee3\u4ef7\u7684\u7d22\u5f15\u63a8\u8350\uff0c\u9002\u7528\u4e8e\u6570\u636e\u5e93\u7ba1\u7406\u5458\u53ca\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c PawSQL Advisor \uff0cJetBrain\u7684DataGrip\u3001IDEA\u7b49IDE\u7684\u63d2\u4ef6, \u9002\u7528\u4e8e\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c\u53ef\u4ee5IDEA/DataGrip\u7684\u5e94\u7528\u5e02\u573a\u901a\u8fc7\u540d\u79f0\u641c\u7d22\u201cPawSQL Advisor\u201d\u5b89\u88c5\u3002 PawSQL Engine, \u662fPawSQL\u7cfb\u5217\u4ea7\u54c1\u7684\u540e\u7aef\u4f18\u5316\u5f15\u64ce\uff0c\u53ef\u4ee5\u4ee5docker\u955c\u50cf\u7684\u65b9\u5f0f\u72ec\u7acb\u5b89\u88c5\u90e8\u7f72\uff0c\u5e76\u901a\u8fc7http/json\u7684\u63a5\u53e3\u63d0\u4f9bSQL\u4f18\u5316\u670d\u52a1\u3002","title":"\u5173\u4e8ePawSQL"},{"location":"pawcloud/introduction/#_6","text":"\u90ae\u4ef6\uff1a service@pawsql.com Twitter: https://twitter.com/pawsql \u626b\u63cf\u5173\u6ce8PawSQL\u516c\u4f17\u53f7","title":"\u8054\u7cfb\u6211\u4eec"},{"location":"pawindexadvisor/","text":"What is Paw Index Advisor? \u00b6 Paw Index Advisor is an automatic and intelligent cost-based index recommendation tool for MySQL and PostgreSQL databases. Paw Index Advisor is integrated with the most popular IDE, such as IntelliJ IDEA , PhpStorm, PyCharm , WebStorm. It helps database application developers and database administrator optimize their queries by One Click . Features \u00b6 Combination of cost based and heuristic algorithm based Support MySQL and PostgreSQL and derivatives, such as Opengauss, Maria Support index recommendation covering matching, screening, sort-avoiding,covering De-duplicate with existing indexes Support query rewrites, sattc, view folding, and ordinal rewrite Client-based, non-invasion to production system Support what-if analysis , make sure indexes recommended be used in later query execution Get started \u00b6 Start the JetBrains IDE(IntelliJ IDEA, CLion, PyCharm and etc), open the project Setting, select Plugins; Enter \"Paw Index Advisor\" in martketplace and click install Configure the running parameters of PawSQL Advisor on the Setting page Right click on the SQL file or folder to be analyzed, and click \"Run Index Advisor\" Wait for a minute and recommended indexes will be presented to you to accelerate your database queries. Claim: Paw Index Advisor is delivered as a beta version for free trial. You are welcomed to file bugs at https://pawsql.youtrack.cloud/newIssue .","title":"Get started with Paw Index Advisor"},{"location":"pawindexadvisor/#what-is-paw-index-advisor","text":"Paw Index Advisor is an automatic and intelligent cost-based index recommendation tool for MySQL and PostgreSQL databases. Paw Index Advisor is integrated with the most popular IDE, such as IntelliJ IDEA , PhpStorm, PyCharm , WebStorm. It helps database application developers and database administrator optimize their queries by One Click .","title":"What is Paw Index Advisor?"},{"location":"pawindexadvisor/#features","text":"Combination of cost based and heuristic algorithm based Support MySQL and PostgreSQL and derivatives, such as Opengauss, Maria Support index recommendation covering matching, screening, sort-avoiding,covering De-duplicate with existing indexes Support query rewrites, sattc, view folding, and ordinal rewrite Client-based, non-invasion to production system Support what-if analysis , make sure indexes recommended be used in later query execution","title":"Features"},{"location":"pawindexadvisor/#get-started","text":"Start the JetBrains IDE(IntelliJ IDEA, CLion, PyCharm and etc), open the project Setting, select Plugins; Enter \"Paw Index Advisor\" in martketplace and click install Configure the running parameters of PawSQL Advisor on the Setting page Right click on the SQL file or folder to be analyzed, and click \"Run Index Advisor\" Wait for a minute and recommended indexes will be presented to you to accelerate your database queries. Claim: Paw Index Advisor is delivered as a beta version for free trial. You are welcomed to file bugs at https://pawsql.youtrack.cloud/newIssue .","title":"Get started"},{"location":"pawindexadvisor/change-log/","text":"Changelog \u00b6 0.1.109 _ August 15, 2022 \u00b6 Improve Paw DDL parser to support \"create if not exists\". For Postgres databases, explaining update statements is not supported, rewrite update statement to select during validation. For MySQL databases under version 5.6, explaining dml(delete/update/insert statements) are not supported, rewrite dml statements to select during validation. Add serverTimezone=UTC to connection url to fix timezone different issue. 0.1.108 _ August 10, 2022 \u00b6 Fix a bug when table/column references are quoted with \"`\". Support validation for MySQL with version under 8.0.12. 0.1.106 _ August 10, 2022 \u00b6 Initial beta release.","title":"Changelog"},{"location":"pawindexadvisor/change-log/#changelog","text":"","title":"Changelog"},{"location":"pawindexadvisor/change-log/#0.1.109","text":"Improve Paw DDL parser to support \"create if not exists\". For Postgres databases, explaining update statements is not supported, rewrite update statement to select during validation. For MySQL databases under version 5.6, explaining dml(delete/update/insert statements) are not supported, rewrite dml statements to select during validation. Add serverTimezone=UTC to connection url to fix timezone different issue.","title":"0.1.109 _ August 15, 2022"},{"location":"pawindexadvisor/change-log/#0.1.108","text":"Fix a bug when table/column references are quoted with \"`\". Support validation for MySQL with version under 8.0.12.","title":"0.1.108 _ August 10, 2022"},{"location":"pawindexadvisor/change-log/#0.1.106","text":"Initial beta release.","title":"0.1.106 _ August 10, 2022"},{"location":"pawindexadvisor/command-line/","text":"Command Line \u00b6 For database administrators, they can use Paw Index Advisor in a command line way, which gives the user more control how the tool behave, comparing with the plugin way. Prerequisites \u00b6 JRE 1.8 or above OS: Windows + Linux+Mac OS Command \u00b6 $ java -jar paw-indexadvisor.jar -c config/config.properties Configuration \u00b6 The input and parameters needed for Paw Index Advisor to work are defined in the configuration file config/config.properties . config.properties \u00b6 # The configuration file for index advisor # config the workload sqllab.querymode = offline sqllab.queryfolder = ./tpch/cases sqllab.mapperfolder = ./tpch/mappers # config the ddl sqllab.ddlmode = offline sqllab.ddlfolder = ./tpch/ddl/ sqllab.statsmode = offline sqllab.statsfolder = ./tpch/stats # server info for online retrieve dbobjects/stats and for what-if analysis sqllab.server.type = mysql sqllab.server.host = localhost sqllab.server.username = root sqllab.server.password = root sqllab.databaselist = tpch # config the output directory sqllab.resultfolder = ./tpch/out/index.sql # whether de-duplicate with existing indexes sqllab.ia.dedupflag = true # whether what-if validation sqllab.ia.validate = true","title":"Command Line"},{"location":"pawindexadvisor/command-line/#command-line","text":"For database administrators, they can use Paw Index Advisor in a command line way, which gives the user more control how the tool behave, comparing with the plugin way.","title":"Command Line"},{"location":"pawindexadvisor/command-line/#prerequisites","text":"JRE 1.8 or above OS: Windows + Linux+Mac OS","title":"Prerequisites"},{"location":"pawindexadvisor/command-line/#command","text":"$ java -jar paw-indexadvisor.jar -c config/config.properties","title":"Command"},{"location":"pawindexadvisor/command-line/#configuration","text":"The input and parameters needed for Paw Index Advisor to work are defined in the configuration file config/config.properties .","title":"Configuration"},{"location":"pawindexadvisor/command-line/#configproperties","text":"# The configuration file for index advisor # config the workload sqllab.querymode = offline sqllab.queryfolder = ./tpch/cases sqllab.mapperfolder = ./tpch/mappers # config the ddl sqllab.ddlmode = offline sqllab.ddlfolder = ./tpch/ddl/ sqllab.statsmode = offline sqllab.statsfolder = ./tpch/stats # server info for online retrieve dbobjects/stats and for what-if analysis sqllab.server.type = mysql sqllab.server.host = localhost sqllab.server.username = root sqllab.server.password = root sqllab.databaselist = tpch # config the output directory sqllab.resultfolder = ./tpch/out/index.sql # whether de-duplicate with existing indexes sqllab.ia.dedupflag = true # whether what-if validation sqllab.ia.validate = true","title":"config.properties"},{"location":"pawindexadvisor/configuration/","text":"Configuration \u00b6 You can configure and control the execution process on the Paw Index Advisor plugin Configuration page. Query Type Database Vendor Connection Info Deduplicate with existing indexes What-if analysis validation Query Type \u00b6 Specifies the type of input SQL statements. Paw Index Advisor currently supports two type of input SQL statements. SQL files If this option is selected, it means the inputs are native SQL files; The detailed syntax and corresponding index recommendations are described in detail in SQL syntax and Indexes . Map files If this option is selected, it means the inputs are Mybatis' mapper configuration file, Paw Index Advisor will parse those file and permutes all possible SQL combinations. Paw Index Advisor uses an intelligent engine to infer the data type of placeholders in a mapper file based on their context and assign them a valid constant, enabling it to produce legitimate SQL statements for subsequent query statement structure analysis. Mapper files as input is very important for application developers, because in the early stages of application development, developers can not fully grasp the input combination of the front-end, the SQL business that can be combined can not be determined, this option can ensure that for all combinations, the appropriate index recommendation can be made to improve performance. Due to some of the combined SQL statements will never appear in the real production enviroment, and some useless indexes are recommended based those combinition. Therefore, it is recommended to use the Paw Index Advisor again after the application is on production, or in the UAT testing stage, with the real SQL as input through the querylog. Database Vendor \u00b6 Specifies the database type on which the SQL optimization is performance. PawSQL currently supports three database types: MySQL PostgreSQL Opengauss Other databases based on the MySQL/PostgreSQL client protocol are theoretically supported, but have not been fully tested. Connection Info \u00b6 Database connection information serves two purposes: Obtain the database objects, including database tables, column definitions, and existing index information. Tip: The database objects are crucial to query optimization. PawSQL SQL Parser uses them to resolve the table names and column names refered in the SQL statements, and they will be use in following query rewrite optimization and index recommendation. Verify the the rewrite optimization and recommended indexes to ensure that the they can be selected in the actual SQL execution plan, thereby improving sql query performance. Database host \u00b6 Ip address or host name of the database server Database port \u00b6 Port of the connection to the database server User \u00b6 User name to connect to the database server Password \u00b6 The password of the user connecting to the database server DefaultDB \u00b6 The default database name when connecting to the database server Database/schema List \u00b6 For MySQL type of databases, it's a string of database names, like tpch, tpds For postgres/opengauss type databases, it's a string of schema names, like schema_a, schema_b Deduplicate with existing indexes \u00b6 If this option is checked and the candidate indexes is covered by existing indexes, those candidate indexes will NOT be considered in the final recommendation. Tip: This option should be checked when you are not considering dropping existing indexes. This is common because the input SQL statements are not representative of all the queries running against this database. Therefore, only consider adding new indexes that are helpful for input SQL statements. If you can ensure that the input SQL statements contains all the queries running against this database, you can keep only the recommended indexes, in which case you can uncheck this option and use the newly recommended index instead of the existing index. What-if analysis validation \u00b6 If this option is checked, Paw Index Advisor will do a what-if validation to ensure that the recommended indexes are selected in the actual SQL execution plan to avoid recommending useless indexes. Tip: Checking this option should be very careful under production enviroments. Because for those databases without built-in what-if (virtual indexes)capability (Neither MySQL or Postgres), Paw Index Advisor does the what-if validation by creating recommended indexes and performing explain commands to retrived execution plan for exclusive analysis, and then dropping the recommended indexes. This process consumes a certain amount of resources, and the execution time is relatively long, which may affect the business operation on the production servers.","title":"Configuration"},{"location":"pawindexadvisor/configuration/#configuration","text":"You can configure and control the execution process on the Paw Index Advisor plugin Configuration page. Query Type Database Vendor Connection Info Deduplicate with existing indexes What-if analysis validation","title":"Configuration"},{"location":"pawindexadvisor/configuration/#query-type","text":"Specifies the type of input SQL statements. Paw Index Advisor currently supports two type of input SQL statements. SQL files If this option is selected, it means the inputs are native SQL files; The detailed syntax and corresponding index recommendations are described in detail in SQL syntax and Indexes . Map files If this option is selected, it means the inputs are Mybatis' mapper configuration file, Paw Index Advisor will parse those file and permutes all possible SQL combinations. Paw Index Advisor uses an intelligent engine to infer the data type of placeholders in a mapper file based on their context and assign them a valid constant, enabling it to produce legitimate SQL statements for subsequent query statement structure analysis. Mapper files as input is very important for application developers, because in the early stages of application development, developers can not fully grasp the input combination of the front-end, the SQL business that can be combined can not be determined, this option can ensure that for all combinations, the appropriate index recommendation can be made to improve performance. Due to some of the combined SQL statements will never appear in the real production enviroment, and some useless indexes are recommended based those combinition. Therefore, it is recommended to use the Paw Index Advisor again after the application is on production, or in the UAT testing stage, with the real SQL as input through the querylog.","title":"Query Type"},{"location":"pawindexadvisor/configuration/#database-vendor","text":"Specifies the database type on which the SQL optimization is performance. PawSQL currently supports three database types: MySQL PostgreSQL Opengauss Other databases based on the MySQL/PostgreSQL client protocol are theoretically supported, but have not been fully tested.","title":"Database Vendor"},{"location":"pawindexadvisor/configuration/#connection-info","text":"Database connection information serves two purposes: Obtain the database objects, including database tables, column definitions, and existing index information. Tip: The database objects are crucial to query optimization. PawSQL SQL Parser uses them to resolve the table names and column names refered in the SQL statements, and they will be use in following query rewrite optimization and index recommendation. Verify the the rewrite optimization and recommended indexes to ensure that the they can be selected in the actual SQL execution plan, thereby improving sql query performance.","title":"Connection Info"},{"location":"pawindexadvisor/configuration/#database-host","text":"Ip address or host name of the database server","title":"Database host"},{"location":"pawindexadvisor/configuration/#database-port","text":"Port of the connection to the database server","title":"Database port"},{"location":"pawindexadvisor/configuration/#user","text":"User name to connect to the database server","title":"User"},{"location":"pawindexadvisor/configuration/#password","text":"The password of the user connecting to the database server","title":"Password"},{"location":"pawindexadvisor/configuration/#defaultdb","text":"The default database name when connecting to the database server","title":"DefaultDB"},{"location":"pawindexadvisor/configuration/#databaseschema-list","text":"For MySQL type of databases, it's a string of database names, like tpch, tpds For postgres/opengauss type databases, it's a string of schema names, like schema_a, schema_b","title":"Database/schema List"},{"location":"pawindexadvisor/configuration/#deduplicate-with-existing-indexes","text":"If this option is checked and the candidate indexes is covered by existing indexes, those candidate indexes will NOT be considered in the final recommendation. Tip: This option should be checked when you are not considering dropping existing indexes. This is common because the input SQL statements are not representative of all the queries running against this database. Therefore, only consider adding new indexes that are helpful for input SQL statements. If you can ensure that the input SQL statements contains all the queries running against this database, you can keep only the recommended indexes, in which case you can uncheck this option and use the newly recommended index instead of the existing index.","title":"Deduplicate with existing indexes"},{"location":"pawindexadvisor/configuration/#what-if-analysis-validation","text":"If this option is checked, Paw Index Advisor will do a what-if validation to ensure that the recommended indexes are selected in the actual SQL execution plan to avoid recommending useless indexes. Tip: Checking this option should be very careful under production enviroments. Because for those databases without built-in what-if (virtual indexes)capability (Neither MySQL or Postgres), Paw Index Advisor does the what-if validation by creating recommended indexes and performing explain commands to retrived execution plan for exclusive analysis, and then dropping the recommended indexes. This process consumes a certain amount of resources, and the execution time is relatively long, which may affect the business operation on the production servers.","title":"What-if analysis validation"},{"location":"pawindexadvisor/configuration2/","text":"Configuration \u00b6 You can configure the input, output and control the execution process either in config.properties file in the command line mode, or on the Configuration page when you are using the Paw Index Advisor plugin. Configure Db-objects \u00b6 The database objects are crucial to query optimization. PawSQL SQL Parser uses them to resolve the table names and column names in the SQL statements to be optimized, and they will be use in following query rewrite optimization and index recommendation. Command Line IntelliJ Plugin Property sqllab.ddlmode is used to define how and what database objects(relation table definitions and indexes definitions) are use for the Paw Index Advisor to execute against. If offline mode is set\uff0c sqllab.ddlfolder should be specified to define which directory should be look up within. sqllab.ddlmode = offline sqllab.ddlfolder = ./tpch/ddl/ If online mode is set\uff0c sqllab.server parameters should be specified, MySQL and PostgreSQL and derivatives, such as opengauss, maria are supported\u3002 sqllab.ddlmode = online sqllab.server.type = mysql sqllab.server.host = localhost sqllab.server.username = root sqllab.server.password = root sqllab.databaselist = tpch There is only the online option if your use Paw Index Advisor plugin, and you need to fill sql.server fields. Configure Queries \u00b6 The next step is to specify the input queries to optimize. Command Line IntelliJ Plugin Property sqllab.querymode is used to define how and what query statements to be analyzed and optimized. When offline mode is set\uff0c sqllab.queryfolder should be specified to define which directory should be looked within. sqllab.querymode = offline sqllab.queryfolder = ./tpch/cases When mapper mode is set\uff0c\uff0c sqllab.mapperfolder should be specified sqllab.querymode = mapper sqllab.mapperfolder = ./tpch/mappers If you are using Paw Index Advisor plugin, the input queries to optimize is the sql file you right clicked on or the sql files under the directory you right clicked on in the IDEA on which the Paw Index Advisor plugin is installed. Configure Output \u00b6 There are two result files generated, %paw_index.sql and %paw_index_what_if.txt . You can specify where they will be placed into. Command Line IntelliJ Plugin Property sqllab.resultfolder is used to specify which directory the recommended indexes will be placed into. And the validation details will be under the same directory with a name postfixed with what-if . sqllab.resultfolder = ./tpch/out/index.sql If you are using Paw Index Advisor plugin, you needn't specify the output directory. If you analyze a sql file named filename.sql , the output files will be filename_paw_index.sql and filename_paw_index_what_if.txt under the same directory. If you analyze sql files under a directory directoryname , the output files will be paw_index.sql and paw_index_what_if.txt under the directory directoryname . Configure Execution \u00b6 You can control the execution process by configure execution parameters. De-duplicate with existing indexes \u00b6 If this parameter is set to true, the Paw Index Advisor will de-duplicate the candidate indexes with existing indexes. The process will adhere to the leftmost matching rule. Command Line IntelliJ Plugin sqllab.ia.dedupflag = true Check the check-box in the Index Advisor Configuration page. What-if validation \u00b6 If this parameter is set to true, the database connection information must be set correctly. The Paw Index Advisor will do an extra what-if validation phase against database and only indexes which contribute the performance improvement will be recommended. Command Line IntelliJ Plugin sqllab.ia.validate = true Check the check-box in the Index Advisor Configuration page.","title":"Configuration"},{"location":"pawindexadvisor/configuration2/#configuration","text":"You can configure the input, output and control the execution process either in config.properties file in the command line mode, or on the Configuration page when you are using the Paw Index Advisor plugin.","title":"Configuration"},{"location":"pawindexadvisor/configuration2/#configure-db-objects","text":"The database objects are crucial to query optimization. PawSQL SQL Parser uses them to resolve the table names and column names in the SQL statements to be optimized, and they will be use in following query rewrite optimization and index recommendation. Command Line IntelliJ Plugin Property sqllab.ddlmode is used to define how and what database objects(relation table definitions and indexes definitions) are use for the Paw Index Advisor to execute against. If offline mode is set\uff0c sqllab.ddlfolder should be specified to define which directory should be look up within. sqllab.ddlmode = offline sqllab.ddlfolder = ./tpch/ddl/ If online mode is set\uff0c sqllab.server parameters should be specified, MySQL and PostgreSQL and derivatives, such as opengauss, maria are supported\u3002 sqllab.ddlmode = online sqllab.server.type = mysql sqllab.server.host = localhost sqllab.server.username = root sqllab.server.password = root sqllab.databaselist = tpch There is only the online option if your use Paw Index Advisor plugin, and you need to fill sql.server fields.","title":"Configure Db-objects"},{"location":"pawindexadvisor/configuration2/#configure-queries","text":"The next step is to specify the input queries to optimize. Command Line IntelliJ Plugin Property sqllab.querymode is used to define how and what query statements to be analyzed and optimized. When offline mode is set\uff0c sqllab.queryfolder should be specified to define which directory should be looked within. sqllab.querymode = offline sqllab.queryfolder = ./tpch/cases When mapper mode is set\uff0c\uff0c sqllab.mapperfolder should be specified sqllab.querymode = mapper sqllab.mapperfolder = ./tpch/mappers If you are using Paw Index Advisor plugin, the input queries to optimize is the sql file you right clicked on or the sql files under the directory you right clicked on in the IDEA on which the Paw Index Advisor plugin is installed.","title":"Configure Queries"},{"location":"pawindexadvisor/configuration2/#configure-output","text":"There are two result files generated, %paw_index.sql and %paw_index_what_if.txt . You can specify where they will be placed into. Command Line IntelliJ Plugin Property sqllab.resultfolder is used to specify which directory the recommended indexes will be placed into. And the validation details will be under the same directory with a name postfixed with what-if . sqllab.resultfolder = ./tpch/out/index.sql If you are using Paw Index Advisor plugin, you needn't specify the output directory. If you analyze a sql file named filename.sql , the output files will be filename_paw_index.sql and filename_paw_index_what_if.txt under the same directory. If you analyze sql files under a directory directoryname , the output files will be paw_index.sql and paw_index_what_if.txt under the directory directoryname .","title":"Configure Output"},{"location":"pawindexadvisor/configuration2/#configure-execution","text":"You can control the execution process by configure execution parameters.","title":"Configure Execution"},{"location":"pawindexadvisor/configuration2/#de-duplicate-with-existing-indexes","text":"If this parameter is set to true, the Paw Index Advisor will de-duplicate the candidate indexes with existing indexes. The process will adhere to the leftmost matching rule. Command Line IntelliJ Plugin sqllab.ia.dedupflag = true Check the check-box in the Index Advisor Configuration page.","title":"De-duplicate with existing indexes"},{"location":"pawindexadvisor/configuration2/#what-if-validation","text":"If this parameter is set to true, the database connection information must be set correctly. The Paw Index Advisor will do an extra what-if validation phase against database and only indexes which contribute the performance improvement will be recommended. Command Line IntelliJ Plugin sqllab.ia.validate = true Check the check-box in the Index Advisor Configuration page.","title":"What-if validation"},{"location":"pawindexadvisor/eula/","text":"End-User License Agreement (EULA) of Paw Index Advisor \u00b6 This EULA agreement governs your acquisition and use of our Paw Index Advisor software (\"Software\") directly from Paw SQL or indirectly through a Paw SQL authorized reseller or distributor (a \"Reseller\"). Please read this EULA agreement carefully before completing the installation process and using the Paw Index Advisor software. It provides a license to use the Paw Index Advisor software and contains warranty information and liability disclaimers. If you register for a free trial of the Paw Index Advisor software, this EULA agreement will also govern that trial. By clicking \"accept\" or installing and/or using the Paw Index Advisor software, you are confirming your acceptance of the Software and agreeing to become bound by the terms of this EULA agreement. If you are entering into this EULA agreement on behalf of a company or other legal entity, you represent that you have the authority to bind such entity and its affiliates to these terms and conditions. If you do not have such authority or if you do not agree with the terms and conditions of this EULA agreement, do not install or use the Software, and you must not accept this EULA agreement. This EULA agreement shall apply only to the Software supplied by Paw SQL herewith regardless of whether other software is referred to or described herein. The terms also apply to any Paw SQL updates, supplements, Internet-based services, and support services for the Software, unless other terms accompany those items on delivery. If so, those terms apply. License Grant \u00b6 Paw SQL hereby grants you a personal, non-transferable, non-exclusive licence to use the Paw Index Advisor software on your devices in accordance with the terms of this EULA agreement. You are permitted to load the Paw Index Advisor software (for example a PC, laptop, mobile or tablet) under your control. You are responsible for ensuring your device meets the minimum requirements of the Paw Index Advisor software. You are not permitted to: Edit, alter, modify, adapt, translate or otherwise change the whole or any part of the Software nor permit the whole or any part of the Software to be combined with or become incorporated in any other software, nor decompile, disassemble or reverse engineer the Software or attempt to do any such things Reproduce, copy, distribute, resell or otherwise use the Software for any commercial purpose Allow any third party to use the Software on behalf of or for the benefit of any third party Use the Software in any way which breaches any applicable local, national or international law use the Software for any purpose that Paw SQL considers is a breach of this EULA agreement Intellectual Property and Ownership \u00b6 Paw SQL shall at all times retain ownership of the Software as originally downloaded by you and all subsequent downloads of the Software by you. The Software (and the copyright, and other intellectual property rights of whatever nature in the Software, including any modifications made thereto) are and shall remain the property of Paw SQL. Paw SQL reserves the right to grant licences to use the Software to third parties. Termination \u00b6 This EULA agreement is effective from the date you first use the Software and shall continue until terminated. You may terminate it at any time upon written notice to Paw SQL. Governing Law \u00b6 This EULA agreement, and any dispute arising out of or in connection with this EULA agreement, shall be governed by and construed in accordance with the laws of China, USA and other countries.","title":"End-User License Agreement (EULA) of Paw Index Advisor"},{"location":"pawindexadvisor/eula/#end-user-license-agreement-eula-of-paw-index-advisor","text":"This EULA agreement governs your acquisition and use of our Paw Index Advisor software (\"Software\") directly from Paw SQL or indirectly through a Paw SQL authorized reseller or distributor (a \"Reseller\"). Please read this EULA agreement carefully before completing the installation process and using the Paw Index Advisor software. It provides a license to use the Paw Index Advisor software and contains warranty information and liability disclaimers. If you register for a free trial of the Paw Index Advisor software, this EULA agreement will also govern that trial. By clicking \"accept\" or installing and/or using the Paw Index Advisor software, you are confirming your acceptance of the Software and agreeing to become bound by the terms of this EULA agreement. If you are entering into this EULA agreement on behalf of a company or other legal entity, you represent that you have the authority to bind such entity and its affiliates to these terms and conditions. If you do not have such authority or if you do not agree with the terms and conditions of this EULA agreement, do not install or use the Software, and you must not accept this EULA agreement. This EULA agreement shall apply only to the Software supplied by Paw SQL herewith regardless of whether other software is referred to or described herein. The terms also apply to any Paw SQL updates, supplements, Internet-based services, and support services for the Software, unless other terms accompany those items on delivery. If so, those terms apply.","title":"End-User License Agreement (EULA) of Paw Index Advisor"},{"location":"pawindexadvisor/eula/#license-grant","text":"Paw SQL hereby grants you a personal, non-transferable, non-exclusive licence to use the Paw Index Advisor software on your devices in accordance with the terms of this EULA agreement. You are permitted to load the Paw Index Advisor software (for example a PC, laptop, mobile or tablet) under your control. You are responsible for ensuring your device meets the minimum requirements of the Paw Index Advisor software. You are not permitted to: Edit, alter, modify, adapt, translate or otherwise change the whole or any part of the Software nor permit the whole or any part of the Software to be combined with or become incorporated in any other software, nor decompile, disassemble or reverse engineer the Software or attempt to do any such things Reproduce, copy, distribute, resell or otherwise use the Software for any commercial purpose Allow any third party to use the Software on behalf of or for the benefit of any third party Use the Software in any way which breaches any applicable local, national or international law use the Software for any purpose that Paw SQL considers is a breach of this EULA agreement","title":"License Grant"},{"location":"pawindexadvisor/eula/#intellectual-property-and-ownership","text":"Paw SQL shall at all times retain ownership of the Software as originally downloaded by you and all subsequent downloads of the Software by you. The Software (and the copyright, and other intellectual property rights of whatever nature in the Software, including any modifications made thereto) are and shall remain the property of Paw SQL. Paw SQL reserves the right to grant licences to use the Software to third parties.","title":"Intellectual Property and Ownership"},{"location":"pawindexadvisor/eula/#termination","text":"This EULA agreement is effective from the date you first use the Software and shall continue until terminated. You may terminate it at any time upon written notice to Paw SQL.","title":"Termination"},{"location":"pawindexadvisor/eula/#governing-law","text":"This EULA agreement, and any dispute arising out of or in connection with this EULA agreement, shall be governed by and construed in accordance with the laws of China, USA and other countries.","title":"Governing Law"},{"location":"pawindexadvisor/intellij-plugin/","text":"IntelliJ Plugin \u00b6 Paw Index Advisor is integrated into most popular IDEs, such as IntelliJ IDEA , PhpStorm, PyCharm , WebStorm and Eclipse, Spring Tool Suite. For application developers, they can optimize the application performance by One Click . Steps: Install a compatible JetBrains IDE, such as IntelliJ IDEA, CLion, PyCharm, or other IntelliJ-based IDEs. Launch the IDE and open plugin settings Search for \"Paw Index Advisor\" in martketplace and click install Configure the query type and database information on the configuration page Right click any folder which contains the sql statments/mybatis xml files, and click \"Run Index Advisor\" Wait for a minute and indexes are recommended to accelerate your database queries. Installation \u00b6 Method 1: Search for \"Paw Index Advisor\" in marketplace and click install( Prefer ). Method 2: you can visit the \"Paw Index Advisor\" plugin page at https://plugins.jetbrains.com/plugin/19003-paw-index-advisor , and install it from that page or download the plugin and install it from disk later. Configuration \u00b6 Configure the input and execution parameters in the Project Setting panel. See details at Configure the Index Advisor Run by One Click \u00b6 Right click on a SQL/mybatis xml file or any folder which contains the sql statements/mybatis xml files, and click \"Run Index Advisor\". You can see the analysis is started on the PawSQL console. Get recommendation \u00b6 After the analysis is done, the recommendation result file named paw_index.sql is opened for you, and you can also find the validation details in the paw_index_what-if.txt file. You can decided whether to apply those recommendation according to the validation details of queries. You can find the details about how to interpret the output at Explain the Output .","title":"IntelliJ Plugin"},{"location":"pawindexadvisor/intellij-plugin/#intellij-plugin","text":"Paw Index Advisor is integrated into most popular IDEs, such as IntelliJ IDEA , PhpStorm, PyCharm , WebStorm and Eclipse, Spring Tool Suite. For application developers, they can optimize the application performance by One Click . Steps: Install a compatible JetBrains IDE, such as IntelliJ IDEA, CLion, PyCharm, or other IntelliJ-based IDEs. Launch the IDE and open plugin settings Search for \"Paw Index Advisor\" in martketplace and click install Configure the query type and database information on the configuration page Right click any folder which contains the sql statments/mybatis xml files, and click \"Run Index Advisor\" Wait for a minute and indexes are recommended to accelerate your database queries.","title":"IntelliJ Plugin"},{"location":"pawindexadvisor/intellij-plugin/#installation","text":"Method 1: Search for \"Paw Index Advisor\" in marketplace and click install( Prefer ). Method 2: you can visit the \"Paw Index Advisor\" plugin page at https://plugins.jetbrains.com/plugin/19003-paw-index-advisor , and install it from that page or download the plugin and install it from disk later.","title":"Installation"},{"location":"pawindexadvisor/intellij-plugin/#configuration","text":"Configure the input and execution parameters in the Project Setting panel. See details at Configure the Index Advisor","title":"Configuration"},{"location":"pawindexadvisor/intellij-plugin/#run-by-one-click","text":"Right click on a SQL/mybatis xml file or any folder which contains the sql statements/mybatis xml files, and click \"Run Index Advisor\". You can see the analysis is started on the PawSQL console.","title":"Run by One Click"},{"location":"pawindexadvisor/intellij-plugin/#get-recommendation","text":"After the analysis is done, the recommendation result file named paw_index.sql is opened for you, and you can also find the validation details in the paw_index_what-if.txt file. You can decided whether to apply those recommendation according to the validation details of queries. You can find the details about how to interpret the output at Explain the Output .","title":"Get recommendation"},{"location":"pawindexadvisor/recommended-indexes/","text":"Indexes Recommended \u00b6 After the recommending indexes process is done, there will be two result files generated in the directory of optimized input queries, one is the summary file paw_index.sql and the other is the validation details file paw_index_what_if.txt , outlined as follows: . \u2514\u2500 file1.sql \u2514\u2500 file2.sql \u2514\u2500 paw_index.sql \u2514\u2500 paw_index_what_if.txt Recommendation Summary \u00b6 The summary file paw_index.sql contains following three section of inforamtion Existing Indexes \u00b6 This section contains the existing indexes of tables referenced in the input SQL queries. Those tables may not used in the query execution and can be dropped later. -- Existing indexes CREATE INDEX CUSTOMER_C_NATIONKEY_FKEY ON CUSTOMER ( C_NATIONKEY ); CREATE INDEX CUSTOMER_PKEY ON CUSTOMER ( C_CUSTKEY ); CREATE INDEX MYINDEX ON CUSTOMER ( C_NAME , C_PHONE ); CREATE INDEX LINEITEM_L_ORDERKEY_FKEY ON LINEITEM ( L_ORDERKEY ); CREATE INDEX LINEITEM_L_PARTKEY_L_SUPPKEY_FKEY ON LINEITEM ( L_SUPPKEY , L_PARTKEY ); CREATE INDEX LINEITEM_PKEY ON LINEITEM ( L_ORDERKEY , L_LINENUMBER ); CREATE INDEX NATION_N_REGIONKEY_FKEY ON NATION ( N_REGIONKEY ); CREATE INDEX NATION_PKEY ON NATION ( N_NATIONKEY ); CREATE INDEX ORDERS_O_CUSTKEY_FKEY ON ORDERS ( O_CUSTKEY ); CREATE INDEX ORDERS_PKEY ON ORDERS ( O_ORDERKEY ); CREATE INDEX PART_PKEY ON PART ( P_PARTKEY ); CREATE INDEX PARTSUPP_PKEY ON PARTSUPP ( PS_SUPPKEY , PS_PARTKEY ); CREATE INDEX PARTSUPP_PS_PARTKEY_FKEY ON PARTSUPP ( PS_PARTKEY ); CREATE INDEX PARTSUPP_PS_SUPPKEY_FKEY ON PARTSUPP ( PS_SUPPKEY ); CREATE INDEX REGION_PKEY ON REGION ( R_REGIONKEY ); CREATE INDEX SUPPLIER_PKEY ON SUPPLIER ( S_SUPPKEY ); CREATE INDEX SUPPLIER_S_NATIONKEY_FKEY ON SUPPLIER ( S_NATIONKEY ); Indexes Recommended (before validation) \u00b6 This section contains the list of candidate indexes before the what-if validation. If the Deduplicate with existing indexes is checked, those indexes are de-duplicated with existing Index 1 ; otherwise those candidate indexes only de-duplicate with themselves. -- Recommended indexes (After deduplication with existing indexes above) CREATE INDEX PAW_IDX1496549982 ON NATION ( N_NATIONKEY , N_NAME ); CREATE INDEX PAW_IDX1049412868 ON NATION ( N_NAME , N_NATIONKEY , N_REGIONKEY ); CREATE INDEX PAW_IDX1640274034 ON NATION ( N_NATIONKEY , N_REGIONKEY , N_NAME ); CREATE INDEX PAW_IDX1968327707 ON PARTSUPP ( PS_SUPPKEY , PS_PARTKEY , PS_SUPPLYCOST ); CREATE INDEX PAW_IDX1794855777 ON PARTSUPP ( PS_SUPPLYCOST , PS_SUPPKEY , PS_PARTKEY ); CREATE INDEX PAW_IDX1797601124 ON PARTSUPP ( PS_PARTKEY , PS_SUPPKEY , PS_SUPPLYCOST , PS_AVAILQTY ); CREATE INDEX PAW_IDX1400713053 ON PARTSUPP ( PS_SUPPKEY , PS_SUPPLYCOST , PS_AVAILQTY , PS_PARTKEY ); CREATE INDEX PAW_IDX0949237515 ON PART ( P_PARTKEY , P_TYPE ); CREATE INDEX PAW_IDX0306025125 ON PART ( P_NAME , P_PARTKEY ); CREATE INDEX PAW_IDX1038398061 ON PART ( P_PARTKEY , P_NAME ); ... Indexes Recommended (after validation) \u00b6 If the What-if analysis validation is checked, those indexes which are verified to gain performance improvement will be listed in this section. Otherwise, this section will be empty. -- After what-if analaysis validation CREATE INDEX PAW_IDX1640274034 ON NATION ( N_NATIONKEY , N_REGIONKEY , N_NAME ); CREATE INDEX PAW_IDX1120442220 ON LINEITEM ( L_RETURNFLAG , L_ORDERKEY , L_DISCOUNT , L_EXTENDEDPRICE ); CREATE INDEX PAW_IDX1003493942 ON SUPPLIER ( S_NATIONKEY , S_SUPPKEY , S_NAME , S_ADDRESS ); CREATE INDEX PAW_IDX1852359742 ON ORDERS ( O_ORDERDATE , O_ORDERKEY , O_CUSTKEY , O_SHIPPRIORITY ); CREATE INDEX PAW_IDX1285498835 ON LINEITEM ( L_PARTKEY , L_SUPPKEY , L_SHIPDATE , L_QUANTITY ); CREATE INDEX PAW_IDX1728355301 ON LINEITEM ( L_SUPPKEY , L_ORDERKEY , L_DISCOUNT , L_EXTENDEDPRICE ); CREATE INDEX PAW_IDX1716298676 ON LINEITEM ( L_ORDERKEY , L_QUANTITY ); CREATE INDEX PAW_IDX0711368375 ON PART ( P_TYPE , P_PARTKEY ); CREATE INDEX PAW_IDX0538538531 ON LINEITEM ( L_ORDERKEY , L_SUPPKEY ); CREATE INDEX PAW_IDX0607681583 ON LINEITEM ( L_PARTKEY , L_QUANTITY , L_EXTENDEDPRICE ); CREATE INDEX PAW_IDX1797601124 ON PARTSUPP ( PS_PARTKEY , PS_SUPPKEY , PS_SUPPLYCOST , PS_AVAILQTY ); CREATE INDEX PAW_IDX0949237515 ON PART ( P_PARTKEY , P_TYPE ); CREATE INDEX PAW_IDX0394351801 ON LINEITEM ( L_ORDERKEY , L_SHIPDATE , L_DISCOUNT , L_EXTENDEDPRICE ); ... The de-duplication alogrithm is adhere to left-most prefix principle. \u21a9","title":"Indexes Recommended"},{"location":"pawindexadvisor/recommended-indexes/#indexes-recommended","text":"After the recommending indexes process is done, there will be two result files generated in the directory of optimized input queries, one is the summary file paw_index.sql and the other is the validation details file paw_index_what_if.txt , outlined as follows: . \u2514\u2500 file1.sql \u2514\u2500 file2.sql \u2514\u2500 paw_index.sql \u2514\u2500 paw_index_what_if.txt","title":"Indexes Recommended"},{"location":"pawindexadvisor/recommended-indexes/#recommendation-summary","text":"The summary file paw_index.sql contains following three section of inforamtion","title":"Recommendation Summary"},{"location":"pawindexadvisor/recommended-indexes/#existing-indexes","text":"This section contains the existing indexes of tables referenced in the input SQL queries. Those tables may not used in the query execution and can be dropped later. -- Existing indexes CREATE INDEX CUSTOMER_C_NATIONKEY_FKEY ON CUSTOMER ( C_NATIONKEY ); CREATE INDEX CUSTOMER_PKEY ON CUSTOMER ( C_CUSTKEY ); CREATE INDEX MYINDEX ON CUSTOMER ( C_NAME , C_PHONE ); CREATE INDEX LINEITEM_L_ORDERKEY_FKEY ON LINEITEM ( L_ORDERKEY ); CREATE INDEX LINEITEM_L_PARTKEY_L_SUPPKEY_FKEY ON LINEITEM ( L_SUPPKEY , L_PARTKEY ); CREATE INDEX LINEITEM_PKEY ON LINEITEM ( L_ORDERKEY , L_LINENUMBER ); CREATE INDEX NATION_N_REGIONKEY_FKEY ON NATION ( N_REGIONKEY ); CREATE INDEX NATION_PKEY ON NATION ( N_NATIONKEY ); CREATE INDEX ORDERS_O_CUSTKEY_FKEY ON ORDERS ( O_CUSTKEY ); CREATE INDEX ORDERS_PKEY ON ORDERS ( O_ORDERKEY ); CREATE INDEX PART_PKEY ON PART ( P_PARTKEY ); CREATE INDEX PARTSUPP_PKEY ON PARTSUPP ( PS_SUPPKEY , PS_PARTKEY ); CREATE INDEX PARTSUPP_PS_PARTKEY_FKEY ON PARTSUPP ( PS_PARTKEY ); CREATE INDEX PARTSUPP_PS_SUPPKEY_FKEY ON PARTSUPP ( PS_SUPPKEY ); CREATE INDEX REGION_PKEY ON REGION ( R_REGIONKEY ); CREATE INDEX SUPPLIER_PKEY ON SUPPLIER ( S_SUPPKEY ); CREATE INDEX SUPPLIER_S_NATIONKEY_FKEY ON SUPPLIER ( S_NATIONKEY );","title":"Existing Indexes"},{"location":"pawindexadvisor/recommended-indexes/#indexes-recommended-before-validation","text":"This section contains the list of candidate indexes before the what-if validation. If the Deduplicate with existing indexes is checked, those indexes are de-duplicated with existing Index 1 ; otherwise those candidate indexes only de-duplicate with themselves. -- Recommended indexes (After deduplication with existing indexes above) CREATE INDEX PAW_IDX1496549982 ON NATION ( N_NATIONKEY , N_NAME ); CREATE INDEX PAW_IDX1049412868 ON NATION ( N_NAME , N_NATIONKEY , N_REGIONKEY ); CREATE INDEX PAW_IDX1640274034 ON NATION ( N_NATIONKEY , N_REGIONKEY , N_NAME ); CREATE INDEX PAW_IDX1968327707 ON PARTSUPP ( PS_SUPPKEY , PS_PARTKEY , PS_SUPPLYCOST ); CREATE INDEX PAW_IDX1794855777 ON PARTSUPP ( PS_SUPPLYCOST , PS_SUPPKEY , PS_PARTKEY ); CREATE INDEX PAW_IDX1797601124 ON PARTSUPP ( PS_PARTKEY , PS_SUPPKEY , PS_SUPPLYCOST , PS_AVAILQTY ); CREATE INDEX PAW_IDX1400713053 ON PARTSUPP ( PS_SUPPKEY , PS_SUPPLYCOST , PS_AVAILQTY , PS_PARTKEY ); CREATE INDEX PAW_IDX0949237515 ON PART ( P_PARTKEY , P_TYPE ); CREATE INDEX PAW_IDX0306025125 ON PART ( P_NAME , P_PARTKEY ); CREATE INDEX PAW_IDX1038398061 ON PART ( P_PARTKEY , P_NAME ); ...","title":"Indexes Recommended (before validation)"},{"location":"pawindexadvisor/recommended-indexes/#indexes-recommended-after-validation","text":"If the What-if analysis validation is checked, those indexes which are verified to gain performance improvement will be listed in this section. Otherwise, this section will be empty. -- After what-if analaysis validation CREATE INDEX PAW_IDX1640274034 ON NATION ( N_NATIONKEY , N_REGIONKEY , N_NAME ); CREATE INDEX PAW_IDX1120442220 ON LINEITEM ( L_RETURNFLAG , L_ORDERKEY , L_DISCOUNT , L_EXTENDEDPRICE ); CREATE INDEX PAW_IDX1003493942 ON SUPPLIER ( S_NATIONKEY , S_SUPPKEY , S_NAME , S_ADDRESS ); CREATE INDEX PAW_IDX1852359742 ON ORDERS ( O_ORDERDATE , O_ORDERKEY , O_CUSTKEY , O_SHIPPRIORITY ); CREATE INDEX PAW_IDX1285498835 ON LINEITEM ( L_PARTKEY , L_SUPPKEY , L_SHIPDATE , L_QUANTITY ); CREATE INDEX PAW_IDX1728355301 ON LINEITEM ( L_SUPPKEY , L_ORDERKEY , L_DISCOUNT , L_EXTENDEDPRICE ); CREATE INDEX PAW_IDX1716298676 ON LINEITEM ( L_ORDERKEY , L_QUANTITY ); CREATE INDEX PAW_IDX0711368375 ON PART ( P_TYPE , P_PARTKEY ); CREATE INDEX PAW_IDX0538538531 ON LINEITEM ( L_ORDERKEY , L_SUPPKEY ); CREATE INDEX PAW_IDX0607681583 ON LINEITEM ( L_PARTKEY , L_QUANTITY , L_EXTENDEDPRICE ); CREATE INDEX PAW_IDX1797601124 ON PARTSUPP ( PS_PARTKEY , PS_SUPPKEY , PS_SUPPLYCOST , PS_AVAILQTY ); CREATE INDEX PAW_IDX0949237515 ON PART ( P_PARTKEY , P_TYPE ); CREATE INDEX PAW_IDX0394351801 ON LINEITEM ( L_ORDERKEY , L_SHIPDATE , L_DISCOUNT , L_EXTENDEDPRICE ); ... The de-duplication alogrithm is adhere to left-most prefix principle. \u21a9","title":"Indexes Recommended (after validation)"},{"location":"pawindexadvisor/what-if-validation/","text":"What-if Validation \u00b6 The other result file is the %paw_index_what_if.txt which explains how recommended indexes helps the analyzed queries. This result file is generated only when the What-if analysis validation option is enabled. This file contains a list of query's validation information. For each query, it reveals following information. Query ID \u00b6 The identification of the input query. It is a combinnation of input SQL file name and a \" stmt \" + ordinal of the SQL statement in the input SQL file. So the \" 17.sql-stmt1 \" means the first SQL statement in 17.sql file. - 17.sql-stmt1 -- query id Query Text \u00b6 The original query text which is analyzed and optimized to improve its performance. SELECT SUM ( L_EXTENDEDPRICE ) / 7 . 0 AS AVG_YEARLY FROM LINEITEM , PART WHERE P_PARTKEY = L_PARTKEY AND P_BRAND = 'BRAND#44' AND P_CONTAINER = 'WRAP PKG' AND L_QUANTITY < ( SELECT 0 . 2 * AVG ( L_QUANTITY ) FROM LINEITEM WHERE L_PARTKEY = P_PARTKEY ); Performance Improvement \u00b6 The performance improvement(pi) of the query named query id . The performance improvement is calculate according to the cost before and after recommended indexes virtually applied[^2]. - performance improves by 4318.41%[cost_before=583.23,after_cost=13.2] The calculation formula for pi is pi = (cost_before - cost_after) / cost_after Cost Before \u00b6 The query cost before the recommended indexes are applied. Cost After \u00b6 The query cost after the recommended indexes are applied. Contributing Indexes \u00b6 The indexes contribute to the query execution, including the existing indexes and recommended indexes. - Contributing indice:[PAW_IDX1352615704, PAW_IDX0607681583, PAW_IDX1285498835] -- the indexes used paw_index_what-if.txt \u00b6 /****************************************************************\\ * * * Recommended Index Validation Details * * * * Powered by PawSQL(2022 - ) * * * \\****************************************************************/ -- Recommended indexes CREATE INDEX PAW_IDX1640274034 ON NATION ( N_NATIONKEY , N_REGIONKEY , N_NAME ); CREATE INDEX PAW_IDX1120442220 ON LINEITEM ( L_RETURNFLAG , L_ORDERKEY , L_DISCOUNT , L_EXTENDEDPRICE ); CREATE INDEX PAW_IDX1003493942 ON SUPPLIER ( S_NATIONKEY , S_SUPPKEY , S_NAME , S_ADDRESS ); CREATE INDEX PAW_IDX1852359742 ON ORDERS ( O_ORDERDATE , O_ORDERKEY , O_CUSTKEY , O_SHIPPRIORITY ); CREATE INDEX PAW_IDX1285498835 ON LINEITEM ( L_PARTKEY , L_SUPPKEY , L_SHIPDATE , L_QUANTITY ); CREATE INDEX PAW_IDX1728355301 ON LINEITEM ( L_SUPPKEY , L_ORDERKEY , L_DISCOUNT , L_EXTENDEDPRICE ); CREATE INDEX PAW_IDX1716298676 ON LINEITEM ( L_ORDERKEY , L_QUANTITY ); CREATE INDEX PAW_IDX0711368375 ON PART ( P_TYPE , P_PARTKEY ); ... -- Validation details -- 17.sql1, performance improves by 4318.41%[cost_before=583.23,after_cost=13.2] Contributing indice :[ PAW_IDX1352615704 , PAW_IDX0607681583 , PAW_IDX1285498835 ] SELECT SUM ( L_EXTENDEDPRICE ) / 7 . 0 AS AVG_YEARLY FROM LINEITEM , PART WHERE P_PARTKEY = L_PARTKEY AND P_BRAND = 'BRAND#44' AND P_CONTAINER = 'WRAP PKG' AND L_QUANTITY < ( SELECT 0 . 2 * AVG ( L_QUANTITY ) FROM LINEITEM WHERE L_PARTKEY = P_PARTKEY ); -- 21.sql1, performance improves by 1173.2289478709183%[cost_before=1333.58,after_cost=104.74] Contributing indice :[ PAW_IDX1621082330 , PAW_IDX1003493942 , PAW_IDX1416165687 , IDX_LINEITEM_ORDERKEY , PAW_IDX0538538531 ] SELECT S_NAME , COUNT ( * ) AS NUMWAIT FROM SUPPLIER , LINEITEM L1 , ORDERS , NATION WHERE S_SUPPKEY = L1 . L_SUPPKEY AND O_ORDERKEY = L1 . L_ORDERKEY AND O_ORDERSTATUS = 'F' AND L1 . L_RECEIPTDATE > L1 . L_COMMITDATE AND EXISTS ( SELECT * FROM LINEITEM L2 WHERE L2 . L_ORDERKEY = L1 . L_ORDERKEY AND L2 . L_SUPPKEY <> L1 . L_SUPPKEY ) AND NOT EXISTS ( SELECT * FROM LINEITEM L3 WHERE L3 . L_ORDERKEY = L1 . L_ORDERKEY AND L3 . L_SUPPKEY <> L1 . L_SUPPKEY AND L3 . L_RECEIPTDATE > L3 . L_COMMITDATE ) AND S_NATIONKEY = N_NATIONKEY AND N_NAME = 'EGYPT' GROUP BY S_NAME ORDER BY NUMWAIT DESC , S_NAME LIMIT 100 ; -- 7.sql1, performance improves by 3877.8084714548804%[cost_before=863.98,after_cost=21.72] Contributing indice :[ PAW_IDX1264424863 , PAW_IDX1409884827 , PAW_IDX1017563074 , CUSTOMER_PKEY , PAW_IDX1640274034 , PAW_IDX1640274034 ] SELECT SUPP_NATION , CUST_NATION , L_YEAR , SUM ( VOLUME ) AS REVENUE FROM ( SELECT N1 . N_NAME AS SUPP_NATION , N2 . N_NAME AS CUST_NATION , EXTRACT ( YEAR FROM L_SHIPDATE ) AS L_YEAR , L_EXTENDEDPRICE * ( 1 - L_DISCOUNT ) AS VOLUME FROM SUPPLIER , LINEITEM , ORDERS , CUSTOMER , NATION N1 , NATION N2 WHERE S_SUPPKEY = L_SUPPKEY AND O_ORDERKEY = L_ORDERKEY AND C_CUSTKEY = O_CUSTKEY AND S_NATIONKEY = N1 . N_NATIONKEY AND C_NATIONKEY = N2 . N_NATIONKEY AND ( ( N1 . N_NAME = 'JAPAN' AND N2 . N_NAME = 'INDIA' ) OR ( N1 . N_NAME = 'INDIA' AND N2 . N_NAME = 'JAPAN' ) ) AND L_SHIPDATE BETWEEN DATE '1995-01-01' AND DATE '1996-12-31' ) AS SHIPPING GROUP BY SUPP_NATION , CUST_NATION , L_YEAR ORDER BY SUPP_NATION , CUST_NATION , L_YEAR ; ...","title":"What-if Validation"},{"location":"pawindexadvisor/what-if-validation/#what-if-validation","text":"The other result file is the %paw_index_what_if.txt which explains how recommended indexes helps the analyzed queries. This result file is generated only when the What-if analysis validation option is enabled. This file contains a list of query's validation information. For each query, it reveals following information.","title":"What-if Validation"},{"location":"pawindexadvisor/what-if-validation/#query-id","text":"The identification of the input query. It is a combinnation of input SQL file name and a \" stmt \" + ordinal of the SQL statement in the input SQL file. So the \" 17.sql-stmt1 \" means the first SQL statement in 17.sql file. - 17.sql-stmt1 -- query id","title":"Query ID"},{"location":"pawindexadvisor/what-if-validation/#query-text","text":"The original query text which is analyzed and optimized to improve its performance. SELECT SUM ( L_EXTENDEDPRICE ) / 7 . 0 AS AVG_YEARLY FROM LINEITEM , PART WHERE P_PARTKEY = L_PARTKEY AND P_BRAND = 'BRAND#44' AND P_CONTAINER = 'WRAP PKG' AND L_QUANTITY < ( SELECT 0 . 2 * AVG ( L_QUANTITY ) FROM LINEITEM WHERE L_PARTKEY = P_PARTKEY );","title":"Query Text"},{"location":"pawindexadvisor/what-if-validation/#performance-improvement","text":"The performance improvement(pi) of the query named query id . The performance improvement is calculate according to the cost before and after recommended indexes virtually applied[^2]. - performance improves by 4318.41%[cost_before=583.23,after_cost=13.2] The calculation formula for pi is pi = (cost_before - cost_after) / cost_after","title":"Performance Improvement"},{"location":"pawindexadvisor/what-if-validation/#cost-before","text":"The query cost before the recommended indexes are applied.","title":"Cost Before"},{"location":"pawindexadvisor/what-if-validation/#cost-after","text":"The query cost after the recommended indexes are applied.","title":"Cost After"},{"location":"pawindexadvisor/what-if-validation/#contributing-indexes","text":"The indexes contribute to the query execution, including the existing indexes and recommended indexes. - Contributing indice:[PAW_IDX1352615704, PAW_IDX0607681583, PAW_IDX1285498835] -- the indexes used","title":"Contributing Indexes"},{"location":"pawindexadvisor/what-if-validation/#paw_index_what-iftxt","text":"/****************************************************************\\ * * * Recommended Index Validation Details * * * * Powered by PawSQL(2022 - ) * * * \\****************************************************************/ -- Recommended indexes CREATE INDEX PAW_IDX1640274034 ON NATION ( N_NATIONKEY , N_REGIONKEY , N_NAME ); CREATE INDEX PAW_IDX1120442220 ON LINEITEM ( L_RETURNFLAG , L_ORDERKEY , L_DISCOUNT , L_EXTENDEDPRICE ); CREATE INDEX PAW_IDX1003493942 ON SUPPLIER ( S_NATIONKEY , S_SUPPKEY , S_NAME , S_ADDRESS ); CREATE INDEX PAW_IDX1852359742 ON ORDERS ( O_ORDERDATE , O_ORDERKEY , O_CUSTKEY , O_SHIPPRIORITY ); CREATE INDEX PAW_IDX1285498835 ON LINEITEM ( L_PARTKEY , L_SUPPKEY , L_SHIPDATE , L_QUANTITY ); CREATE INDEX PAW_IDX1728355301 ON LINEITEM ( L_SUPPKEY , L_ORDERKEY , L_DISCOUNT , L_EXTENDEDPRICE ); CREATE INDEX PAW_IDX1716298676 ON LINEITEM ( L_ORDERKEY , L_QUANTITY ); CREATE INDEX PAW_IDX0711368375 ON PART ( P_TYPE , P_PARTKEY ); ... -- Validation details -- 17.sql1, performance improves by 4318.41%[cost_before=583.23,after_cost=13.2] Contributing indice :[ PAW_IDX1352615704 , PAW_IDX0607681583 , PAW_IDX1285498835 ] SELECT SUM ( L_EXTENDEDPRICE ) / 7 . 0 AS AVG_YEARLY FROM LINEITEM , PART WHERE P_PARTKEY = L_PARTKEY AND P_BRAND = 'BRAND#44' AND P_CONTAINER = 'WRAP PKG' AND L_QUANTITY < ( SELECT 0 . 2 * AVG ( L_QUANTITY ) FROM LINEITEM WHERE L_PARTKEY = P_PARTKEY ); -- 21.sql1, performance improves by 1173.2289478709183%[cost_before=1333.58,after_cost=104.74] Contributing indice :[ PAW_IDX1621082330 , PAW_IDX1003493942 , PAW_IDX1416165687 , IDX_LINEITEM_ORDERKEY , PAW_IDX0538538531 ] SELECT S_NAME , COUNT ( * ) AS NUMWAIT FROM SUPPLIER , LINEITEM L1 , ORDERS , NATION WHERE S_SUPPKEY = L1 . L_SUPPKEY AND O_ORDERKEY = L1 . L_ORDERKEY AND O_ORDERSTATUS = 'F' AND L1 . L_RECEIPTDATE > L1 . L_COMMITDATE AND EXISTS ( SELECT * FROM LINEITEM L2 WHERE L2 . L_ORDERKEY = L1 . L_ORDERKEY AND L2 . L_SUPPKEY <> L1 . L_SUPPKEY ) AND NOT EXISTS ( SELECT * FROM LINEITEM L3 WHERE L3 . L_ORDERKEY = L1 . L_ORDERKEY AND L3 . L_SUPPKEY <> L1 . L_SUPPKEY AND L3 . L_RECEIPTDATE > L3 . L_COMMITDATE ) AND S_NATIONKEY = N_NATIONKEY AND N_NAME = 'EGYPT' GROUP BY S_NAME ORDER BY NUMWAIT DESC , S_NAME LIMIT 100 ; -- 7.sql1, performance improves by 3877.8084714548804%[cost_before=863.98,after_cost=21.72] Contributing indice :[ PAW_IDX1264424863 , PAW_IDX1409884827 , PAW_IDX1017563074 , CUSTOMER_PKEY , PAW_IDX1640274034 , PAW_IDX1640274034 ] SELECT SUPP_NATION , CUST_NATION , L_YEAR , SUM ( VOLUME ) AS REVENUE FROM ( SELECT N1 . N_NAME AS SUPP_NATION , N2 . N_NAME AS CUST_NATION , EXTRACT ( YEAR FROM L_SHIPDATE ) AS L_YEAR , L_EXTENDEDPRICE * ( 1 - L_DISCOUNT ) AS VOLUME FROM SUPPLIER , LINEITEM , ORDERS , CUSTOMER , NATION N1 , NATION N2 WHERE S_SUPPKEY = L_SUPPKEY AND O_ORDERKEY = L_ORDERKEY AND C_CUSTKEY = O_CUSTKEY AND S_NATIONKEY = N1 . N_NATIONKEY AND C_NATIONKEY = N2 . N_NATIONKEY AND ( ( N1 . N_NAME = 'JAPAN' AND N2 . N_NAME = 'INDIA' ) OR ( N1 . N_NAME = 'INDIA' AND N2 . N_NAME = 'JAPAN' ) ) AND L_SHIPDATE BETWEEN DATE '1995-01-01' AND DATE '1996-12-31' ) AS SHIPPING GROUP BY SUPP_NATION , CUST_NATION , L_YEAR ORDER BY SUPP_NATION , CUST_NATION , L_YEAR ; ...","title":"paw_index_what-if.txt"},{"location":"pawreference/","text":"","title":"Inside of PawSQL"},{"location":"pawreference/ActivationCodeforPlugin/","text":"PawSQL Advisor\u6fc0\u6d3b\u7801 \u00b6 \u6ce8\u518c\u7801\u5982\u4f55\u83b7\u53d6 \u00b6 If you don't have your own activation code for PawSQL plug-in , here are the steps to create an account and activation code. Step 1. Create a PawSQL account at PawSQL Cloud A PawSQL account for PawSQL Cloud and the plug-in will be created automatically after you sign up the PawSQL Cloud application. Step 2. Navigate to account setting page and copy activation code for your account Login PawSQL Cloud and navigate to account setting page, scroll down to the activation code section. Copy activation code for your account. Step 3. Open you IDE and paste your account and activation code to plug-in setting pages Step 4. Apply/Save settings. \u6ce8\u518c\u7801\u91cd\u65b0\u6fc0\u6d3b \u00b6 Step 1. Login PawSQL Cloud and navigate to account setting page, scroll down to the activation code section. Step 2. Click the re-activate button, you will get a new activation code. Step 3. Open you IDE and paste your account and activation code to plug-in setting pages Step 4 . Apply/Save settings.","title":"PawSQL Advisor\u6fc0\u6d3b\u7801 {ignore=true}"},{"location":"pawreference/ActivationCodeforPlugin/#pawsql-advisor","text":"","title":"PawSQL Advisor\u6fc0\u6d3b\u7801"},{"location":"pawreference/ActivationCodeforPlugin/#_1","text":"If you don't have your own activation code for PawSQL plug-in , here are the steps to create an account and activation code. Step 1. Create a PawSQL account at PawSQL Cloud A PawSQL account for PawSQL Cloud and the plug-in will be created automatically after you sign up the PawSQL Cloud application. Step 2. Navigate to account setting page and copy activation code for your account Login PawSQL Cloud and navigate to account setting page, scroll down to the activation code section. Copy activation code for your account. Step 3. Open you IDE and paste your account and activation code to plug-in setting pages Step 4. Apply/Save settings.","title":"\u6ce8\u518c\u7801\u5982\u4f55\u83b7\u53d6"},{"location":"pawreference/ActivationCodeforPlugin/#_2","text":"Step 1. Login PawSQL Cloud and navigate to account setting page, scroll down to the activation code section. Step 2. Click the re-activate button, you will get a new activation code. Step 3. Open you IDE and paste your account and activation code to plug-in setting pages Step 4 . Apply/Save settings.","title":"\u6ce8\u518c\u7801\u91cd\u65b0\u6fc0\u6d3b"},{"location":"pawreference/JoinElimination/","text":"\u8fde\u63a5\u6d88\u9664\uff08Join Elimination\uff09 \u00b6 \u9ad8\u7ea7SQL\u4f18\u5316\u7cfb\u5217\uff08Channel of advanced SQL tuning\uff09 \u5b9a\u4e49 \u00b6 \u8fde\u63a5\u6d88\u9664\uff08Join Elimination\uff09\u901a\u8fc7\u5728\u4e0d\u5f71\u54cd\u6700\u7ec8\u7ed3\u679c\u7684\u60c5\u51b5\u4e0b\u4ece\u67e5\u8be2\u4e2d\u5220\u9664\u8868\uff0c\u6765\u7b80\u5316SQL\u4ee5\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\u3002\u901a\u5e38\uff0c\u5f53\u67e5\u8be2\u5305\u542b\u4e3b\u952e-\u5916\u952e\u8fde\u63a5\u5e76\u4e14\u67e5\u8be2\u4e2d\u4ec5\u5f15\u7528\u4e3b\u8868\u7684\u4e3b\u952e\u5217\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b64\u4f18\u5316\u3002 \u8003\u8651\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c select o . * from orders o inner join customer c on c . c_custkey = o . o_custkey \u8ba2\u5355\u8868\uff08orders\uff09\u548c\u5ba2\u6237\u8868\uff08customer\uff09\u5173\u8054\uff0c\u4e14c_custkey\u662f\u5ba2\u6237\u8868\u7684\u4e3b\u952e\uff0c\u90a3\u4e48\u5ba2\u6237\u8868\u53ef\u4ee5\u88ab\u6d88\u9664\u6389\uff0c\u91cd\u5199\u540e\u7684SQL\u5982\u4e0b\uff1a select * from orders where o_custkey is not null \u8fde\u63a5\u6d88\u9664\u7684\u7c7b\u578b \u00b6 \u5185\u8fde\u63a5\u6d88\u9664 \u00b6 \u5185\u8fde\u63a5\u6d88\u9664\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6 \u4e8b\u5b9e\u4e0a\u7684\u4e3b\u5916\u952e\u7b49\u503c\u8fde\u63a5\uff08\u7236\u8868\u7684\u8fde\u63a5\u5217\u975e\u7a7a\u4e14\u552f\u4e00\uff09 \u7236\u8868\u7684\u4e3b\u952e\u662f\u67e5\u8be2\u4e2d\u552f\u4e00\u88ab\u5f15\u7528\u7684\u7236\u8868\u7684\u5217 \u5185\u8fde\u63a5\u6d88\u9664\u7684\u65b9\u5f0f\uff1a \u7236\u8868\u53ca\u4e3b\u5916\u952e\u8fde\u63a5\u6761\u4ef6\u88ab\u6d88\u9664 \u5176\u4ed6\u5bf9\u4e8e\u7236\u8868\u4e3b\u952e\u7684\u5f15\u7528\u88ab\u66ff\u6362\u6210\u5916\u8868\u7684\u5916\u952e \u5982\u679c\u5916\u952e\u53ef\u4ee5\u4e3a\u7a7a\u4e14\u65e0\u5176\u4ed6\u7684NFC\u6761\u4ef6 1 \uff0c\u5219\u9700\u8981\u65b0\u589e\u4e00\u4e2a\u5916\u952e\u4e0d\u4e3a\u7a7a\u7684\u6761\u4ef6 \u6848\u4f8b\uff1a - \u539f\u59cbSQL select c_custkey from customer , orders where c_custkey = o_custkey \u91cd\u5199\u540e\u7684SQL select orders . o_custkey from orders where orders . o_custkey is not null \u5916\u8fde\u63a5\u6d88\u9664 \u00b6 \u5916\u8fde\u63a5\u6d88\u9664\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a \u88ab\u6d88\u9664\u7684\u5916\u8fde\u63a5\u5fc5\u987b\u662f\u4e00\u4e2a\u5de6\u5916\u8fde\u63a5\u6216\u53f3\u5916\u8fde\u63a5 \u8fde\u63a5\u7684\u6761\u4ef6\u5fc5\u987b\u5b58\u5728\u4e00\u4e2a\u7531 AND \u8fde\u63a5\u7684\u4e3b\u5916\u952e\u7b49\u503c\u8fde\u63a5 \u5185\u8868\u7684\u4e3b\u952e\uff08\u975e\u7a7a\u4e14\u552f\u4e00\uff09\u662f\u67e5\u8be2\u4e2d\u552f\u4e00\u88ab\u5f15\u7528\u7684\u5185\u8868\u7684\u5217 \u5916\u8fde\u63a5\u6d88\u9664\u7684\u65b9\u5f0f\uff1a \u5185\u8868\u53ca\u5176\u5168\u90e8\u8fde\u63a5\u6761\u4ef6\u88ab\u6d88\u9664 \u5176\u4ed6\u5bf9\u4e8e\u5185\u8868\u4e3b\u952e\u7684\u5f15\u7528\u88ab\u66ff\u6362\u6210\u5185\u8868\u7684\u5916\u952e \u6848\u4f8b1\uff1aPK\u53ea\u51fa\u73b0\u5728\u8fde\u63a5\u6761\u4ef6\u4e2d \u539f\u59cbSQL select o_custkey from orders left join customer on c_custkey = o_custkey \u91cd\u5199\u540e\u7684SQL select orders . o_custkey from orders \u6848\u4f8b2\uff1aPK\u51fa\u73b0\u5728\u5176\u4ed6\u5730\u65b9 \u539f\u59cbSQL select orders . * from customer right join orders on c_custkey = o_custkey and c_custkey > 20 where o_orderstatus = 'T' \u91cd\u5199\u540e\u7684SQL select orders . * from orders where orders . o_orderstatus = 'T' \u6570\u636e\u5e93\u4e2d\u7684\u8fde\u63a5\u6d88\u9664 \u00b6 \u5bf9\u4e8e\u7b2c\u4e00\u7ae0\u8282\u4e2d\u7684SQL: select o.* from orders o inner join customer c on c.c_custkey=o.o_custkey MySQL\u6267\u884c\u8ba1\u5212\u4e3a\uff1a -> Inner hash join ( o . O_CUSTKEY = c . C_CUSTKEY ) ( cost = 20541 . 07 rows = 20013 ) -> Table scan on o ( cost = 2529 . 20 rows = 200128 ) -> Hash -> Index scan on c using key_idx ( cost = 0 . 35 rows = 1 ) PostgreSQL\u7684\u6267\u884c\u8ba1\u5212\u4e3a\uff1a Hash Join ( cost = 401 . 29 .. 711 . 56 rows = 10001 width = 115 ) Hash Cond : ( o . o_custkey = c . c_custkey ) -> Seq Scan on orders o ( cost = 0 . 00 .. 284 . 01 rows = 10001 width = 115 ) -> Hash ( cost = 276 . 29 .. 276 . 29 rows = 10000 width = 4 ) -> Index Only Scan using customer_pkey on customer c ( cost = 0 . 29 .. 276 . 29 rows = 10000 width = 4 ) \u91cd\u8981\u63d0\u793a: \u53ef\u4ee5\u770b\u51fa\uff0cMySQL\u548cPostgreSQL\u90fd\u4e0d\u652f\u6301\u8fde\u63a5\u6d88\u9664\u91cd\u5199\u4f18\u5316\u3002 PawSQL\u4e2d\u7684\u8fde\u63a5\u6d88\u9664 \u00b6 PawSQL\u901a\u8fc7JoinEliminationRewrite\u4f18\u5316\u91cd\u5199\uff0c\u63d0\u4f9b\u6bd4\u8f83\u5b8c\u5584\u7684\u8fde\u63a5\u6d88\u9664\u4f18\u5316\u3002 \u8f93\u5165SQL\u8bed\u53e5 select orders . * from customer right join orders on c_custkey = o_custkey and c_custkey > 20 \u5e94\u7528JoinEliminationRewrite\u540e\u91cd\u5199\u7684SQL\u4e3a\uff1a select orders . * from orders \u4f18\u5316\u524d\u7684\u6267\u884c\u8ba1\u5212 -> Nested loop left join ( cost = 90585 . 51 rows = 200128 ) -> Table scan on orders ( cost = 20540 . 71 rows = 200128 ) -> Filter : ( orders . O_CUSTKEY > 20 ) ( cost = 0 . 25 rows = 1 ) -> Single - row covering index lookup on customer using key_idx ( C_CUSTKEY = orders . O_CUSTKEY ) ( cost = 0 . 25 rows = 1 ) \u4f18\u5316\u540e\u7684\u6267\u884c -> Table scan on orders ( cost = 20540 . 71 rows = 200128 ) \u53ef\u4ee5\u770b\u5230\uff0cPawSQL\u5f88\u597d\u7684\u652f\u6301\u4e86\u8fde\u63a5\u6d88\u9664\u91cd\u5199\u4f18\u5316\uff0c\u4ec5\u4ec5\u901a\u8fc7\u8fde\u63a5\u6d88\u9664\u91cd\u5199\uff0c\u6027\u80fd\u7684\u63d0\u5347\u5c31\u8fbe\u5230\u4e86441.01%. \u603b\u7ed3 \u00b6 \u7531\u4e8e\u539f\u751f\u7684MySQL\u548cPostgreSQL\u90fd\u4e0d\u652f\u6301\u8868\u5173\u8054\u6d88\u9664\uff0cPawSQL\u7684JoinEliminationRewrite\u91cd\u5199\u4f18\u5316\u5bf9\u5b83\u4eec\u662f\u4e00\u4e2a\u6709\u610f\u4e49\u7684\u8865\u5145\u3002\u5728SQL\u88ab\u90e8\u7f72\u81f3\u751f\u4ea7\u73af\u5883\u771f\u6b63\u6267\u884c\u4e4b\u524d\uff0c\u4f7f\u7528PawSQL\u53ef\u4ee5\u628a\u65e0\u610f\u4e49\u7684\u8868\u5173\u8054\u7ed9\u6d88\u9664\u6389\uff0c\u907f\u514d\u6570\u636e\u5e93\u82b1\u8d39\u8d44\u6e90\u8fdb\u884c\u65e0\u610f\u4e49\u7684\u8868\u5173\u8054\u64cd\u4f5c\u3002 \u8054\u7cfb\u6211\u4eec \u00b6 \u7f51\u7ad9: https://app.pawsql.com \u90ae\u4ef6\uff1a service@pawsql.com Twitter: https://twitter.com/pawsql \u626b\u63cf\u5173\u6ce8PawSQL\u516c\u4f17\u53f7 \u5173\u4e8eNFC\u6761\u4ef6\uff0c\u8bf7\u53c2\u8003\u9ad8\u7ea7SQL\u4f18\u5316\u7cfb\u5217\u4e2d \u5916\u8fde\u63a5\u4f18\u5316 \u4e2d\u5bf9\u4e8eNFC\u7684\u5b9a\u4e49 \u21a9","title":"\u8fde\u63a5\u6d88\u9664"},{"location":"pawreference/JoinElimination/#join-elimination","text":"\u9ad8\u7ea7SQL\u4f18\u5316\u7cfb\u5217\uff08Channel of advanced SQL tuning\uff09","title":"\u8fde\u63a5\u6d88\u9664\uff08Join Elimination\uff09"},{"location":"pawreference/JoinElimination/#_1","text":"\u8fde\u63a5\u6d88\u9664\uff08Join Elimination\uff09\u901a\u8fc7\u5728\u4e0d\u5f71\u54cd\u6700\u7ec8\u7ed3\u679c\u7684\u60c5\u51b5\u4e0b\u4ece\u67e5\u8be2\u4e2d\u5220\u9664\u8868\uff0c\u6765\u7b80\u5316SQL\u4ee5\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\u3002\u901a\u5e38\uff0c\u5f53\u67e5\u8be2\u5305\u542b\u4e3b\u952e-\u5916\u952e\u8fde\u63a5\u5e76\u4e14\u67e5\u8be2\u4e2d\u4ec5\u5f15\u7528\u4e3b\u8868\u7684\u4e3b\u952e\u5217\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b64\u4f18\u5316\u3002 \u8003\u8651\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c select o . * from orders o inner join customer c on c . c_custkey = o . o_custkey \u8ba2\u5355\u8868\uff08orders\uff09\u548c\u5ba2\u6237\u8868\uff08customer\uff09\u5173\u8054\uff0c\u4e14c_custkey\u662f\u5ba2\u6237\u8868\u7684\u4e3b\u952e\uff0c\u90a3\u4e48\u5ba2\u6237\u8868\u53ef\u4ee5\u88ab\u6d88\u9664\u6389\uff0c\u91cd\u5199\u540e\u7684SQL\u5982\u4e0b\uff1a select * from orders where o_custkey is not null","title":"\u5b9a\u4e49"},{"location":"pawreference/JoinElimination/#_2","text":"","title":"\u8fde\u63a5\u6d88\u9664\u7684\u7c7b\u578b"},{"location":"pawreference/JoinElimination/#_3","text":"\u5185\u8fde\u63a5\u6d88\u9664\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6 \u4e8b\u5b9e\u4e0a\u7684\u4e3b\u5916\u952e\u7b49\u503c\u8fde\u63a5\uff08\u7236\u8868\u7684\u8fde\u63a5\u5217\u975e\u7a7a\u4e14\u552f\u4e00\uff09 \u7236\u8868\u7684\u4e3b\u952e\u662f\u67e5\u8be2\u4e2d\u552f\u4e00\u88ab\u5f15\u7528\u7684\u7236\u8868\u7684\u5217 \u5185\u8fde\u63a5\u6d88\u9664\u7684\u65b9\u5f0f\uff1a \u7236\u8868\u53ca\u4e3b\u5916\u952e\u8fde\u63a5\u6761\u4ef6\u88ab\u6d88\u9664 \u5176\u4ed6\u5bf9\u4e8e\u7236\u8868\u4e3b\u952e\u7684\u5f15\u7528\u88ab\u66ff\u6362\u6210\u5916\u8868\u7684\u5916\u952e \u5982\u679c\u5916\u952e\u53ef\u4ee5\u4e3a\u7a7a\u4e14\u65e0\u5176\u4ed6\u7684NFC\u6761\u4ef6 1 \uff0c\u5219\u9700\u8981\u65b0\u589e\u4e00\u4e2a\u5916\u952e\u4e0d\u4e3a\u7a7a\u7684\u6761\u4ef6 \u6848\u4f8b\uff1a - \u539f\u59cbSQL select c_custkey from customer , orders where c_custkey = o_custkey \u91cd\u5199\u540e\u7684SQL select orders . o_custkey from orders where orders . o_custkey is not null","title":"\u5185\u8fde\u63a5\u6d88\u9664"},{"location":"pawreference/JoinElimination/#_4","text":"\u5916\u8fde\u63a5\u6d88\u9664\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\uff1a \u88ab\u6d88\u9664\u7684\u5916\u8fde\u63a5\u5fc5\u987b\u662f\u4e00\u4e2a\u5de6\u5916\u8fde\u63a5\u6216\u53f3\u5916\u8fde\u63a5 \u8fde\u63a5\u7684\u6761\u4ef6\u5fc5\u987b\u5b58\u5728\u4e00\u4e2a\u7531 AND \u8fde\u63a5\u7684\u4e3b\u5916\u952e\u7b49\u503c\u8fde\u63a5 \u5185\u8868\u7684\u4e3b\u952e\uff08\u975e\u7a7a\u4e14\u552f\u4e00\uff09\u662f\u67e5\u8be2\u4e2d\u552f\u4e00\u88ab\u5f15\u7528\u7684\u5185\u8868\u7684\u5217 \u5916\u8fde\u63a5\u6d88\u9664\u7684\u65b9\u5f0f\uff1a \u5185\u8868\u53ca\u5176\u5168\u90e8\u8fde\u63a5\u6761\u4ef6\u88ab\u6d88\u9664 \u5176\u4ed6\u5bf9\u4e8e\u5185\u8868\u4e3b\u952e\u7684\u5f15\u7528\u88ab\u66ff\u6362\u6210\u5185\u8868\u7684\u5916\u952e \u6848\u4f8b1\uff1aPK\u53ea\u51fa\u73b0\u5728\u8fde\u63a5\u6761\u4ef6\u4e2d \u539f\u59cbSQL select o_custkey from orders left join customer on c_custkey = o_custkey \u91cd\u5199\u540e\u7684SQL select orders . o_custkey from orders \u6848\u4f8b2\uff1aPK\u51fa\u73b0\u5728\u5176\u4ed6\u5730\u65b9 \u539f\u59cbSQL select orders . * from customer right join orders on c_custkey = o_custkey and c_custkey > 20 where o_orderstatus = 'T' \u91cd\u5199\u540e\u7684SQL select orders . * from orders where orders . o_orderstatus = 'T'","title":"\u5916\u8fde\u63a5\u6d88\u9664"},{"location":"pawreference/JoinElimination/#_5","text":"\u5bf9\u4e8e\u7b2c\u4e00\u7ae0\u8282\u4e2d\u7684SQL: select o.* from orders o inner join customer c on c.c_custkey=o.o_custkey MySQL\u6267\u884c\u8ba1\u5212\u4e3a\uff1a -> Inner hash join ( o . O_CUSTKEY = c . C_CUSTKEY ) ( cost = 20541 . 07 rows = 20013 ) -> Table scan on o ( cost = 2529 . 20 rows = 200128 ) -> Hash -> Index scan on c using key_idx ( cost = 0 . 35 rows = 1 ) PostgreSQL\u7684\u6267\u884c\u8ba1\u5212\u4e3a\uff1a Hash Join ( cost = 401 . 29 .. 711 . 56 rows = 10001 width = 115 ) Hash Cond : ( o . o_custkey = c . c_custkey ) -> Seq Scan on orders o ( cost = 0 . 00 .. 284 . 01 rows = 10001 width = 115 ) -> Hash ( cost = 276 . 29 .. 276 . 29 rows = 10000 width = 4 ) -> Index Only Scan using customer_pkey on customer c ( cost = 0 . 29 .. 276 . 29 rows = 10000 width = 4 ) \u91cd\u8981\u63d0\u793a: \u53ef\u4ee5\u770b\u51fa\uff0cMySQL\u548cPostgreSQL\u90fd\u4e0d\u652f\u6301\u8fde\u63a5\u6d88\u9664\u91cd\u5199\u4f18\u5316\u3002","title":"\u6570\u636e\u5e93\u4e2d\u7684\u8fde\u63a5\u6d88\u9664"},{"location":"pawreference/JoinElimination/#pawsql","text":"PawSQL\u901a\u8fc7JoinEliminationRewrite\u4f18\u5316\u91cd\u5199\uff0c\u63d0\u4f9b\u6bd4\u8f83\u5b8c\u5584\u7684\u8fde\u63a5\u6d88\u9664\u4f18\u5316\u3002 \u8f93\u5165SQL\u8bed\u53e5 select orders . * from customer right join orders on c_custkey = o_custkey and c_custkey > 20 \u5e94\u7528JoinEliminationRewrite\u540e\u91cd\u5199\u7684SQL\u4e3a\uff1a select orders . * from orders \u4f18\u5316\u524d\u7684\u6267\u884c\u8ba1\u5212 -> Nested loop left join ( cost = 90585 . 51 rows = 200128 ) -> Table scan on orders ( cost = 20540 . 71 rows = 200128 ) -> Filter : ( orders . O_CUSTKEY > 20 ) ( cost = 0 . 25 rows = 1 ) -> Single - row covering index lookup on customer using key_idx ( C_CUSTKEY = orders . O_CUSTKEY ) ( cost = 0 . 25 rows = 1 ) \u4f18\u5316\u540e\u7684\u6267\u884c -> Table scan on orders ( cost = 20540 . 71 rows = 200128 ) \u53ef\u4ee5\u770b\u5230\uff0cPawSQL\u5f88\u597d\u7684\u652f\u6301\u4e86\u8fde\u63a5\u6d88\u9664\u91cd\u5199\u4f18\u5316\uff0c\u4ec5\u4ec5\u901a\u8fc7\u8fde\u63a5\u6d88\u9664\u91cd\u5199\uff0c\u6027\u80fd\u7684\u63d0\u5347\u5c31\u8fbe\u5230\u4e86441.01%.","title":"PawSQL\u4e2d\u7684\u8fde\u63a5\u6d88\u9664"},{"location":"pawreference/JoinElimination/#_6","text":"\u7531\u4e8e\u539f\u751f\u7684MySQL\u548cPostgreSQL\u90fd\u4e0d\u652f\u6301\u8868\u5173\u8054\u6d88\u9664\uff0cPawSQL\u7684JoinEliminationRewrite\u91cd\u5199\u4f18\u5316\u5bf9\u5b83\u4eec\u662f\u4e00\u4e2a\u6709\u610f\u4e49\u7684\u8865\u5145\u3002\u5728SQL\u88ab\u90e8\u7f72\u81f3\u751f\u4ea7\u73af\u5883\u771f\u6b63\u6267\u884c\u4e4b\u524d\uff0c\u4f7f\u7528PawSQL\u53ef\u4ee5\u628a\u65e0\u610f\u4e49\u7684\u8868\u5173\u8054\u7ed9\u6d88\u9664\u6389\uff0c\u907f\u514d\u6570\u636e\u5e93\u82b1\u8d39\u8d44\u6e90\u8fdb\u884c\u65e0\u610f\u4e49\u7684\u8868\u5173\u8054\u64cd\u4f5c\u3002","title":"\u603b\u7ed3"},{"location":"pawreference/JoinElimination/#_7","text":"\u7f51\u7ad9: https://app.pawsql.com \u90ae\u4ef6\uff1a service@pawsql.com Twitter: https://twitter.com/pawsql \u626b\u63cf\u5173\u6ce8PawSQL\u516c\u4f17\u53f7 \u5173\u4e8eNFC\u6761\u4ef6\uff0c\u8bf7\u53c2\u8003\u9ad8\u7ea7SQL\u4f18\u5316\u7cfb\u5217\u4e2d \u5916\u8fde\u63a5\u4f18\u5316 \u4e2d\u5bf9\u4e8eNFC\u7684\u5b9a\u4e49 \u21a9","title":"\u8054\u7cfb\u6211\u4eec"},{"location":"pawreference/Outer2Inner/","text":"\u5916\u8fde\u63a5\u8f6c\u5316\u4e3a\u5185\u8fde\u63a5 \u00b6 \u9ad8\u7ea7SQL\u4f18\u5316\u7cfb\u5217\uff08Channel of advanced SQL tuning\uff09 \u8868\u8fde\u63a5\u7684\u7c7b\u578b \u00b6 \u8868\u8fde\u63a5\u7684\u7c7b\u578b\u4e3b\u8981\u5206\u4e3a\u5185\u8fde\u63a5\u3001\u5916\u8fde\u63a5\uff08\u5de6\u5916\u3001\u53f3\u5916\u3001\u5168\u5916\uff09\u3001\u4ea4\u53c9\u8fde\u63a5\uff0c\u5173\u4e8e\u4ed6\u4eec\u7684\u8bed\u4e49\u53ef\u4ee5\u53c2\u8003\u4e0b\u56fe\u3002 \u6b64\u56fe\u6765\u81ea \u6587\u7ae0(Visual Representation of SQL Joins) \uff0c\u63cf\u8ff0\u7684\u975e\u5e38\u6e05\u695a\uff0c\u672c\u6587\u4e0d\u505a\u592a\u591a\u8d58\u8ff0\u3002 \u8fde\u63a5\u7c7b\u578b\u5bf9\u6267\u884c\u8ba1\u5212\u7684\u5f71\u54cd \u00b6 \u6211\u4eec\u77e5\u9053\u6570\u636e\u5e93\u4f18\u5316\u5668\u91c7\u7528\u52a8\u6001\u89c4\u5212\u7b97\u6cd5\u5bf9\u53ef\u80fd\u7684\u6267\u884c\u8def\u5f84\u8fdb\u884c\u4ee3\u4ef7\u4f30\u7b97\uff0c\u4ee5\u9009\u62e9\u51fa\u4ee3\u4ef7\u5c3d\u91cf\u5c0f\u7684\u6267\u884c\u8ba1\u5212\u8fdb\u884c\u6267\u884c\u3002\u6570\u636e\u5e93\u4f18\u5316\u5668\u5bf9\u6267\u884c\u8def\u5f84\u8fdb\u884c\u89c4\u5212\u65f6\uff0c\u4e3b\u8981\u8fdb\u884c\u4e09\u7c7b\u89c4\u5212\uff1a\u6570\u636e\u8868\u7684\u8bbf\u95ee\u65b9\u5f0f\uff1b\u8868\u8fde\u63a5\u7684\u987a\u5e8f\uff1b\u8868\u8fde\u63a5\u7684\u65b9\u6cd5\u3002 \u5f53\u4f18\u5316\u5668\u8fdb\u884c\u8868\u8fde\u63a5\u7684\u89c4\u5212\u65f6\uff0c\u5bf9\u4e8eNested Loop Join\u8fde\u63a5\u65b9\u6cd5\uff0c\u5b83\u53ea\u8003\u8651\u4ee5\u4e0b\u8ba1\u5212\uff1a\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u63a5\u64cd\u4f5c\uff0c\u5916\u90e8\u8868\u90fd\u4f1a\u5148\u4e8e\u5185\u90e8\u8868\u88ab\u8bbf\u95ee\u3002\u56e0\u6b64\u5f53\u4f7f\u7528\u5916\u8fde\u63a5\u65f6\uff0c\u5185\u5916\u8868\u5728SQL\u4e2d\u5c31\u88ab\u660e\u786e\u4e86\uff08\u5916\u8868\u4e3a\u5de6\u8fde\u63a5\u7684\u5de6\u8868/\u53f3\u8fde\u63a5\u7684\u53f3\u8868\uff09\uff0c\u4f18\u5316\u5668\u7684\u9009\u62e9\u662f\u6709\u9650\u7684,\u56e0\u800c\u53ef\u80fd\u5bfc\u81f4\u6027\u80fd\u8f83\u4f4e\u7684\u6267\u884c\u8ba1\u5212\u3002 \u4ee5MySQL\u5b98\u65b9\u6587\u6863\u4e0a\u7684 \u4f8b\u5b50 \u6765\u8bf4\u660e\uff1a \u8003\u8651\u4e0b\u9762\u8fd9\u79cd\u5f62\u5f0f\u7684\u67e5\u8be2\uff0c\u5176\u4e2d R(T2) \u6781\u5927\u5730\u8fc7\u6ee4\u4e86\u6765\u81ea T2 \u8868\u7684\u5339\u914d\u884c\u6570: SELECT * T1 FROM T1 LEFT JOIN T2 ON P1(T1,T2) WHERE P(T1,T2) AND R(T2) \u5982\u679c\u6309\u7167\u4e0a\u9762\u6240\u8ff0\u7684\u6267\u884c\u67e5\u8be2\uff0c\u4f18\u5316\u5668\u6ca1\u6709\u9009\u62e9\u4f59\u5730\uff0c\u53ea\u80fd\u5148\u8bbf\u95ee\u9650\u5236\u8f83\u5c11\u7684 T1 \u8868\uff0c\u7136\u540e\u518d\u8bbf\u95ee\u9650\u5236\u8f83\u591a\u7684 T2 \u8868\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u975e\u5e38\u4f4e\u6548\u7684\u6267\u884c\u8ba1\u5212\u3002 \u5bf9\u4e8e\u5168\u5916\u8fde\u63a5\uff0c\u4f18\u5316\u5668\u4e00\u822c\u662f\u5c06\u5176\u8f6c\u5316\u4e3a\u4e00\u4e2a\u5de6\u5916\u8054\u673a\u548c\u53f3\u5916\u8fde\u63a5\u7684UNION\u6216\u662f\u91c7\u7528FULL OUTER HASH JOIN\u8fdb\u884c\u6267\u884c\uff0c\u4f1a\u4ea7\u751f\u7c7b\u4f3c\u7684\u6027\u80fd\u95ee\u9898\u3002 \u5916\u8fde\u63a5\u7b80\u5316\u91cd\u5199 \u00b6 \u5982\u679cR(T2) \u662f\u4e00\u4e2a\u7a7a\u62d2\u7edd\u6761\u4ef6\u6761\u4ef6(NFC)\uff0c\u90a3\u4e48\u4ee5\u4e0a\u7684\u5916\u8fde\u63a5\u53ef\u4ee5\u8f6c\u5316\u4e3a\u5185\u8fde\u63a5\uff0c\u5373 SELECT * T1 FROM T1 JOIN T2 ON P1(T1,T2) WHERE P(T1,T2) AND R(T2) \u8fd9\u6837\uff0c\u4f18\u5316\u5668\u53ef\u4ee5\u5148\u5e94\u7528R(T2) \uff0c\u83b7\u53d6\u975e\u5e38\u5c0f\u7684\u7ed3\u679c\u96c6\uff0c\u7136\u540e\u518d\u548cT1\u8fdb\u884c\u5173\u8054\u3002 NFC\u6761\u4ef6\uff08NULL Filtered Condition\uff09 \u00b6 \u7a7a\u62d2\u7edd\u6761\u4ef6\u6307\u7684\u662f\uff0c\u5982\u679c\u8f93\u5165\u4e3aNULL\uff0c\u5219\u5176\u5224\u65ad\u7ed3\u679c\u4e3afalse\u6216\u662funknown\uff0c\u5bfc\u81f4\u8be5\u884c\u88ab\u8fc7\u6ee4\u6389\u7684\u6761\u4ef6\u3002\u5224\u65ad\u67d0\u4e2a\u6761\u4ef6\u662f\u5426\u4e3a\u5916\u8fde\u63a5\u64cd\u4f5c\u7684\u7a7a\u62d2\u7edd\u6761\u4ef6\uff08NFC\uff09\u7684\u89c4\u5219\u5f88\u7b80\u5355: \u5b83\u662f A IS NOT NULL \u7684\u5f62\u5f0f\uff0c\u5176\u4e2d A \u662f\u5185\u8868\u7684\u4efb\u4f55\u5c5e\u6027 \u5b83\u662f\u5305\u542b\u5185\u8868\u5f15\u7528\u7684\u8c13\u8bcd\uff0c\u5f53\u5176\u4e2d\u4e00\u4e2a\u53c2\u6570\u4e3a NULL \u65f6\u8bc4\u4f30\u4e3a UNKNOWN \u5b83\u662f\u5305\u542b\u7a7a\u62d2\u7edd\u6761\u4ef6\u7684\u201c\u4e0e\u5173\u8054\u201d\uff08AND\uff09\u7ec4\u5408 \u5b83\u662f\u7a7a\u62d2\u7edd\u6761\u4ef6\u7684\u201c\u6216\u5173\u8054\u201d\uff08OR\uff09\u7ec4\u5408 \u56e0\u6b64\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u5916\u8fde\u63a5: T1 LEFT JOIN T2 ON T1.A=T2.A \u4ee5\u4e0b\u7684\u6761\u4ef6\u88ab\u89c6\u4e3a\u7a7a\u62d2\u7edd\u6761\u4ef6\uff1a T2.B IS NOT NULL T2.B > 3 T2.C <= T1.C T1.B < 3 AND T2.B IS NOT NULL T2.B < 2 OR T2.C > 1 \u4ee5\u4e0b\u7684\u6761\u4ef6\u4e0d\u88ab\u89c6\u4e3a\u7a7a\u62d2\u7edd\u6761\u4ef6: T2.B IS NULL T1.B < 3 OR T2.B IS NOT NULL T1.B < 3 OR T2.B > 3 T2.B in (1,2, NULL) \u6570\u636e\u5e93\u4e2d\u7684\u5916\u8fde\u63a5\u7b80\u5316 \u00b6 \u7edd\u5927\u591a\u6570\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4f18\u5316\u5668\u90fd\u80fd\u591f\u63d0\u4f9b\u4e0a\u8ff0\u7684\u5916\u8fde\u63a5\u7b80\u5316\u91cd\u5199\u3002\u4e0b\u9762\u4ee5\u4e00\u4e2a\u6848\u4f8b\u6765\u793a\u4f8b\u5728MySQL\u548cPostgreSQL\u4e2d\u7684\u5916\u8fde\u63a5\u7b80\u5316\u91cd\u5199\u3002 \u793a\u4f8bSQL\u8bed\u53e5 select c_custkey from orders left join customer on c_custkey=o_custkey where C_NATIONKEY < 20 MySQL\u6267\u884c\u8ba1\u5212 -> Inner hash join (orders.O_CUSTKEY = customer.C_CUSTKEY) (cost=20541.08 rows=20013) -> Table scan on orders (cost=2529.21 rows=200128) -> Hash -> Filter: (customer.C_NATIONKEY < 20) (cost=0.35 rows=1) -> Table scan on customer (cost=0.35 rows=1) PostgreSQL Hash Join (cost=100.19..410.47 rows=33 width=4) Hash Cond: (orders.o_custkey = customer.c_custkey) -> Seq Scan on orders (cost=0.00..284.01 rows=10001 width=4) -> Hash (cost=99.78..99.78 rows=33 width=4) -> Bitmap Heap Scan on customer (cost=4.54..99.78 rows=33 width=4) Recheck Cond: (c_nationkey < 20) -> Bitmap Index Scan on c_nationkey_idx (cost=0.00..4.53 rows=33 width=0) Index Cond: (c_nationkey < 20) \u4ece\u6267\u884c\u8ba1\u5212\u6765\u770b\uff0cMySQL\u548cPostgreSQL\u90fd\u652f\u6301\u5916\u8fde\u63a5\u5230\u5185\u8fde\u63a5\u7684\u91cd\u5199\u4f18\u5316\u3002 PawSQL\u4e2d\u7684\u5916\u8fde\u63a5\u91cd\u5199\u4f18\u5316 \u00b6 PawSQL\u5b9e\u73b0\u901a\u8fc7Outer2InnerConversionRewrite\u89c4\u5219\u5b9e\u73b0\u4e86\u7c7b\u4f3c\u7684\u91cd\u5199\u4f18\u5316\uff0c\u5b83\u652f\u6301\u5de6\u5916\u8fde\u63a5\u3001\u53f3\u5916\u8fde\u63a5\u5230\u5185\u8fde\u63a5\u7684\u91cd\u5199\u4f18\u5316\uff0c\u4ee5\u53ca\u5168\u5916\u8fde\u63a5\u5230\u5de6\u5916\u8054\u673a\u3001\u53f3\u5916\u8fde\u63a5\u6216\u5185\u8fde\u63a5\u7684\u91cd\u5199\u4f18\u5316\u3002 \u91cd\u8981\u63d0\u793a: PawSQL\u5b9e\u73b0Outer2InnerConversionRewrite\u4f18\u5316\u7684\u76ee\u7684\u4e0d\u662f\u4e3a\u4e86\u91cd\u73b0\u6570\u636e\u5e93\u4f18\u5316\u5668\u7684\u91cd\u5199\u4f18\u5316\u903b\u8f91\u3002PawSQL\u5b9e\u73b0\u5b83\u662f\u56e0\u4e3a\u5b83\u53ef\u4ee5\u89e6\u53d1\u6570\u636e\u5e93\u4f18\u5316\u5668\u4e0d\u80fd\u5b9e\u73b0\u7684\u7d22\u5f15\u63a8\u8350\u529f\u80fd\u3002 \u8f93\u5165SQL\u8bed\u53e5 select c_custkey from orders left join customer on c_custkey=o_custkey where C_NATIONKEY < 20 \u5e94\u7528Outer2InnerConversionRewrite\u540e\u91cd\u5199\u7684SQL\u4e3a\uff1a select c_custkey from orders left join customer on c_custkey=o_custkey where C_NATIONKEY < 20 \u63a8\u8350\u7d22\u5f15 \u91cd\u5199\u540e\u7684SQL\u901a\u8fc7PawSQL\u7d22\u5f15\u63a8\u8350\u5f15\u64ce\u63a8\u8350\u51fa\u5982\u4e0b\u4e24\u4e2a\u7d22\u5f15\u3002 CREATE INDEX CONCURRENTLY PAW_IDX1028958902 ON PUBLIC.ORDERS(O_CUSTKEY); CREATE INDEX CONCURRENTLY PAW_IDX1196677611 ON PUBLIC.CUSTOMER(C_NATIONKEY,C_CUSTKEY); \u6267\u884c\u8ba1\u5212 \u628a\u63a8\u8350\u51fa\u7684\u7d22\u5f15\u7eb3\u5165\u4f18\u5316\u5668\u89c4\u5212\u8303\u56f4\u540e\u7684\u6267\u884c\u8ba1\u5212\u4e3a\uff1a PostgreSQL\u4e0a\u7684\u6267\u884c\u8ba1\u5212 Nested Loop (cost=0.57..85.53 rows=33 width=4) -> Index Only Scan using paw_idx1196677611 on customer (cost=0.29..8.86 rows=33 width=4) Index Cond: (c_nationkey < 20) -> Index Only Scan using paw_idx1028958902 on orders (cost=0.29..2.24 rows=8 width=4) Index Cond: (o_custkey = customer.c_custkey) MySQL\u4e0a\u7684\u6267\u884c\u8ba1\u5212 -> Nested loop inner join (cost=1.91 rows=6) -> Filter: (customer.C_NATIONKEY < 20) (cost=0.35 rows=1) -> Index scan on customer using PAW_IDX1360881332 (cost=0.35 rows=1) -> Covering index lookup on orders using PAW_IDX1028958902 (O_CUSTKEY=customer.C_CUSTKEY) (cost=1.56 rows=6) \u53ef\u4ee5\u770b\u5230\uff0c\u901a\u8fc7PawSQL\u7684\u6574\u4e2a\u4f18\u5316\u6d41\u7a0b\uff0c\u901a\u8fc7\u7d22\u5f15\u63a8\u8350\u5f15\u64ce\u63a8\u8350\u7684\u4e24\u4e2a\u7d22\u5f15\uff0c\u5728\u6570\u636e\u91cf\u8f83\u5c0f\u7684PostgreSQL\u6570\u636e\u5e93\u4e0a\uff0c\u67e5\u8be2\u7684\u4ee3\u4ef7\u4ece410.47\u51cf\u4f4e\u523085.53\uff0c\u6027\u80fd\u63d0\u5347\u4e86379.91%\u3002\u800c\u5728\u6570\u636e\u91cf\u8f83\u5927\u7684MySQL\u6570\u636e\u5e93\u670d\u52a1\u5668\u4e0a\uff0c\u67e5\u8be2\u4ee3\u4ef7\u4ece20541.08\u964d\u4f4e\u52301.91\uff0c\u6027\u80fd\u63d0\u5347\u4e86553161.15%\u3002 \u9898\u5916\u8bdd\uff1a\u6d4b\u8bd5\u8fd9\u4e2a\u529f\u80fd\u662f\uff0c\u53d1\u73b0\u4e00\u4e2a\u77e5\u8bc6\u70b9\uff0c\u5728MySQL\u4e2d\uff0c\u5982\u679c\u67d0\u4e2a\u5b57\u6bb5\u88ab\u5b9a\u4e49\u4e3a\u5916\u952e\uff0c\u9ed8\u8ba4\u4f1a\u6709\u5bf9\u5e94\u7684\u7d22\u5f15\u5efa\u7acb\u5728\u4e0a\u9762\uff1b\u800c\u5728PostgreSQL\u7cfb\u5217\u7684\u6570\u636e\u5e93\u4e2d\uff0c\u5c06\u67d0\u4e9b\u5b57\u6bb5\u8bbe\u7f6e\u5916\u952e\u5e76\u4e0d\u4f1a\u81ea\u52a8\u5728\u8fd9\u4e9b\u5b57\u6bb5\u4e0a\u5efa\u4e0a\u7d22\u5f15\u3002 \u8054\u7cfb\u6211\u4eec \u00b6 \u90ae\u4ef6\uff1a service@pawsql.com Twitter: https://twitter.com/pawsql \u626b\u63cf\u5173\u6ce8PawSQL\u516c\u4f17\u53f7","title":"\u5916\u8fde\u63a5\u4f18\u5316"},{"location":"pawreference/Outer2Inner/#_1","text":"\u9ad8\u7ea7SQL\u4f18\u5316\u7cfb\u5217\uff08Channel of advanced SQL tuning\uff09","title":"\u5916\u8fde\u63a5\u8f6c\u5316\u4e3a\u5185\u8fde\u63a5"},{"location":"pawreference/Outer2Inner/#_2","text":"\u8868\u8fde\u63a5\u7684\u7c7b\u578b\u4e3b\u8981\u5206\u4e3a\u5185\u8fde\u63a5\u3001\u5916\u8fde\u63a5\uff08\u5de6\u5916\u3001\u53f3\u5916\u3001\u5168\u5916\uff09\u3001\u4ea4\u53c9\u8fde\u63a5\uff0c\u5173\u4e8e\u4ed6\u4eec\u7684\u8bed\u4e49\u53ef\u4ee5\u53c2\u8003\u4e0b\u56fe\u3002 \u6b64\u56fe\u6765\u81ea \u6587\u7ae0(Visual Representation of SQL Joins) \uff0c\u63cf\u8ff0\u7684\u975e\u5e38\u6e05\u695a\uff0c\u672c\u6587\u4e0d\u505a\u592a\u591a\u8d58\u8ff0\u3002","title":"\u8868\u8fde\u63a5\u7684\u7c7b\u578b"},{"location":"pawreference/Outer2Inner/#_3","text":"\u6211\u4eec\u77e5\u9053\u6570\u636e\u5e93\u4f18\u5316\u5668\u91c7\u7528\u52a8\u6001\u89c4\u5212\u7b97\u6cd5\u5bf9\u53ef\u80fd\u7684\u6267\u884c\u8def\u5f84\u8fdb\u884c\u4ee3\u4ef7\u4f30\u7b97\uff0c\u4ee5\u9009\u62e9\u51fa\u4ee3\u4ef7\u5c3d\u91cf\u5c0f\u7684\u6267\u884c\u8ba1\u5212\u8fdb\u884c\u6267\u884c\u3002\u6570\u636e\u5e93\u4f18\u5316\u5668\u5bf9\u6267\u884c\u8def\u5f84\u8fdb\u884c\u89c4\u5212\u65f6\uff0c\u4e3b\u8981\u8fdb\u884c\u4e09\u7c7b\u89c4\u5212\uff1a\u6570\u636e\u8868\u7684\u8bbf\u95ee\u65b9\u5f0f\uff1b\u8868\u8fde\u63a5\u7684\u987a\u5e8f\uff1b\u8868\u8fde\u63a5\u7684\u65b9\u6cd5\u3002 \u5f53\u4f18\u5316\u5668\u8fdb\u884c\u8868\u8fde\u63a5\u7684\u89c4\u5212\u65f6\uff0c\u5bf9\u4e8eNested Loop Join\u8fde\u63a5\u65b9\u6cd5\uff0c\u5b83\u53ea\u8003\u8651\u4ee5\u4e0b\u8ba1\u5212\uff1a\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u63a5\u64cd\u4f5c\uff0c\u5916\u90e8\u8868\u90fd\u4f1a\u5148\u4e8e\u5185\u90e8\u8868\u88ab\u8bbf\u95ee\u3002\u56e0\u6b64\u5f53\u4f7f\u7528\u5916\u8fde\u63a5\u65f6\uff0c\u5185\u5916\u8868\u5728SQL\u4e2d\u5c31\u88ab\u660e\u786e\u4e86\uff08\u5916\u8868\u4e3a\u5de6\u8fde\u63a5\u7684\u5de6\u8868/\u53f3\u8fde\u63a5\u7684\u53f3\u8868\uff09\uff0c\u4f18\u5316\u5668\u7684\u9009\u62e9\u662f\u6709\u9650\u7684,\u56e0\u800c\u53ef\u80fd\u5bfc\u81f4\u6027\u80fd\u8f83\u4f4e\u7684\u6267\u884c\u8ba1\u5212\u3002 \u4ee5MySQL\u5b98\u65b9\u6587\u6863\u4e0a\u7684 \u4f8b\u5b50 \u6765\u8bf4\u660e\uff1a \u8003\u8651\u4e0b\u9762\u8fd9\u79cd\u5f62\u5f0f\u7684\u67e5\u8be2\uff0c\u5176\u4e2d R(T2) \u6781\u5927\u5730\u8fc7\u6ee4\u4e86\u6765\u81ea T2 \u8868\u7684\u5339\u914d\u884c\u6570: SELECT * T1 FROM T1 LEFT JOIN T2 ON P1(T1,T2) WHERE P(T1,T2) AND R(T2) \u5982\u679c\u6309\u7167\u4e0a\u9762\u6240\u8ff0\u7684\u6267\u884c\u67e5\u8be2\uff0c\u4f18\u5316\u5668\u6ca1\u6709\u9009\u62e9\u4f59\u5730\uff0c\u53ea\u80fd\u5148\u8bbf\u95ee\u9650\u5236\u8f83\u5c11\u7684 T1 \u8868\uff0c\u7136\u540e\u518d\u8bbf\u95ee\u9650\u5236\u8f83\u591a\u7684 T2 \u8868\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u975e\u5e38\u4f4e\u6548\u7684\u6267\u884c\u8ba1\u5212\u3002 \u5bf9\u4e8e\u5168\u5916\u8fde\u63a5\uff0c\u4f18\u5316\u5668\u4e00\u822c\u662f\u5c06\u5176\u8f6c\u5316\u4e3a\u4e00\u4e2a\u5de6\u5916\u8054\u673a\u548c\u53f3\u5916\u8fde\u63a5\u7684UNION\u6216\u662f\u91c7\u7528FULL OUTER HASH JOIN\u8fdb\u884c\u6267\u884c\uff0c\u4f1a\u4ea7\u751f\u7c7b\u4f3c\u7684\u6027\u80fd\u95ee\u9898\u3002","title":"\u8fde\u63a5\u7c7b\u578b\u5bf9\u6267\u884c\u8ba1\u5212\u7684\u5f71\u54cd"},{"location":"pawreference/Outer2Inner/#_4","text":"\u5982\u679cR(T2) \u662f\u4e00\u4e2a\u7a7a\u62d2\u7edd\u6761\u4ef6\u6761\u4ef6(NFC)\uff0c\u90a3\u4e48\u4ee5\u4e0a\u7684\u5916\u8fde\u63a5\u53ef\u4ee5\u8f6c\u5316\u4e3a\u5185\u8fde\u63a5\uff0c\u5373 SELECT * T1 FROM T1 JOIN T2 ON P1(T1,T2) WHERE P(T1,T2) AND R(T2) \u8fd9\u6837\uff0c\u4f18\u5316\u5668\u53ef\u4ee5\u5148\u5e94\u7528R(T2) \uff0c\u83b7\u53d6\u975e\u5e38\u5c0f\u7684\u7ed3\u679c\u96c6\uff0c\u7136\u540e\u518d\u548cT1\u8fdb\u884c\u5173\u8054\u3002","title":"\u5916\u8fde\u63a5\u7b80\u5316\u91cd\u5199"},{"location":"pawreference/Outer2Inner/#nfcnull-filtered-condition","text":"\u7a7a\u62d2\u7edd\u6761\u4ef6\u6307\u7684\u662f\uff0c\u5982\u679c\u8f93\u5165\u4e3aNULL\uff0c\u5219\u5176\u5224\u65ad\u7ed3\u679c\u4e3afalse\u6216\u662funknown\uff0c\u5bfc\u81f4\u8be5\u884c\u88ab\u8fc7\u6ee4\u6389\u7684\u6761\u4ef6\u3002\u5224\u65ad\u67d0\u4e2a\u6761\u4ef6\u662f\u5426\u4e3a\u5916\u8fde\u63a5\u64cd\u4f5c\u7684\u7a7a\u62d2\u7edd\u6761\u4ef6\uff08NFC\uff09\u7684\u89c4\u5219\u5f88\u7b80\u5355: \u5b83\u662f A IS NOT NULL \u7684\u5f62\u5f0f\uff0c\u5176\u4e2d A \u662f\u5185\u8868\u7684\u4efb\u4f55\u5c5e\u6027 \u5b83\u662f\u5305\u542b\u5185\u8868\u5f15\u7528\u7684\u8c13\u8bcd\uff0c\u5f53\u5176\u4e2d\u4e00\u4e2a\u53c2\u6570\u4e3a NULL \u65f6\u8bc4\u4f30\u4e3a UNKNOWN \u5b83\u662f\u5305\u542b\u7a7a\u62d2\u7edd\u6761\u4ef6\u7684\u201c\u4e0e\u5173\u8054\u201d\uff08AND\uff09\u7ec4\u5408 \u5b83\u662f\u7a7a\u62d2\u7edd\u6761\u4ef6\u7684\u201c\u6216\u5173\u8054\u201d\uff08OR\uff09\u7ec4\u5408 \u56e0\u6b64\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u5916\u8fde\u63a5: T1 LEFT JOIN T2 ON T1.A=T2.A \u4ee5\u4e0b\u7684\u6761\u4ef6\u88ab\u89c6\u4e3a\u7a7a\u62d2\u7edd\u6761\u4ef6\uff1a T2.B IS NOT NULL T2.B > 3 T2.C <= T1.C T1.B < 3 AND T2.B IS NOT NULL T2.B < 2 OR T2.C > 1 \u4ee5\u4e0b\u7684\u6761\u4ef6\u4e0d\u88ab\u89c6\u4e3a\u7a7a\u62d2\u7edd\u6761\u4ef6: T2.B IS NULL T1.B < 3 OR T2.B IS NOT NULL T1.B < 3 OR T2.B > 3 T2.B in (1,2, NULL)","title":"NFC\u6761\u4ef6\uff08NULL Filtered Condition\uff09"},{"location":"pawreference/Outer2Inner/#_5","text":"\u7edd\u5927\u591a\u6570\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4f18\u5316\u5668\u90fd\u80fd\u591f\u63d0\u4f9b\u4e0a\u8ff0\u7684\u5916\u8fde\u63a5\u7b80\u5316\u91cd\u5199\u3002\u4e0b\u9762\u4ee5\u4e00\u4e2a\u6848\u4f8b\u6765\u793a\u4f8b\u5728MySQL\u548cPostgreSQL\u4e2d\u7684\u5916\u8fde\u63a5\u7b80\u5316\u91cd\u5199\u3002 \u793a\u4f8bSQL\u8bed\u53e5 select c_custkey from orders left join customer on c_custkey=o_custkey where C_NATIONKEY < 20 MySQL\u6267\u884c\u8ba1\u5212 -> Inner hash join (orders.O_CUSTKEY = customer.C_CUSTKEY) (cost=20541.08 rows=20013) -> Table scan on orders (cost=2529.21 rows=200128) -> Hash -> Filter: (customer.C_NATIONKEY < 20) (cost=0.35 rows=1) -> Table scan on customer (cost=0.35 rows=1) PostgreSQL Hash Join (cost=100.19..410.47 rows=33 width=4) Hash Cond: (orders.o_custkey = customer.c_custkey) -> Seq Scan on orders (cost=0.00..284.01 rows=10001 width=4) -> Hash (cost=99.78..99.78 rows=33 width=4) -> Bitmap Heap Scan on customer (cost=4.54..99.78 rows=33 width=4) Recheck Cond: (c_nationkey < 20) -> Bitmap Index Scan on c_nationkey_idx (cost=0.00..4.53 rows=33 width=0) Index Cond: (c_nationkey < 20) \u4ece\u6267\u884c\u8ba1\u5212\u6765\u770b\uff0cMySQL\u548cPostgreSQL\u90fd\u652f\u6301\u5916\u8fde\u63a5\u5230\u5185\u8fde\u63a5\u7684\u91cd\u5199\u4f18\u5316\u3002","title":"\u6570\u636e\u5e93\u4e2d\u7684\u5916\u8fde\u63a5\u7b80\u5316"},{"location":"pawreference/Outer2Inner/#pawsql","text":"PawSQL\u5b9e\u73b0\u901a\u8fc7Outer2InnerConversionRewrite\u89c4\u5219\u5b9e\u73b0\u4e86\u7c7b\u4f3c\u7684\u91cd\u5199\u4f18\u5316\uff0c\u5b83\u652f\u6301\u5de6\u5916\u8fde\u63a5\u3001\u53f3\u5916\u8fde\u63a5\u5230\u5185\u8fde\u63a5\u7684\u91cd\u5199\u4f18\u5316\uff0c\u4ee5\u53ca\u5168\u5916\u8fde\u63a5\u5230\u5de6\u5916\u8054\u673a\u3001\u53f3\u5916\u8fde\u63a5\u6216\u5185\u8fde\u63a5\u7684\u91cd\u5199\u4f18\u5316\u3002 \u91cd\u8981\u63d0\u793a: PawSQL\u5b9e\u73b0Outer2InnerConversionRewrite\u4f18\u5316\u7684\u76ee\u7684\u4e0d\u662f\u4e3a\u4e86\u91cd\u73b0\u6570\u636e\u5e93\u4f18\u5316\u5668\u7684\u91cd\u5199\u4f18\u5316\u903b\u8f91\u3002PawSQL\u5b9e\u73b0\u5b83\u662f\u56e0\u4e3a\u5b83\u53ef\u4ee5\u89e6\u53d1\u6570\u636e\u5e93\u4f18\u5316\u5668\u4e0d\u80fd\u5b9e\u73b0\u7684\u7d22\u5f15\u63a8\u8350\u529f\u80fd\u3002 \u8f93\u5165SQL\u8bed\u53e5 select c_custkey from orders left join customer on c_custkey=o_custkey where C_NATIONKEY < 20 \u5e94\u7528Outer2InnerConversionRewrite\u540e\u91cd\u5199\u7684SQL\u4e3a\uff1a select c_custkey from orders left join customer on c_custkey=o_custkey where C_NATIONKEY < 20 \u63a8\u8350\u7d22\u5f15 \u91cd\u5199\u540e\u7684SQL\u901a\u8fc7PawSQL\u7d22\u5f15\u63a8\u8350\u5f15\u64ce\u63a8\u8350\u51fa\u5982\u4e0b\u4e24\u4e2a\u7d22\u5f15\u3002 CREATE INDEX CONCURRENTLY PAW_IDX1028958902 ON PUBLIC.ORDERS(O_CUSTKEY); CREATE INDEX CONCURRENTLY PAW_IDX1196677611 ON PUBLIC.CUSTOMER(C_NATIONKEY,C_CUSTKEY); \u6267\u884c\u8ba1\u5212 \u628a\u63a8\u8350\u51fa\u7684\u7d22\u5f15\u7eb3\u5165\u4f18\u5316\u5668\u89c4\u5212\u8303\u56f4\u540e\u7684\u6267\u884c\u8ba1\u5212\u4e3a\uff1a PostgreSQL\u4e0a\u7684\u6267\u884c\u8ba1\u5212 Nested Loop (cost=0.57..85.53 rows=33 width=4) -> Index Only Scan using paw_idx1196677611 on customer (cost=0.29..8.86 rows=33 width=4) Index Cond: (c_nationkey < 20) -> Index Only Scan using paw_idx1028958902 on orders (cost=0.29..2.24 rows=8 width=4) Index Cond: (o_custkey = customer.c_custkey) MySQL\u4e0a\u7684\u6267\u884c\u8ba1\u5212 -> Nested loop inner join (cost=1.91 rows=6) -> Filter: (customer.C_NATIONKEY < 20) (cost=0.35 rows=1) -> Index scan on customer using PAW_IDX1360881332 (cost=0.35 rows=1) -> Covering index lookup on orders using PAW_IDX1028958902 (O_CUSTKEY=customer.C_CUSTKEY) (cost=1.56 rows=6) \u53ef\u4ee5\u770b\u5230\uff0c\u901a\u8fc7PawSQL\u7684\u6574\u4e2a\u4f18\u5316\u6d41\u7a0b\uff0c\u901a\u8fc7\u7d22\u5f15\u63a8\u8350\u5f15\u64ce\u63a8\u8350\u7684\u4e24\u4e2a\u7d22\u5f15\uff0c\u5728\u6570\u636e\u91cf\u8f83\u5c0f\u7684PostgreSQL\u6570\u636e\u5e93\u4e0a\uff0c\u67e5\u8be2\u7684\u4ee3\u4ef7\u4ece410.47\u51cf\u4f4e\u523085.53\uff0c\u6027\u80fd\u63d0\u5347\u4e86379.91%\u3002\u800c\u5728\u6570\u636e\u91cf\u8f83\u5927\u7684MySQL\u6570\u636e\u5e93\u670d\u52a1\u5668\u4e0a\uff0c\u67e5\u8be2\u4ee3\u4ef7\u4ece20541.08\u964d\u4f4e\u52301.91\uff0c\u6027\u80fd\u63d0\u5347\u4e86553161.15%\u3002 \u9898\u5916\u8bdd\uff1a\u6d4b\u8bd5\u8fd9\u4e2a\u529f\u80fd\u662f\uff0c\u53d1\u73b0\u4e00\u4e2a\u77e5\u8bc6\u70b9\uff0c\u5728MySQL\u4e2d\uff0c\u5982\u679c\u67d0\u4e2a\u5b57\u6bb5\u88ab\u5b9a\u4e49\u4e3a\u5916\u952e\uff0c\u9ed8\u8ba4\u4f1a\u6709\u5bf9\u5e94\u7684\u7d22\u5f15\u5efa\u7acb\u5728\u4e0a\u9762\uff1b\u800c\u5728PostgreSQL\u7cfb\u5217\u7684\u6570\u636e\u5e93\u4e2d\uff0c\u5c06\u67d0\u4e9b\u5b57\u6bb5\u8bbe\u7f6e\u5916\u952e\u5e76\u4e0d\u4f1a\u81ea\u52a8\u5728\u8fd9\u4e9b\u5b57\u6bb5\u4e0a\u5efa\u4e0a\u7d22\u5f15\u3002","title":"PawSQL\u4e2d\u7684\u5916\u8fde\u63a5\u91cd\u5199\u4f18\u5316"},{"location":"pawreference/Outer2Inner/#_6","text":"\u90ae\u4ef6\uff1a service@pawsql.com Twitter: https://twitter.com/pawsql \u626b\u63cf\u5173\u6ce8PawSQL\u516c\u4f17\u53f7","title":"\u8054\u7cfb\u6211\u4eec"},{"location":"pawreference/Projection%20Pushdown/","text":"Projection Pushdown \u00b6 Channel of advanced SQL tuning Definition \u00b6 By enabling Projection Pushdown rule, PawSQL eliminates the columns in derived tables, common table expressions and views(after resolving), which are not referenced in outer query blocks, to: - reduce the IO cost - reduce the network cost - enable index recommendation of index-only strategy This justification is similar to rule [RuleStarInSelectList], but PawSQL supplies a rewrite optimization instead of only warning for star in select list scenario. We will use derived table in following paragraph, but all the descriptions also apply to common table expressions and resolved views. Conditions \u00b6 There is no star , except for count(*) , in outer query block, There is no star in the derived table or the common table expression being projection-pushdowned There are some select elements in a derived table or a common table expression which are not referenced in outer query block. Example \u00b6 Derived Table original query select c.c_name, sum(o_totalprice) price FROM customer c, (select c_name, o_custkey, o_totalprice from orders where o_orderpriority=0) dt where c.c_custkey = dt.o_custkey group by c.c_name rewritten query select c.c_name, sum(dt.o_totalprice) as price from customer as c, ( select orders.o_custkey, orders.o_totalprice from orders where orders.o_orderpriority = 0) as dt where c.c_custkey = dt.o_custkey group by c.c_name Common Table Expression original query with dt as ( select c_name, o_custkey, o_totalprice from orders where o_orderpriority=0) select c.c_name, sum(o_totalprice) price from customer c, dt where c.c_custkey = dt.o_custkey group by c.c_name rewritten query with dt as (select orders.o_custkey, orders.o_totalprice from orders where orders.o_orderpriority = 0) select c.c_name, sum(dt.o_totalprice) as price from customer as c, dt where c.c_custkey = dt.o_custkey group by c.c_name Optimization Enablements \u00b6 Projection Pushdown will enable other optimizations in PawSQL and in database engine: Optimizations enabled in PawSQL index recommendation of index-only strategy Optimizations enabled in Database engine index only access in query plan","title":"\u6295\u5f71\u4e0b\u63a8"},{"location":"pawreference/Projection%20Pushdown/#projection-pushdown","text":"Channel of advanced SQL tuning","title":"Projection Pushdown"},{"location":"pawreference/Projection%20Pushdown/#definition","text":"By enabling Projection Pushdown rule, PawSQL eliminates the columns in derived tables, common table expressions and views(after resolving), which are not referenced in outer query blocks, to: - reduce the IO cost - reduce the network cost - enable index recommendation of index-only strategy This justification is similar to rule [RuleStarInSelectList], but PawSQL supplies a rewrite optimization instead of only warning for star in select list scenario. We will use derived table in following paragraph, but all the descriptions also apply to common table expressions and resolved views.","title":"Definition"},{"location":"pawreference/Projection%20Pushdown/#conditions","text":"There is no star , except for count(*) , in outer query block, There is no star in the derived table or the common table expression being projection-pushdowned There are some select elements in a derived table or a common table expression which are not referenced in outer query block.","title":"Conditions"},{"location":"pawreference/Projection%20Pushdown/#example","text":"Derived Table original query select c.c_name, sum(o_totalprice) price FROM customer c, (select c_name, o_custkey, o_totalprice from orders where o_orderpriority=0) dt where c.c_custkey = dt.o_custkey group by c.c_name rewritten query select c.c_name, sum(dt.o_totalprice) as price from customer as c, ( select orders.o_custkey, orders.o_totalprice from orders where orders.o_orderpriority = 0) as dt where c.c_custkey = dt.o_custkey group by c.c_name Common Table Expression original query with dt as ( select c_name, o_custkey, o_totalprice from orders where o_orderpriority=0) select c.c_name, sum(o_totalprice) price from customer c, dt where c.c_custkey = dt.o_custkey group by c.c_name rewritten query with dt as (select orders.o_custkey, orders.o_totalprice from orders where orders.o_orderpriority = 0) select c.c_name, sum(dt.o_totalprice) as price from customer as c, dt where c.c_custkey = dt.o_custkey group by c.c_name","title":"Example"},{"location":"pawreference/Projection%20Pushdown/#optimization-enablements","text":"Projection Pushdown will enable other optimizations in PawSQL and in database engine: Optimizations enabled in PawSQL index recommendation of index-only strategy Optimizations enabled in Database engine index only access in query plan","title":"Optimization Enablements"},{"location":"pawreference/Query%20Folding/","text":"Query Folding \u00b6 Channel of advanced SQL tuning Definition \u00b6 By enabling Query Folding rule, PawSQL merges view references, derived tables and common table expressions to outer query blocks to: - avoid materializing intermediate resultset - enable more join order planning - enable more opportunities for index recommendation We will use view in following paragraph, but all the descriptions also apply to derived tables and common table expressions. Example - original query SELECT * FROM (SELECT c_custkey, c_name FROM customer) AS derived_t1; rewritten query SELECT c_custkey, c_name FROM customer Conditions \u00b6 PawSQL rewrite engine supports two types of query folding strategies, Type 1 - In view itself, there is no distinct or aggregation. - In outer query block, view being folded is not part of an outer join. Type 2 - In outer query block, the view is the only table reference - In outer query block, there is no group by clause and no aggregate functions. Examples \u00b6 Type 1 Query Folding \u00b6 Original query with dt as ( SELECT o_custkey, O_TOTALPRICE FROM orders where o_shippriority=0 ) select c.c_name, sum(O_TOTALPRICE) price FROM customer c, dt WHERE c.c_custkey = dt.o_custkey group by c.c_name Query plan of original query -> Table scan on < temporary > -> Aggregate using temporary table -> Nested loop inner join ( cost = 3806388 . 23 rows = 3400871 ) -> Table scan on dt ( cost = 0 . 01 .. 2494 . 72 rows = 199378 ) -> Materialize CTE dt ( cost = 62935 . 41 .. 65430 . 12 rows = 199378 ) -> Table scan on < temporary > ( cost = 0 . 01 .. 2494 . 72 rows = 199378 ) -> Temporary table with deduplication ( cost = 40502 . 89 .. 42997 . 60 rows = 199378 ) -> Table scan on orders ( cost = 20565 . 07 rows = 199378 ) -> Index lookup on c using PAW_IDX1614428511 ( C_CUSTKEY = dt . o_custkey ) ( cost = 17 . 06 rows = 17 ) Optimized query select c.c_name, sum(o_totalprice) as price FROM customer c, orders WHERE c.c_custkey = o_custkey and o_shippriority=0 group by c.c_name Query plan of optimized query -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=394660.89 rows=340087) -> Filter: (orders.O_SHIPPRIORITY = 0) (cost=20565.07 rows=19938) -> Table scan on orders (cost=20565.07 rows=199378) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) Optimization Explaination: We can see there is a Materialization step in the query plan of original query, which results from a huge cost. After the rewrite, the materialization step is elimnated and the estimated cost is aboutt 10% of the orignal cost. Type 2 Query Folding \u00b6 Original query with dt as (select c.c_name, sum(O_TOTALPRICE) price FROM customer c, orders WHERE c.c_custkey = orders.o_custkey group by c.c_name) select dt.price from dt where dt.c_name like '139%'; Query plan of original query -> Table scan on dt (cost=2.50..2.50 rows=0) -> Materialize CTE dt (cost=2.50..2.50 rows=0) -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=3761523.18 rows=377837) -> Table scan on orders (cost=20565.07 rows=199378) -> Filter: (c.C_NAME like '139%') (cost=17.06 rows=2) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) Optimized query select sum(orders.O_TOTALPRICE) from customer as c, orders where c.c_custkey = orders.o_custkey group by c.c_name having c.c_name like '139%' Query plan of optimized query -> Filter: (c.C_NAME like '139%') -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=3761523.18 rows=3400871) -> Table scan on orders (cost=20565.07 rows=199378) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) Optimization Explanation: Like type 1, we can see the materialization step is eliminated after the rewrite optimization. Optimization Enablements \u00b6 View folding will reduce blocks by combining conditions or introducing table joins, which will enable other optimizations in PawSQL and optimizations in database engine: Optimizations enabled in PawSQL more efficient index recommendation Optimizations enabled in Database engine avoiding materializing intermediate resultset more join order planning index usage Let's take the type 1 case as an example, PawSQL Index Advisor engine takes the rewritten query as input and recommended a following index. CREATE INDEX PAW_IDX1564931998 ON TPCH . ORDERS ( O_SHIPPRIORITY , O_CUSTKEY , O_TOTALPRICE ); And the final query plan is as follows. -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=95046.40 rows=85935) -> Covering index lookup on orders using PAW_IDX1564931998 (O_SHIPPRIORITY=0) (cost=517.68 rows=5038) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) In the query plan, we can see we eliminates a table scan, and the estimated cost is further reduced to 95046.40 , which is about 2.5% of the original cost 3806388.23 .","title":"Query Folding"},{"location":"pawreference/Query%20Folding/#query-folding","text":"Channel of advanced SQL tuning","title":"Query Folding"},{"location":"pawreference/Query%20Folding/#definition","text":"By enabling Query Folding rule, PawSQL merges view references, derived tables and common table expressions to outer query blocks to: - avoid materializing intermediate resultset - enable more join order planning - enable more opportunities for index recommendation We will use view in following paragraph, but all the descriptions also apply to derived tables and common table expressions. Example - original query SELECT * FROM (SELECT c_custkey, c_name FROM customer) AS derived_t1; rewritten query SELECT c_custkey, c_name FROM customer","title":"Definition"},{"location":"pawreference/Query%20Folding/#conditions","text":"PawSQL rewrite engine supports two types of query folding strategies, Type 1 - In view itself, there is no distinct or aggregation. - In outer query block, view being folded is not part of an outer join. Type 2 - In outer query block, the view is the only table reference - In outer query block, there is no group by clause and no aggregate functions.","title":"Conditions"},{"location":"pawreference/Query%20Folding/#examples","text":"","title":"Examples"},{"location":"pawreference/Query%20Folding/#type-1-query-folding","text":"Original query with dt as ( SELECT o_custkey, O_TOTALPRICE FROM orders where o_shippriority=0 ) select c.c_name, sum(O_TOTALPRICE) price FROM customer c, dt WHERE c.c_custkey = dt.o_custkey group by c.c_name Query plan of original query -> Table scan on < temporary > -> Aggregate using temporary table -> Nested loop inner join ( cost = 3806388 . 23 rows = 3400871 ) -> Table scan on dt ( cost = 0 . 01 .. 2494 . 72 rows = 199378 ) -> Materialize CTE dt ( cost = 62935 . 41 .. 65430 . 12 rows = 199378 ) -> Table scan on < temporary > ( cost = 0 . 01 .. 2494 . 72 rows = 199378 ) -> Temporary table with deduplication ( cost = 40502 . 89 .. 42997 . 60 rows = 199378 ) -> Table scan on orders ( cost = 20565 . 07 rows = 199378 ) -> Index lookup on c using PAW_IDX1614428511 ( C_CUSTKEY = dt . o_custkey ) ( cost = 17 . 06 rows = 17 ) Optimized query select c.c_name, sum(o_totalprice) as price FROM customer c, orders WHERE c.c_custkey = o_custkey and o_shippriority=0 group by c.c_name Query plan of optimized query -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=394660.89 rows=340087) -> Filter: (orders.O_SHIPPRIORITY = 0) (cost=20565.07 rows=19938) -> Table scan on orders (cost=20565.07 rows=199378) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) Optimization Explaination: We can see there is a Materialization step in the query plan of original query, which results from a huge cost. After the rewrite, the materialization step is elimnated and the estimated cost is aboutt 10% of the orignal cost.","title":"Type 1 Query Folding"},{"location":"pawreference/Query%20Folding/#type-2-query-folding","text":"Original query with dt as (select c.c_name, sum(O_TOTALPRICE) price FROM customer c, orders WHERE c.c_custkey = orders.o_custkey group by c.c_name) select dt.price from dt where dt.c_name like '139%'; Query plan of original query -> Table scan on dt (cost=2.50..2.50 rows=0) -> Materialize CTE dt (cost=2.50..2.50 rows=0) -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=3761523.18 rows=377837) -> Table scan on orders (cost=20565.07 rows=199378) -> Filter: (c.C_NAME like '139%') (cost=17.06 rows=2) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) Optimized query select sum(orders.O_TOTALPRICE) from customer as c, orders where c.c_custkey = orders.o_custkey group by c.c_name having c.c_name like '139%' Query plan of optimized query -> Filter: (c.C_NAME like '139%') -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=3761523.18 rows=3400871) -> Table scan on orders (cost=20565.07 rows=199378) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) Optimization Explanation: Like type 1, we can see the materialization step is eliminated after the rewrite optimization.","title":"Type 2 Query Folding"},{"location":"pawreference/Query%20Folding/#optimization-enablements","text":"View folding will reduce blocks by combining conditions or introducing table joins, which will enable other optimizations in PawSQL and optimizations in database engine: Optimizations enabled in PawSQL more efficient index recommendation Optimizations enabled in Database engine avoiding materializing intermediate resultset more join order planning index usage Let's take the type 1 case as an example, PawSQL Index Advisor engine takes the rewritten query as input and recommended a following index. CREATE INDEX PAW_IDX1564931998 ON TPCH . ORDERS ( O_SHIPPRIORITY , O_CUSTKEY , O_TOTALPRICE ); And the final query plan is as follows. -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=95046.40 rows=85935) -> Covering index lookup on orders using PAW_IDX1564931998 (O_SHIPPRIORITY=0) (cost=517.68 rows=5038) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) In the query plan, we can see we eliminates a table scan, and the estimated cost is further reduced to 95046.40 , which is about 2.5% of the original cost 3806388.23 .","title":"Optimization Enablements"},{"location":"pawreference/RuleQueryFoldingRewrite/","text":"Query Folding \u00b6 Channel of advanced SQL tuning Definition \u00b6 By enabling Query Folding rule, PawSQL merges view references, derived tables and common table expressions to outer query blocks to: - avoid materializing intermediate resultset - enable more join order planning - enable more opportunities for index recommendation We will use view in following paragraph, but all the descriptions also apply to derived tables and common table expressions. Example - original query SELECT * FROM (SELECT c_custkey, c_name FROM customer) AS derived_t1; rewritten query SELECT c_custkey, c_name FROM customer Conditions \u00b6 PawSQL rewrite engine supports two types of query folding strategies, Type 1 - In view itself, there is no distinct or aggregation. - In outer query block, view being folded is not part of an outer join. Type 2 - In outer query block, the view is the only table reference - In outer query block, there is no group by clause and no aggregate functions. Examples \u00b6 Type 1 Query Folding \u00b6 Original query with dt as ( SELECT o_custkey, O_TOTALPRICE FROM orders where o_shippriority=0 ) select c.c_name, sum(O_TOTALPRICE) price FROM customer c, dt WHERE c.c_custkey = dt.o_custkey group by c.c_name Query plan of original query -> Table scan on < temporary > -> Aggregate using temporary table -> Nested loop inner join ( cost = 3806388 . 23 rows = 3400871 ) -> Table scan on dt ( cost = 0 . 01 .. 2494 . 72 rows = 199378 ) -> Materialize CTE dt ( cost = 62935 . 41 .. 65430 . 12 rows = 199378 ) -> Table scan on < temporary > ( cost = 0 . 01 .. 2494 . 72 rows = 199378 ) -> Temporary table with deduplication ( cost = 40502 . 89 .. 42997 . 60 rows = 199378 ) -> Table scan on orders ( cost = 20565 . 07 rows = 199378 ) -> Index lookup on c using PAW_IDX1614428511 ( C_CUSTKEY = dt . o_custkey ) ( cost = 17 . 06 rows = 17 ) Optimized query select c.c_name, sum(o_totalprice) as price FROM customer c, orders WHERE c.c_custkey = o_custkey and o_shippriority=0 group by c.c_name Query plan of optimized query -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=394660.89 rows=340087) -> Filter: (orders.O_SHIPPRIORITY = 0) (cost=20565.07 rows=19938) -> Table scan on orders (cost=20565.07 rows=199378) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) Optimization Explaination: We can see there is a Materialization step in the query plan of original query, which results from a huge cost. After the rewrite, the materialization step is elimnated and the estimated cost is aboutt 10% of the orignal cost. Type 2 Query Folding \u00b6 Original query with dt as (select c.c_name, sum(O_TOTALPRICE) price FROM customer c, orders WHERE c.c_custkey = orders.o_custkey group by c.c_name) select dt.price from dt where dt.c_name like '139%'; Query plan of original query -> Table scan on dt (cost=2.50..2.50 rows=0) -> Materialize CTE dt (cost=2.50..2.50 rows=0) -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=3761523.18 rows=377837) -> Table scan on orders (cost=20565.07 rows=199378) -> Filter: (c.C_NAME like '139%') (cost=17.06 rows=2) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) Optimized query select sum(orders.O_TOTALPRICE) from customer as c, orders where c.c_custkey = orders.o_custkey group by c.c_name having c.c_name like '139%' Query plan of optimized query -> Filter: (c.C_NAME like '139%') -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=3761523.18 rows=3400871) -> Table scan on orders (cost=20565.07 rows=199378) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) Optimization Explanation: Like type 1, we can see the materialization step is eliminated after the rewrite optimization. Optimization Enablements \u00b6 View folding will reduce blocks by combining conditions or introducing table joins, which will enable other optimizations in PawSQL and optimizations in database engine: Optimizations enabled in PawSQL more efficient index recommendation Optimizations enabled in Database engine avoiding materializing intermediate resultset more join order planning index usage Let's take the type 1 case as an example, PawSQL Index Advisor engine takes the rewritten query as input and recommended a following index. CREATE INDEX PAW_IDX1564931998 ON TPCH . ORDERS ( O_SHIPPRIORITY , O_CUSTKEY , O_TOTALPRICE ); And the final query plan is as follows. -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=95046.40 rows=85935) -> Covering index lookup on orders using PAW_IDX1564931998 (O_SHIPPRIORITY=0) (cost=517.68 rows=5038) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) In the query plan, we can see we eliminates a table scan, and the estimated cost is further reduced to 95046.40 , which is about 2.5% of the original cost 3806388.23 .","title":"\u67e5\u8be2\u6298\u53e0"},{"location":"pawreference/RuleQueryFoldingRewrite/#query-folding","text":"Channel of advanced SQL tuning","title":"Query Folding"},{"location":"pawreference/RuleQueryFoldingRewrite/#definition","text":"By enabling Query Folding rule, PawSQL merges view references, derived tables and common table expressions to outer query blocks to: - avoid materializing intermediate resultset - enable more join order planning - enable more opportunities for index recommendation We will use view in following paragraph, but all the descriptions also apply to derived tables and common table expressions. Example - original query SELECT * FROM (SELECT c_custkey, c_name FROM customer) AS derived_t1; rewritten query SELECT c_custkey, c_name FROM customer","title":"Definition"},{"location":"pawreference/RuleQueryFoldingRewrite/#conditions","text":"PawSQL rewrite engine supports two types of query folding strategies, Type 1 - In view itself, there is no distinct or aggregation. - In outer query block, view being folded is not part of an outer join. Type 2 - In outer query block, the view is the only table reference - In outer query block, there is no group by clause and no aggregate functions.","title":"Conditions"},{"location":"pawreference/RuleQueryFoldingRewrite/#examples","text":"","title":"Examples"},{"location":"pawreference/RuleQueryFoldingRewrite/#type-1-query-folding","text":"Original query with dt as ( SELECT o_custkey, O_TOTALPRICE FROM orders where o_shippriority=0 ) select c.c_name, sum(O_TOTALPRICE) price FROM customer c, dt WHERE c.c_custkey = dt.o_custkey group by c.c_name Query plan of original query -> Table scan on < temporary > -> Aggregate using temporary table -> Nested loop inner join ( cost = 3806388 . 23 rows = 3400871 ) -> Table scan on dt ( cost = 0 . 01 .. 2494 . 72 rows = 199378 ) -> Materialize CTE dt ( cost = 62935 . 41 .. 65430 . 12 rows = 199378 ) -> Table scan on < temporary > ( cost = 0 . 01 .. 2494 . 72 rows = 199378 ) -> Temporary table with deduplication ( cost = 40502 . 89 .. 42997 . 60 rows = 199378 ) -> Table scan on orders ( cost = 20565 . 07 rows = 199378 ) -> Index lookup on c using PAW_IDX1614428511 ( C_CUSTKEY = dt . o_custkey ) ( cost = 17 . 06 rows = 17 ) Optimized query select c.c_name, sum(o_totalprice) as price FROM customer c, orders WHERE c.c_custkey = o_custkey and o_shippriority=0 group by c.c_name Query plan of optimized query -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=394660.89 rows=340087) -> Filter: (orders.O_SHIPPRIORITY = 0) (cost=20565.07 rows=19938) -> Table scan on orders (cost=20565.07 rows=199378) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) Optimization Explaination: We can see there is a Materialization step in the query plan of original query, which results from a huge cost. After the rewrite, the materialization step is elimnated and the estimated cost is aboutt 10% of the orignal cost.","title":"Type 1 Query Folding"},{"location":"pawreference/RuleQueryFoldingRewrite/#type-2-query-folding","text":"Original query with dt as (select c.c_name, sum(O_TOTALPRICE) price FROM customer c, orders WHERE c.c_custkey = orders.o_custkey group by c.c_name) select dt.price from dt where dt.c_name like '139%'; Query plan of original query -> Table scan on dt (cost=2.50..2.50 rows=0) -> Materialize CTE dt (cost=2.50..2.50 rows=0) -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=3761523.18 rows=377837) -> Table scan on orders (cost=20565.07 rows=199378) -> Filter: (c.C_NAME like '139%') (cost=17.06 rows=2) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) Optimized query select sum(orders.O_TOTALPRICE) from customer as c, orders where c.c_custkey = orders.o_custkey group by c.c_name having c.c_name like '139%' Query plan of optimized query -> Filter: (c.C_NAME like '139%') -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=3761523.18 rows=3400871) -> Table scan on orders (cost=20565.07 rows=199378) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) Optimization Explanation: Like type 1, we can see the materialization step is eliminated after the rewrite optimization.","title":"Type 2 Query Folding"},{"location":"pawreference/RuleQueryFoldingRewrite/#optimization-enablements","text":"View folding will reduce blocks by combining conditions or introducing table joins, which will enable other optimizations in PawSQL and optimizations in database engine: Optimizations enabled in PawSQL more efficient index recommendation Optimizations enabled in Database engine avoiding materializing intermediate resultset more join order planning index usage Let's take the type 1 case as an example, PawSQL Index Advisor engine takes the rewritten query as input and recommended a following index. CREATE INDEX PAW_IDX1564931998 ON TPCH . ORDERS ( O_SHIPPRIORITY , O_CUSTKEY , O_TOTALPRICE ); And the final query plan is as follows. -> Table scan on <temporary> -> Aggregate using temporary table -> Nested loop inner join (cost=95046.40 rows=85935) -> Covering index lookup on orders using PAW_IDX1564931998 (O_SHIPPRIORITY=0) (cost=517.68 rows=5038) -> Index lookup on c using PAW_IDX1614428511 (C_CUSTKEY=orders.O_CUSTKEY) (cost=17.06 rows=17) In the query plan, we can see we eliminates a table scan, and the estimated cost is further reduced to 95046.40 , which is about 2.5% of the original cost 3806388.23 .","title":"Optimization Enablements"},{"location":"pawreference/audit-rules/","text":"Auditing Rules \u00b6 The auditing rules is from the industry's best practices for query optimization for relational databases. Update with limit \u00b6 Update statements with limit clause can lead to unexpected operation results among multiple runs or slave relay, especailly under a multi-server senario. Positive Case Negative Case update customer set c_custkey = 100 where c_name = 'Ray' limit 1 ; -- Vilation: true update customer set c_custkey = 100 where not c_phone is null ; -- Vilation: false LIMIT with ORDER BY \u00b6 LIMIT queries without ORDER BY clause can result in inconsistent results among multiple executions. Positive Case Negative Case select * from customer where c_name = 'Ray' limit 1 ; -- Vilation: true select * from customer where c_name = 'Ray' order by c_custkey limit 1 ; -- Vilation: false No condidtions for DML statements \u00b6 For Update/merge/delete statements without WHERE condition, or with a condition of where 1=1 , the data malpulation operations will be applied to all rows in the table, which is dangerose and may cause performance issues. Positive Case Negative Case select * from customer where c_name = 'Ray' limit 1 ; -- Vilation: true select * from customer where c_name = 'Ray' order by c_custkey limit 1 ; - Vilation : false INSERT without column names \u00b6 The insert statements should specify column name which can reduce the possibility of misalignment between the inserted values and the columns of the result table. [CASES TO BE ADDED] Avoid starting with wildcard in a LIKE predicate; \u00b6 Unable to quickly locate records using indexes, resulting in full table scans. [CASES TO BE ADDED] Avoid using functional operations on conditional fields; \u00b6 Unable to quickly locate records using indexes, resulting in full table scans. [CASES TO BE ADDED] Avoid implicit conversions on conditional fields; \u00b6 Conditional fields have implicit conversions of numeric values and characters; Unable to quickly locate records using indexes, resulting in full table scans. [CASES TO BE ADDED] Avoid SELECT * \u00b6 The select * syntax is not recommended; Affects subsequent optimization logic and is difficult to maintain. [CASES TO BE ADDED] The level of nested queries exceed the specified threshold \u00b6 SQL that is too complex affects the performance of the plan and is prone to poor performance execution plans. the default value of threshold is 2. [CASES TO BE ADDED] The number of tables in one query block using should not to exceed the threshold \u00b6 SQL that is too complex affects the performance of plan generation and is prone to poor performance execution plans. The default value of threshold is 5. [CASES TO BE ADDED] Use select with \"for update\"\uff1b \u00b6 For update lock tables or lock records. [CASES TO BE ADDED] The number of values of insert statement not exceeding the threshold (default is 500) \u00b6 [CASES TO BE ADDED] Query statements without conditions \u00b6 SQL statements without \"where\" conditions, or with \"where 1=1\", etc, are used, and there are no group aggregation and limit statements. [CASES TO BE ADDED] UNION to UNION ALL rewrite \u00b6 Unions need to be grouped and deduplication, which affects performance. [CASES TO BE ADDED]","title":"Auditing Rules"},{"location":"pawreference/audit-rules/#auditing-rules","text":"The auditing rules is from the industry's best practices for query optimization for relational databases.","title":"Auditing Rules"},{"location":"pawreference/audit-rules/#update-with-limit","text":"Update statements with limit clause can lead to unexpected operation results among multiple runs or slave relay, especailly under a multi-server senario. Positive Case Negative Case update customer set c_custkey = 100 where c_name = 'Ray' limit 1 ; -- Vilation: true update customer set c_custkey = 100 where not c_phone is null ; -- Vilation: false","title":"Update with limit"},{"location":"pawreference/audit-rules/#limit-with-order-by","text":"LIMIT queries without ORDER BY clause can result in inconsistent results among multiple executions. Positive Case Negative Case select * from customer where c_name = 'Ray' limit 1 ; -- Vilation: true select * from customer where c_name = 'Ray' order by c_custkey limit 1 ; -- Vilation: false","title":"LIMIT with ORDER BY"},{"location":"pawreference/audit-rules/#no-condidtions-for-dml-statements","text":"For Update/merge/delete statements without WHERE condition, or with a condition of where 1=1 , the data malpulation operations will be applied to all rows in the table, which is dangerose and may cause performance issues. Positive Case Negative Case select * from customer where c_name = 'Ray' limit 1 ; -- Vilation: true select * from customer where c_name = 'Ray' order by c_custkey limit 1 ; - Vilation : false","title":"No condidtions for DML statements"},{"location":"pawreference/audit-rules/#insert-without-column-names","text":"The insert statements should specify column name which can reduce the possibility of misalignment between the inserted values and the columns of the result table. [CASES TO BE ADDED]","title":"INSERT without column names"},{"location":"pawreference/audit-rules/#avoid-starting-with-wildcard-in-a-like-predicate","text":"Unable to quickly locate records using indexes, resulting in full table scans. [CASES TO BE ADDED]","title":"Avoid starting with wildcard in a LIKE predicate;"},{"location":"pawreference/audit-rules/#avoid-using-functional-operations-on-conditional-fields","text":"Unable to quickly locate records using indexes, resulting in full table scans. [CASES TO BE ADDED]","title":"Avoid using functional operations on conditional fields;"},{"location":"pawreference/audit-rules/#avoid-implicit-conversions-on-conditional-fields","text":"Conditional fields have implicit conversions of numeric values and characters; Unable to quickly locate records using indexes, resulting in full table scans. [CASES TO BE ADDED]","title":"Avoid implicit conversions on conditional fields;"},{"location":"pawreference/audit-rules/#avoid-select","text":"The select * syntax is not recommended; Affects subsequent optimization logic and is difficult to maintain. [CASES TO BE ADDED]","title":"Avoid SELECT *"},{"location":"pawreference/audit-rules/#the-level-of-nested-queries-exceed-the-specified-threshold","text":"SQL that is too complex affects the performance of the plan and is prone to poor performance execution plans. the default value of threshold is 2. [CASES TO BE ADDED]","title":"The level of nested queries exceed the specified threshold"},{"location":"pawreference/audit-rules/#the-number-of-tables-in-one-query-block-using-should-not-to-exceed-the-threshold","text":"SQL that is too complex affects the performance of plan generation and is prone to poor performance execution plans. The default value of threshold is 5. [CASES TO BE ADDED]","title":"The number of tables in one query block using should not to exceed the threshold"},{"location":"pawreference/audit-rules/#use-select-with-for-update","text":"For update lock tables or lock records. [CASES TO BE ADDED]","title":"Use select with \"for update\"\uff1b"},{"location":"pawreference/audit-rules/#the-number-of-values-of-insert-statement-not-exceeding-the-threshold-default-is-500","text":"[CASES TO BE ADDED]","title":"The number of values of insert statement not exceeding the threshold (default is 500)"},{"location":"pawreference/audit-rules/#query-statements-without-conditions","text":"SQL statements without \"where\" conditions, or with \"where 1=1\", etc, are used, and there are no group aggregation and limit statements. [CASES TO BE ADDED]","title":"Query statements without conditions"},{"location":"pawreference/audit-rules/#union-to-union-all-rewrite","text":"Unions need to be grouped and deduplication, which affects performance. [CASES TO BE ADDED]","title":"UNION to UNION ALL rewrite"},{"location":"pawreference/datatype-mismatching/","text":"Implicit Data Type Conversion \u00b6 Channel of advanced SQL tuning Problem \u00b6 Let's say the O_ORDERDATE column in TPCH.ORDERS table is defined as VARCHAR(16) , and there is an index ORDDATE_IDX on ORDERS(O_ORDERDATE) to accelerate the queries against this table if there is a condition on O_ORDERDATE . If we want to count the number of orders of today using following SQL query. select count ( * ) from ORDERS where O_ORDERDATE = current_date (); Use explain to get the query plan: -> Filter : ( orders . O_ORDERDATE = < cache > ( curdate ())) ( cost = 2621 . 05 rows = 19938 ) -> Table scan on ORDERS ( cost = 2621 . 05 rows = 199378 ) From the query plan, we can see the database optimizer uses a table scan instead of the index lookup as we expected. The query cost is high. Diagnosis \u00b6 Let's replace the function call current_date() with a string value '2022-09-08' , select count ( * ) from ORDERS where O_ORDERDATE = '2022-09-08' ; Use explain to get the query plan: -> Aggregate : count ( 0 ) ( cost = 0 . 50 rows = 1 ) -> Filter : ( orders . O_ORDERDATE = '2022-09-08' ) ( cost = 0 . 40 rows = 1 ) -> Covering index lookup on ORDERS using PAW_IDX1264424863 ( O_ORDERDATE = '2022-09-08' ) ( cost = 0 . 40 rows = 1 ) From the query plan , we can see the database optimizer chooses index lookup using index ORDDATE_IDX and the cost is less than 1% of the previous SQL query. Diagnosis: The problem is because of the implicit data type conversion applied on O_ORDERDATE and this conversion disables the index application. When the data types of expressions in a predicate are different, there will be some implicit data type convention operations during query execution (MySQL) 1 . For implicit conventions, some times it happens to the constants in the predicate, sometimes it happens to the column in the predicate. When the convention is applied on the column, the candidate indexes will not be considered during query execution and leading to serious performance problems. Solution \u00b6 The straight solution is to ensure the expressions used in filtering conditions have the same data type to the column's. For the problematic SQL query, 1. we can either define the O_ORDERDATE as DATE type, or we can use type conversion function cast to make sure the filtering constant with the same data type of column. But both solutions are very prone to mis-usage and time consuming, because the developers need to have the knowledge and check the table definitions from time to time. That is where the query tuning tool, such as PawSQL, fills in. PawSQL auto-rewrites \u00b6 There is a rewrite optimization rule [DiffDataTypeInPredicateRewrite] in PawSQL to automatically detect the data type mis-matching in SQL queries and provide automatic rewrite optmization. Conditions \u00b6 The predicate is between a table column and simple value expressions 2 The table column has a different data type from the simple value expressions. Support following three type of predicates column operator expr column between expr1 and expr2 column in ( expr1 , expr2 , ) Example Cases \u00b6 Case 1 : column operator expr - Input Query select count ( * ) from ORDERS where O_ORDERDATE = current_date (); Query Plan for input query -> Aggregate : count ( orders . O_CUSTKEY ) ( cost = 4614 . 83 rows = 1 ) -> Filter : ( orders . O_ORDERDATE = < cache > ( curdate ())) ( cost = 2621 . 05 rows = 19938 ) -> Table scan on ORDERS ( cost = 2621 . 05 rows = 199378 ) Optimized Query select count ( * ) from TPCH . ORDERS where ORDERS . O_ORDERDATE = cast ( current_date () as CHAR ( 16 )); Query Plan for the optimized query -> Aggregate : count ( 0 ) ( cost = 1 . 20 rows = 1 ) -> Filter : ( orders . O_ORDERDATE = < cache > ( cast ( curdate () as char ( 16 ) charset utf8mb4 ))) ( cost = 1 . 10 rows = 1 ) -> Covering index lookup on ORDERS using o_orderdate_idx ( O_ORDERDATE = cast ( curdate () as char ( 16 ) charset utf8mb4 )) ( cost = 1 . 10 rows = 1 ) Optimization Explanation: O_ORDERDATE is type of CHAR(16) in table definition, and current_date() is type of DATE , so index on O_ORDERDATE is not applicable, and the estimated cost is 4614.83 . PawSQL rewrites current_date() to cast(current_date() as CHAR(16)) , so the index on O_ORDERDATE is chosen by the database optimizer and the cost is reduce to 1.20 , which is less than 0.1%. Case 2 : column between expr1 and expr2 - Input query select count ( * ) from ORDERS where O_ORDERDATE between current_date () and DATE_ADD ( CURRENT_DATE (), INTERVAL 1 DAY ); - Query plan for input query -> Aggregate : count ( orders . O_ORDERKEY ) ( cost = 5057 . 45 rows = 1 ) -> Filter : ( orders . O_ORDERDATE between < cache > ( curdate ()) and < cache > (( curdate () + interval 1 day ))) ( cost = 2842 . 36 rows = 22151 ) -> Table scan on ORDERS ( cost = 2842 . 36 rows = 199378 ) - Optimized query select count ( * ) from TPCH . ORDERS where ORDERS . O_ORDERDATE between cast ( current_date () as CHAR ( 16 )) and cast ( DATE_ADD ( CURRENT_DATE (), interval '1' DAY ) as CHAR ( 16 )) - Query plan for optimized query -> Aggregate : count ( 0 ) ( cost = 1 . 31 rows = 1 ) -> Filter : ( orders . O_ORDERDATE between < cache > ( cast ( curdate () as char ( 16 ) charset utf8mb4 )) and < cache > ( cast (( curdate () + interval '1' day ) as char ( 16 ) charset utf8mb4 ))) ( cost = 1 . 21 rows = 1 ) -> Covering index range scan on ORDERS using o_orderdate_idx over ( '2022-09-14' <= O_ORDERDATE <= '2022-09-15' ) ( cost = 1 . 21 rows = 1 ) __Optimization Explanation:__ `DATE_ADD(CURRENT_DATE(), INTERVAL 1 DAY)` is a nested function and it's final result is type of `DATE`, which is not compatible with `CHAR(16)`. So it's rewritten to cast(DATE_ADD(CURRENT_DATE(), interval '1' DAY) as CHAR(16)). And the cost is reduced to ***1.31*** from ***5057.45***. Case 3 : column in ( expr1 , expr2 , ...) - Input query select count ( * ) from ORDERS where O_ORDERDATE in ( current_date (), '2022-10-01' ); - Query Plan for input query -> Aggregate : count ( 0 ) ( cost = 8602 . 39 rows = 1 ) -> Filter : ( orders . O_ORDERDATE in ( < cache > ( curdate ()), '2022-10-01' )) ( cost = 4614 . 83 rows = 39876 ) -> Index scan on ORDERS using o_orderdate_idx ( cost = 4614 . 83 rows = 199378 ) - Optimized query select count ( * ) from TPCH . ORDERS where ORDERS . O_ORDERDATE in ( cast ( current_date () as CHAR ( 16 )), '2022-10-01' ); - Query plan for optimized query -> Aggregate : count ( 0 ) ( cost = 1 . 62 rows = 1 ) -> Filter : ( orders . O_ORDERDATE in ( < cache > ( cast ( curdate () as char ( 16 ) charset utf8mb4 )), '2022-10-01' )) ( cost = 1 . 42 rows = 2 ) -> Covering index range scan on ORDERS using o_orderdate_idx over ( O_ORDERDATE = '2022-09-14' ) OR ( O_ORDERDATE = '2022-10-01' ) ( cost = 1 . 42 rows = 2 ) __Optimization Explanation:__ `current_date()` is written to `cast(current_date() as CHAR(16))`, and `'2022-10-01'` is type of character string, which is compatible with the type of column `O_ORDERDATE`. It is no need to rewrite it. And the cost is reduced to ***1.62*** from ***8602.39***. For PostgreSQL, instead of applying data type conversion implicitly, there will be an error thrown by the database to notify users there should be some explicit type conventions to add. \u21a9 Simple value expressions refer to constants or expressions/functions which are evaluated to a constant, such as current_date() , 1 + 2 , concate('first name', 'last name') . \u21a9","title":"\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362"},{"location":"pawreference/datatype-mismatching/#implicit-data-type-conversion","text":"Channel of advanced SQL tuning","title":"Implicit Data Type Conversion"},{"location":"pawreference/datatype-mismatching/#problem","text":"Let's say the O_ORDERDATE column in TPCH.ORDERS table is defined as VARCHAR(16) , and there is an index ORDDATE_IDX on ORDERS(O_ORDERDATE) to accelerate the queries against this table if there is a condition on O_ORDERDATE . If we want to count the number of orders of today using following SQL query. select count ( * ) from ORDERS where O_ORDERDATE = current_date (); Use explain to get the query plan: -> Filter : ( orders . O_ORDERDATE = < cache > ( curdate ())) ( cost = 2621 . 05 rows = 19938 ) -> Table scan on ORDERS ( cost = 2621 . 05 rows = 199378 ) From the query plan, we can see the database optimizer uses a table scan instead of the index lookup as we expected. The query cost is high.","title":"Problem"},{"location":"pawreference/datatype-mismatching/#diagnosis","text":"Let's replace the function call current_date() with a string value '2022-09-08' , select count ( * ) from ORDERS where O_ORDERDATE = '2022-09-08' ; Use explain to get the query plan: -> Aggregate : count ( 0 ) ( cost = 0 . 50 rows = 1 ) -> Filter : ( orders . O_ORDERDATE = '2022-09-08' ) ( cost = 0 . 40 rows = 1 ) -> Covering index lookup on ORDERS using PAW_IDX1264424863 ( O_ORDERDATE = '2022-09-08' ) ( cost = 0 . 40 rows = 1 ) From the query plan , we can see the database optimizer chooses index lookup using index ORDDATE_IDX and the cost is less than 1% of the previous SQL query. Diagnosis: The problem is because of the implicit data type conversion applied on O_ORDERDATE and this conversion disables the index application. When the data types of expressions in a predicate are different, there will be some implicit data type convention operations during query execution (MySQL) 1 . For implicit conventions, some times it happens to the constants in the predicate, sometimes it happens to the column in the predicate. When the convention is applied on the column, the candidate indexes will not be considered during query execution and leading to serious performance problems.","title":"Diagnosis"},{"location":"pawreference/datatype-mismatching/#solution","text":"The straight solution is to ensure the expressions used in filtering conditions have the same data type to the column's. For the problematic SQL query, 1. we can either define the O_ORDERDATE as DATE type, or we can use type conversion function cast to make sure the filtering constant with the same data type of column. But both solutions are very prone to mis-usage and time consuming, because the developers need to have the knowledge and check the table definitions from time to time. That is where the query tuning tool, such as PawSQL, fills in.","title":"Solution"},{"location":"pawreference/datatype-mismatching/#pawsql-auto-rewrites","text":"There is a rewrite optimization rule [DiffDataTypeInPredicateRewrite] in PawSQL to automatically detect the data type mis-matching in SQL queries and provide automatic rewrite optmization.","title":"PawSQL auto-rewrites"},{"location":"pawreference/datatype-mismatching/#conditions","text":"The predicate is between a table column and simple value expressions 2 The table column has a different data type from the simple value expressions. Support following three type of predicates column operator expr column between expr1 and expr2 column in ( expr1 , expr2 , )","title":"Conditions"},{"location":"pawreference/datatype-mismatching/#example-cases","text":"Case 1 : column operator expr - Input Query select count ( * ) from ORDERS where O_ORDERDATE = current_date (); Query Plan for input query -> Aggregate : count ( orders . O_CUSTKEY ) ( cost = 4614 . 83 rows = 1 ) -> Filter : ( orders . O_ORDERDATE = < cache > ( curdate ())) ( cost = 2621 . 05 rows = 19938 ) -> Table scan on ORDERS ( cost = 2621 . 05 rows = 199378 ) Optimized Query select count ( * ) from TPCH . ORDERS where ORDERS . O_ORDERDATE = cast ( current_date () as CHAR ( 16 )); Query Plan for the optimized query -> Aggregate : count ( 0 ) ( cost = 1 . 20 rows = 1 ) -> Filter : ( orders . O_ORDERDATE = < cache > ( cast ( curdate () as char ( 16 ) charset utf8mb4 ))) ( cost = 1 . 10 rows = 1 ) -> Covering index lookup on ORDERS using o_orderdate_idx ( O_ORDERDATE = cast ( curdate () as char ( 16 ) charset utf8mb4 )) ( cost = 1 . 10 rows = 1 ) Optimization Explanation: O_ORDERDATE is type of CHAR(16) in table definition, and current_date() is type of DATE , so index on O_ORDERDATE is not applicable, and the estimated cost is 4614.83 . PawSQL rewrites current_date() to cast(current_date() as CHAR(16)) , so the index on O_ORDERDATE is chosen by the database optimizer and the cost is reduce to 1.20 , which is less than 0.1%. Case 2 : column between expr1 and expr2 - Input query select count ( * ) from ORDERS where O_ORDERDATE between current_date () and DATE_ADD ( CURRENT_DATE (), INTERVAL 1 DAY ); - Query plan for input query -> Aggregate : count ( orders . O_ORDERKEY ) ( cost = 5057 . 45 rows = 1 ) -> Filter : ( orders . O_ORDERDATE between < cache > ( curdate ()) and < cache > (( curdate () + interval 1 day ))) ( cost = 2842 . 36 rows = 22151 ) -> Table scan on ORDERS ( cost = 2842 . 36 rows = 199378 ) - Optimized query select count ( * ) from TPCH . ORDERS where ORDERS . O_ORDERDATE between cast ( current_date () as CHAR ( 16 )) and cast ( DATE_ADD ( CURRENT_DATE (), interval '1' DAY ) as CHAR ( 16 )) - Query plan for optimized query -> Aggregate : count ( 0 ) ( cost = 1 . 31 rows = 1 ) -> Filter : ( orders . O_ORDERDATE between < cache > ( cast ( curdate () as char ( 16 ) charset utf8mb4 )) and < cache > ( cast (( curdate () + interval '1' day ) as char ( 16 ) charset utf8mb4 ))) ( cost = 1 . 21 rows = 1 ) -> Covering index range scan on ORDERS using o_orderdate_idx over ( '2022-09-14' <= O_ORDERDATE <= '2022-09-15' ) ( cost = 1 . 21 rows = 1 ) __Optimization Explanation:__ `DATE_ADD(CURRENT_DATE(), INTERVAL 1 DAY)` is a nested function and it's final result is type of `DATE`, which is not compatible with `CHAR(16)`. So it's rewritten to cast(DATE_ADD(CURRENT_DATE(), interval '1' DAY) as CHAR(16)). And the cost is reduced to ***1.31*** from ***5057.45***. Case 3 : column in ( expr1 , expr2 , ...) - Input query select count ( * ) from ORDERS where O_ORDERDATE in ( current_date (), '2022-10-01' ); - Query Plan for input query -> Aggregate : count ( 0 ) ( cost = 8602 . 39 rows = 1 ) -> Filter : ( orders . O_ORDERDATE in ( < cache > ( curdate ()), '2022-10-01' )) ( cost = 4614 . 83 rows = 39876 ) -> Index scan on ORDERS using o_orderdate_idx ( cost = 4614 . 83 rows = 199378 ) - Optimized query select count ( * ) from TPCH . ORDERS where ORDERS . O_ORDERDATE in ( cast ( current_date () as CHAR ( 16 )), '2022-10-01' ); - Query plan for optimized query -> Aggregate : count ( 0 ) ( cost = 1 . 62 rows = 1 ) -> Filter : ( orders . O_ORDERDATE in ( < cache > ( cast ( curdate () as char ( 16 ) charset utf8mb4 )), '2022-10-01' )) ( cost = 1 . 42 rows = 2 ) -> Covering index range scan on ORDERS using o_orderdate_idx over ( O_ORDERDATE = '2022-09-14' ) OR ( O_ORDERDATE = '2022-10-01' ) ( cost = 1 . 42 rows = 2 ) __Optimization Explanation:__ `current_date()` is written to `cast(current_date() as CHAR(16))`, and `'2022-10-01'` is type of character string, which is compatible with the type of column `O_ORDERDATE`. It is no need to rewrite it. And the cost is reduced to ***1.62*** from ***8602.39***. For PostgreSQL, instead of applying data type conversion implicitly, there will be an error thrown by the database to notify users there should be some explicit type conventions to add. \u21a9 Simple value expressions refer to constants or expressions/functions which are evaluated to a constant, such as current_date() , 1 + 2 , concate('first name', 'last name') . \u21a9","title":"Example Cases"},{"location":"pawreference/rewrite-rules/","text":"PawSQL \u4f18\u5316\u7b97\u6cd5\uff08\u7b80\u7565\u7248\uff09 \u00b6 Copyright \u00a9 2022 PawSQL \u8868\u8fde\u63a5\u6d88\u9664 \u00b6 \u8fde\u63a5\u6d88\u9664\uff08Join Elimination\uff09\u901a\u8fc7\u5728\u4e0d\u5f71\u54cd\u6700\u7ec8\u7ed3\u679c\u7684\u60c5\u51b5\u4e0b\u4ece\u67e5\u8be2\u4e2d\u5220\u9664\u8868\uff0c\u6765\u7b80\u5316SQL\u4ee5\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\u3002\u901a\u5e38\uff0c\u5f53\u67e5\u8be2\u5305\u542b\u4e3b\u952e-\u5916\u952e\u8fde\u63a5\u5e76\u4e14\u67e5\u8be2\u4e2d\u4ec5\u5f15\u7528\u4e3b\u8868\u7684\u4e3b\u952e\u5217\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b64\u4f18\u5316\u3002 \u8003\u8651\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c select o . * from orders o inner join customer c on c . c_custkey = o . o_custkey \u8ba2\u5355\u8868\uff08orders\uff09\u548c\u5ba2\u6237\u8868\uff08customer\uff09\u5173\u8054\uff0c\u4e14c_custkey\u662f\u5ba2\u6237\u8868\u7684\u4e3b\u952e\uff0c\u90a3\u4e48\u5ba2\u6237\u8868\u53ef\u4ee5\u88ab\u6d88\u9664\u6389\uff0c\u91cd\u5199\u540e\u7684SQL\u5982\u4e0b\uff1a select * from orders where o_custkey \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 \u5916\u8fde\u63a5\u8f6c\u5316\u4e3a\u5185\u8fde\u63a5 \u00b6 \u5916\u8fde\u63a5\u4f18\u5316\u6307\u7684\u662f\u6ee1\u8db3\u4e00\u5b9a\u6761\u4ef6\uff08\u5916\u8868\u5177\u6709NULL\u62d2\u7edd\u6761\u4ef6\uff09\u7684\u5916\u8fde\u63a5\u53ef\u4ee5\u8f6c\u5316\u4e3a\u5185\u8fde\u63a5\uff0c\u4ece\u800c\u53ef\u4ee5\u8ba9\u6570\u636e\u5e93\u4f18\u5316\u5668\u53ef\u4ee5\u9009\u62e9\u66f4\u4f18\u7684\u6267\u884c\u8ba1\u5212\uff0c\u63d0\u5347SQL\u67e5\u8be2\u7684\u6027\u80fd\u3002 \u8003\u8651\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c select c_custkey from orders left join customer on c_custkey = o_custkey where C_NATIONKEY < 20 C_NATIONKEY < 20 \u662f\u4e00\u4e2acustomer\u8868\u4e0a\u7684NULL\u62d2\u7edd\u6761\u4ef6\uff0c\u6240\u4ee5\u4e0a\u9762\u7684\u5de6\u5916\u8fde\u63a5\u53ef\u4ee5\u91cd\u5199\u4e3a\u5185\u8fde\u63a5\uff0c select c_custkey from orders inner join customer on c_custkey = o_custkey where C_NATIONKEY < 20 \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 SATTC\u91cd\u5199\u4f18\u5316 \u00b6 SAT-TC(SATisfiability-Transitive Closure) \u91cd\u5199\u4f18\u5316\u662f\u6307\u5206\u6790\u4e00\u7ec4\u76f8\u5173\u7684\u67e5\u8be2\u6761\u4ef6\uff0c\u53bb\u53d1\u73b0\u662f\u5426\u6709\u6761\u4ef6\u81ea\u76f8\u77db\u76fe\u3001\u7b80\u5316\u6216\u662f\u63a8\u65ad\u51fa\u65b0\u7684\u6761\u4ef6\uff0c\u4ece\u800c\u5e2e\u52a9\u6570\u636e\u5e93\u4f18\u5316\u5668\u9009\u62e9\u66f4\u597d\u7684\u6267\u884c\u8ba1\u5212\uff0c\u63d0\u5347SQL\u6027\u80fd\u3002 \u8003\u8651\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c select c.c_name FROM customer c where c.c_name = 'John' and c.c_name = 'Jessey' \u7531\u4e8e\u6761\u4ef6\u81ea\u76f8\u77db\u76fe\uff0c\u6240\u4ee5\u91cd\u5199\u540e\u7684SQL\u4e3a\uff0c select c.c_name from customer as c where 1 = 0 \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 \u67e5\u8be2\u6298\u53e0(Query Folding) \u00b6 \u67e5\u8be2\u6298\u53e0\u6307\u7684\u662f\u628a\u89c6\u56fe\u3001CTE\u6216\u662fDT\u5b50\u67e5\u8be2\u5c55\u5f00\uff0c\u5e76\u4e0e\u5f15\u7528\u5b83\u7684\u67e5\u8be2\u8bed\u53e5\u5408\u5e76\uff0c\u6765\u51cf\u5c11\u5e8f\u5217\u5316\u4e2d\u95f4\u7ed3\u679c\u96c6\uff0c\u6216\u662f\u89e6\u53d1\u66f4\u4f18\u7684\u5173\u4e8e\u8868\u8fde\u63a5\u89c4\u5212\u7684\u4f18\u5316\u6280\u672f\u3002 \u8003\u8651\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c SELECT * FROM (SELECT c_custkey, c_name FROM customer) AS derived_t1; \u91cd\u5199\u540e\u7684SQL\u4e3a\uff0c SELECT c_custkey, c_name FROM customer \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 \u6295\u5f71\u4e0b\u63a8(Projection Pushdown) \u00b6 \u6295\u5f71\u4e0b\u63a8\u6307\u7684\u901a\u8fc7\u5220\u9664DT\u5b50\u67e5\u8be2\u4e2d\u65e0\u610f\u4e49\u7684\u5217\uff08\u5728\u5916\u67e5\u8be2\u4e2d\u6ca1\u6709\u4f7f\u7528\uff09\uff0c\u6765\u51cf\u5c11IO\u548c\u7f51\u7edc\u7684\u4ee3\u4ef7\uff0c\u540c\u65f6\u63d0\u5347\u4f18\u5316\u5668\u5728\u8fdb\u884c\u8868\u8bbf\u95ee\u7684\u89c4\u5212\u65f6\uff0c\u91c7\u7528\u65e0\u9700\u56de\u8868\u7684\u4f18\u5316\u9009\u9879\u7684\u51e0\u7387\u3002 \u8003\u8651\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c SELECT count ( 1 ) FROM ( SELECT c_custkey , avg ( age ) FROM customer group by c_custkey ) AS derived_t1 ; \u91cd\u5199\u540e\u7684SQL\u4e3a\uff0c SELECT count ( 1 ) FROM ( SELECT 1 FROM customer group by c_custkey ) AS derived_t1 ; \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 IN\u53ef\u7a7a\u5b50\u67e5\u8be2\u91cd\u5199 \u00b6 \u5bf9\u4e8e\u4ee5\u4e0b\u60f3\u8981\u67e5\u8be2\u6ca1\u6709\u8ba2\u5355\u7528\u6237\u7684SQL\uff0c select * from customer where c_custkey not in ( select o_custkey from orders ) \u5982\u679c\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u91cc\u6709\u7a7a\u503c\uff0c\u8fd9\u4e2aSQL\u6c38\u8fdc\u8fd4\u56de\u4e3a\u7a7a\u3002\u6b63\u786e\u7684\u5199\u6cd5\u5e94\u8be5\u662f\u5728\u5b50\u67e5\u8be2\u91cc\u52a0\u4e0a\u975e\u7a7a\u9650\u5236\uff0c\u5373 select * from customer where c_custkey not in ( select o_custkey from orders where o_custkey is not null ) \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 HAVING \u6761\u4ef6\u4e0b\u63a8\u5230 WHERE \u00b6 \u4ece\u903b\u8f91\u4e0a\uff0cHAVING\u6761\u4ef6\u662f\u5728\u5206\u7ec4\u4e4b\u540e\u6267\u884c\u7684\uff0c\u800cWHERE\u5b50\u53e5\u4e0a\u7684\u6761\u4ef6\u53ef\u4ee5\u5728\u8868\u8bbf\u95ee\u7684\u65f6\u5019\uff08\u7d22\u5f15\u8bbf\u95ee\uff09,\u6216\u662f\u8868\u8bbf\u95ee\u4e4b\u540e\u3001\u5206\u7ec4\u4e4b\u524d\u6267\u884c\uff0c\u8fd9\u4e24\u79cd\u6761\u4ef6\u90fd\u6bd4\u5728\u5206\u7ec4\u4e4b\u540e\u6267\u884c\u4ee3\u4ef7\u8981\u5c0f\u3002 \u8003\u8651\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c select c_custkey , count ( * ) from customer group by c_custkey having c_custkey < 100 \u91cd\u5199\u540e\u7684SQL\u4e3a\uff0c select c_custkey , count ( * ) from customer where c_custkey < 100 group by c_custkey ALL \u4fee\u9970\u7684\u5b50\u67e5\u8be2\u91cd\u5199\u4f18\u5316 \u00b6 \u5047\u8bbe\u901a\u8fc7\u4e0b\u9762\u7684SQL\u6765\u83b7\u53d6\u8ba2\u5355\u7cfb\u7edf\u5173\u95ed\u540e\u6ce8\u518c\u7684\u7528\u6237 select * from customer where c_regdate > all ( select o_orderdate from orders ) \u5982\u679c\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u4e2d\u5b58\u5728NULL\uff0c\u8fd9\u4e2aSQL\u6c38\u8fdc\u8fd4\u56de\u4e3a\u7a7a\u3002\u6b63\u786e\u7684\u5199\u6cd5\u5e94\u8be5\u662f\u5728\u5b50\u67e5\u8be2\u91cc\u52a0\u4e0a\u975e\u7a7a\u9650\u5236\uff0c\u6216\u4f7f\u7528max/min\u7684\u5199\u6cd5 select * from customer where c_regdate > ( select max ( o_custkey ) from orders ) PawSQL\u63a8\u8350\u91c7\u7528\u7b2c\u4e8c\u79cd\u5199\u6cd5\uff0c\u53ef\u4ee5\u901a\u8fc7max/min\u91cd\u5199\u8fdb\u4e00\u6b65\u4f18\u5316SQL\uff0c\u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 MAX/MIN \u5b50\u67e5\u8be2\u91cd\u5199\u4f18\u5316 \u00b6 \u5bf9\u4e8e\u4f7f\u7528MAX/MIN\u7684\u5b50\u67e5\u8be2\uff0c select * from customer where c_custkey = ( select max ( o_custkey ) from orders ) \u53ef\u4ee5\u91cd\u5199\u4e3a\u4ee5\u4e0b\u7684\u5f62\u5f0f\uff0c\u4ece\u800c\u5229\u7528\u7d22\u5f15\u7684\u6709\u5e8f\u6765\u907f\u514d\u4e00\u6b21\u805a\u96c6\u8fd0\u7b97\uff0c select * from customer where c_custkey = ( select o_custkey from orders order by o_custkey desc null last limit 1 ) \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 COUNT \u6807\u91cf\u5b50\u67e5\u8be2\u91cd\u5199\u4f18\u5316 \u00b6 \u5bf9\u4e8e\u4e0b\u9762\u5b50\u67e5\u8be2\uff0c select * from customer where (select count(*) from orders where c_custkey=o_custkey) > 0 \u53ef\u4ee5\u91cd\u5199\u4e3a, \u907f\u514d\u4e86\u4e00\u6b21\u805a\u96c6\u8fd0\u7b97 select * from customer where exists(select 1 from orders where c_custkey=o_custkey) \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 \u907f\u514d\u4f7f\u7528=NULL\u5224\u65ad\u7a7a\u503c \u00b6 =null \u6216\u662f case when null \u5e76\u4e0d\u80fd\u5224\u65ad\u8868\u8fbe\u5f0f\u4e3a\u7a7a, \u5224\u65ad\u8868\u8fbe\u5f0f\u4e3a\u7a7a\u5e94\u8be5\u4f7f\u7528 is null \u3002\u5728SQL\u4e2d\u51fa\u73b0 =null \u6216\u662f case when null \u5927\u6982\u7387\u662f\u5f00\u53d1\u4eba\u5458\u7684\u9519\u8bef\u5199\u6cd5\uff0c\u56e0\u4e3a\u5b83\u4eec\u603b\u662f\u88ab\u5224\u65ad\u4e3a\u5047\uff0c\u548c1=0\u662f\u7b49\u4ef7\u7684\u3002\u6240\u4ee5PawSQL\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u548c\u91cd\u5199\u3002 \u8b6c\u5982\u5982\u4e0b\u7684SQL\uff0c select case c_phone when null then 0 else 1 end from customer ; PawSQL\u4f1a\u5c06\u5176\u91cd\u5199\u4e3a select case when c_phone is null then 0 else 1 end from customer ; \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 \u907f\u514d\u5728\u67e5\u8be2\u4e2d\u4f7f\u7528SELECT * \u00b6 \u5728\u67e5\u8be2\u4e2d\u4f7f\u7528 SELECT * \u7684\u7f3a\u70b9\u5982\u4e0b\uff1a SELECT * \u4e2d\u5982\u679c\u5305\u542b\u65e0\u7528\u7684\u5927\u5b57\u6bb5\uff0c\u5c24\u5176\u662f text /CLOB\u7c7b\u578b\u7684\u5b57\u6bb5\uff0c\u5bb9\u6613\u9020\u6210\u65e0\u8c13\u78c1\u76d8IO\u548c\u7f51\u7edc\u5f00\u9500\uff0c \u4f7f\u7528 SELECT * \u5bb9\u6613\u589e\u52a0\u4ee3\u7801\u7ef4\u62a4\u7684\u6210\u672c\uff0c\u8b6c\u5982\u589e\u51cf\u5b57\u6bb5\u5bb9\u6613\u4e0e resultMap \u914d\u7f6e\u4e0d\u4e00\u81f4\u3001 insert into select * \u65f6\u5b57\u6bb5\u6620\u5c04\u51fa\u9519 \u6570\u636e\u5e93\u4f18\u5316\u5668\u65e0\u6cd5\u8fdb\u884c\u8986\u76d6\u7d22\u5f15\u7684\u89c4\u5212 PawSQL\u7d22\u5f15\u63a8\u8350\u65e0\u6cd5\u63a8\u8350\u8986\u76d6\u7d22\u5f15 \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 \u907f\u514d\u4f7f\u7528\u968f\u673a\u51fd\u6570\u6392\u5e8f \u00b6 MySQL\u7684\u51fd\u6570 rand \u6216PostgreSQL\u7684\u51fd\u6570 random \u4f1a\u8fd4\u56de\u4e00\u4e2a\u5728\u8303\u56f40\u52301.0\u4e4b\u95f4\u7684\u968f\u673a\u6d6e\u70b9\u6570\u3002\u6211\u4eec\u6709\u65f6\u5019\u4f1a\u4f7f\u7528\u4ee5\u4e0b\u67e5\u8be2\u8bed\u53e5\u83b7\u53d6\u6570\u636e\u96c6\u7684\u968f\u673a\u6837\u672c\u3002 select * from orders order by rand () limit 1 ; \u5982\u679c customer \u8868\u5c11\u4e8e10,000\u884c\uff0c\u5219\u6b64\u65b9\u6cd5\u6548\u679c\u5f88\u597d\u3002\u4f46\u662f\u5f53\u60a8\u67091,000,000\u884c\u65f6\uff0c\u6392\u5e8f\u7684\u5f00\u9500\u53d8\u5f97\u4e0d\u53ef\u63a5\u53d7\u3002\u539f\u56e0\u5f88\u660e\u663e\uff1a \u6211\u4eec\u5c06\u6240\u6709\u884c\u6392\u5e8f\uff0c\u4f46\u53ea\u4fdd\u7559\u5176\u4e2d\u7684\u4e00\u884c \u3002\u5176\u5b9e\u6709\u66f4\u9ad8\u6548\u7684\u65b9\u6cd5\u6765\u5b9e\u73b0\u6b64\u9700\u6c42\uff0c\u70b9\u51fb\u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 \u5c3d\u91cf\u4f7f\u7528UNION ALL\u4ee3\u66ffUNION \u00b6 \u4f7f\u7528UNION\u6765\u5f97\u5230\u4e24\u4e2a\u7ed3\u679c\u96c6\u7684\u5e76\u96c6\u65f6\uff0c\u4f1a\u5bf9\u5e76\u96c6\u7684\u7ed3\u679c\u96c6\u8fdb\u884c\u53bb\u91cd\uff0c\u53bb\u91cd\u64cd\u4f5c\u5728\u6570\u636e\u5e93\u5185\u90e8\u662f\u901a\u8fc7\u6392\u5e8f\u6216\u662f\u54c8\u5e0c\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u8fd9\u4e24\u79cd\u65b9\u5f0f\u90fd\u4f1a\u9700\u8981\u5927\u91cf\u7684\u8ba1\u7b97\u8d44\u6e90\u3002\u5982\u679c\u903b\u8f91\u4e0a\u53ef\u4ee5\u4fdd\u8bc1\u4e24\u4e2a\u7ed3\u679c\u96c6\u6ca1\u6709\u91cd\u590d\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528UNION ALL\u6765\u4ee3\u66ffUNION\uff0c\u53ef\u4ee5\u83b7\u5f97\u8f83\u5927\u7684\u6027\u80fd\u63d0\u5347\u3002 \u9650\u5236\u5b50\u67e5\u8be2\u7684\u5d4c\u5957\u5c42\u6b21 \u00b6 \u5b50\u67e5\u8be2\u7684\u5d4c\u5957\u4f1a\u8ba9SQL\u53d8\u5f97\u590d\u6742\uff0c\u800c\u592a\u590d\u6742\u7684SQL\u4f1a\u8ba9\u6570\u636e\u5e93\u7684\u4f18\u5316\u5668\u751f\u6210\u6267\u884c\u8ba1\u5212\u7684\u65f6\u95f4\u6bd4\u8f83\u957f\uff0c\u4e14\u5bb9\u6613\u751f\u6210\u6027\u80fd\u8f83\u5dee\u7684\u6267\u884c\u8ba1\u5212\uff0c\u6240\u4ee5PawSQL\u68c0\u6d4b\u5b50\u67e5\u8be2\u5d4c\u5957\u7684\u5c42\u6b21\u662f\u5426\u8d85\u8fc7\u67d0\u4e2a\u9608\u503c\uff0c\u5e76\u63d0\u9192\u7528\u6237\u53ef\u80fd\u7684\u98ce\u9669\u3002\u5728PawSQL\u4e2d\uff0c\u9608\u503c\u7684\u9ed8\u8ba4\u503c\u662f2\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u521b\u5efa\u4f18\u5316\u4efb\u52a1\u65f6\u4fee\u6539\u6b64\u9608\u503c\u3002 \u9650\u5236\u67e5\u8be2\u4e2d\u8868\u8fde\u63a5\u7684\u4e2a\u6570 \u00b6 \u5728\u6267\u884c\u8ba1\u5212\u7684\u89c4\u5212\u4e2d\uff0c\u8868\u8fde\u63a5\u7684\u987a\u5e8f\u548c\u8fde\u63a5\u7684\u65b9\u6cd5\u662f\u6570\u636e\u5e93\u4f18\u5316\u5668\u6700\u91cd\u8981\u7684\u89c4\u5212\u5185\u5bb9\u3002\u8868\u8fde\u63a5\u6570\u76ee\u7684\u589e\u52a0\u5c06\u51e0\u4f55\u7ea7\u6570\u5730\u589e\u52a0\u6570\u636e\u5e93\u4f18\u5316\u5668\u5bf9\u4e8e\u6700\u4f18\u6267\u884c\u8ba1\u5212\u7684\u641c\u5bfb\u7a7a\u95f4\uff0c\u5bfc\u81f4\u751f\u6210\u6267\u884c\u8ba1\u5212\u7684\u65f6\u95f4\u6bd4\u8f83\u957f\uff0c\u4e14\u5bb9\u6613\u751f\u6210\u6027\u80fd\u8f83\u5dee\u7684\u6267\u884c\u8ba1\u5212\u3002\u6240\u4ee5PawSQL\u68c0\u6d4b\u67e5\u8be2\u4e2d\u8868\u8fde\u63a5\u5f97\u6570\u76ee\u662f\u5426\u8d85\u8fc7\u67d0\u4e2a\u9608\u503c\uff0c\u5e76\u63d0\u9192\u7528\u6237\u53ef\u80fd\u7684\u98ce\u9669\u3002\u5728PawSQL\u4e2d\uff0c\u9608\u503c\u7684\u9ed8\u8ba4\u503c\u662f5\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u521b\u5efa\u4f18\u5316\u4efb\u52a1\u65f6\u4fee\u6539\u6b64\u9608\u503c\u3002 \u7c7b\u578b\u8f6c\u6362\u5bfc\u81f4\u7d22\u5f15\u5931\u6548 \u00b6 \u5f53\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u540c\u65f6\uff0c\u5728\u67e5\u8be2\u6267\u884c\u8fc7\u7a0b\u4e2d\u4f1a\u8fdb\u884c\u4e00\u4e9b\u9690\u5f0f\u7684\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u3002\u7c7b\u578b\u8f6c\u6362\u6709\u65f6\u4f1a\u5e94\u7528\u4e8e\u6761\u4ef6\u4e2d\u7684\u5e38\u91cf\uff0c\u6709\u65f6\u4f1a\u5e94\u7528\u4e8e\u6761\u4ef6\u4e2d\u7684\u5217\u3002\u5f53\u5728\u5217\u4e0a\u5e94\u7528\u7c7b\u578b\u8f6c\u6362\u65f6\uff0c\u5728\u67e5\u8be2\u6267\u884c\u671f\u95f4\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15\uff0c\u53ef\u80fd\u5bfc\u81f4\u4e25\u91cd\u7684\u6027\u80fd\u95ee\u9898\u3002\u8b6c\u5982\u5bf9\u4e8e\u4ee5\u4e0b\u7684SQL\uff0c select count ( * ) from ORDERS where O_ORDERDATE = current_date (); \u5982\u679c O_ORDERDATE \u5217\u7684\u6570\u636e\u7c7b\u578b\u662f CHAR(16) \uff0c\u90a3\u4e48 O_ORDERDATE \u4e0a\u7684\u7d22\u5f15\u5c06\u4e0d\u4f1a\u88ab\u4f7f\u7528\uff0c\u5bfc\u81f4\u5168\u8868\u626b\u63cf\u3002\u89e3\u51b3\u65b9\u6848\u901a\u5e38\u6709\u4e24\u4e2a\uff0c\u4e00\u662f ALTER TABLE \u6539\u53d8 O_ORDERDATE \u7684\u6570\u636e\u7c7b\u578b\uff0c\u4e8c\u662f\u628a current_date \u5f3a\u5236\u6362\u6362\u4e3a CHAR \u7c7b\u578b\uff08PawSQL\u63d0\u4f9b\u8be5\u91cd\u5199\u5efa\u8bae\uff09\u3002 select count ( * ) ORDERS where ORDERS . O_ORDERDATE = cast ( current_date () as CHAR ( 16 )); \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 \u907f\u514d\u8fde\u63a5\u5b57\u6bb5\u7c7b\u578b\u4e0d\u5339\u914d \u00b6 \u5f53\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u540c\u65f6\uff0c\u5728\u67e5\u8be2\u6267\u884c\u8fc7\u7a0b\u4e2d\u4f1a\u8fdb\u884c\u4e00\u4e9b\u9690\u5f0f\u7684\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u3002\u5f53\u5728\u5217\u4e0a\u5e94\u7528\u7c7b\u578b\u8f6c\u6362\u65f6\uff0c\u5728\u67e5\u8be2\u6267\u884c\u671f\u95f4\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15\uff0c\u53ef\u80fd\u5bfc\u81f4\u4e25\u91cd\u7684\u6027\u80fd\u95ee\u9898\u3002PawSQL\u4f1a\u68c0\u67e5\u7c7b\u578b\u4e0d\u5339\u914d\u7684\u8fde\u63a5\u6761\u4ef6\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u3002 \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 \u907f\u514d\u5728 SELECT \u8bed\u53e5\u6dfb\u52a0 FOR UPDATE \u00b6 SELECT \u8bed\u53e5\u6dfb\u52a0 FOR UPDATE \u4f1a\u5bfc\u81f4\u9501\u8868\u6216\u9501\u6570\u636e\u884c\uff0c\u5f71\u54cd\u67e5\u8be2\u7684\u5e76\u53d1\u6027\uff0c\u5bfc\u81f4\u963b\u585e\u548c\u6574\u4f53\u6027\u80fd\u4e0b\u964d\uff0c\u9700\u8c28\u614e\u4f7f\u7528\u3002\u6240\u4ee5PawSQL\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u3002 \u907f\u514d\u5728 UPDATE \u8bed\u53e5\u4e2d\u4f7f\u7528 LIMIT \u00b6 \u5728 UPDATE \u8bed\u53e5\u4e2d\u4f7f\u7528 LIMIT \u4f1a\u5bfc\u81f4\u4e0d\u53ef\u9884\u6d4b\u66f4\u65b0\u7684\u6570\u636e\uff0c\u9700\u8c28\u614e\u4f7f\u7528\u3002\u6240\u4ee5PawSQL\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u3002 \u907f\u514d\u5728 UPDELETE \u8bed\u53e5\u4e2d\u4f7f\u7528 LIMIT \u800c\u6ca1\u6709 ORDER BY \u00b6 \u5728 UPDATE \u6216 DELETE \u8bed\u53e5\u4e2d\u4f7f\u7528 LIMIT \u800c\u6ca1\u6709 ORDER BY ,\u4f1a\u5bfc\u81f4\u6bcf\u6b21\u6267\u884c\u7684\u7ed3\u679c\u4e0d\u4e00\u81f4\u3002PawSQL\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u3002 PostgreSQL/Opengauss\u4e0d\u652f\u6301\u5728 UPDATE \u6216 DELETE \u8bed\u53e5\u4e2d\u4f7f\u7528 ORDER BY \u5b50\u53e5\u3002 \u907f\u514d\u5728 SELECT \u8bed\u53e5\u4e2d\u4f7f\u7528 LIMIT \u800c\u6ca1\u6709 ORDER BY \u00b6 \u5728 SELECT \u8bed\u53e5\u4e2d\u4f7f\u7528 LIMIT \u800c\u6ca1\u6709 ORDER BY ,\u4f1a\u5bfc\u81f4\u6bcf\u6b21\u6267\u884c\u7684\u7ed3\u679c\u4e0d\u4e00\u81f4\u3002PawSQL\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u3002 \u907f\u514d\u65e0\u6761\u4ef6\u4e14\u65e0\u5206\u7ec4\u7684 SELECT \u8bed\u53e5 \u00b6 \u6ca1\u6709\u67e5\u8be2\u6761\u4ef6\u6216\u67e5\u8be2\u6761\u4ef6\u6052\u771f\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u4e14\u65e0\u5206\u7ec4\u8bed\u6cd5\uff0c\u4f1a\u5bfc\u81f4\u5168\u8868\u626b\u63cf\u4ee5\u53ca\u7ed3\u679c\u96c6\u5de8\u5927\u3002PawSQL\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u3002 \u907f\u514d\u65e0\u6761\u4ef6\u7684 UPDELETE \u8bed\u53e5 \u00b6 \u6ca1\u6709\u67e5\u8be2\u6761\u4ef6\u6216\u67e5\u8be2\u6761\u4ef6\u6052\u771f\u7684 UPDATE \u6216 DELETE \u8bed\u53e5\uff0c\u4f1a\u66f4\u65b0\u6216\u5220\u9664\u6240\u6709\u6570\u636e\u8bb0\u5f55\uff0c\u662f\u975e\u5e38\u5371\u9669\u7684\u64cd\u4f5c\u3002PawSQL\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u3002 INSERT \u8bed\u53e5\u4e2d\u503c\u7684\u6570\u91cf\u4e0d\u8981\u8d85\u8fc7\u9608\u503c \u00b6 \u6279\u91cf\u63d2\u5165\u503c\u53ef\u4ee5\u6709\u6548\u7684\u63d0\u5347\u6570\u636e\u63d2\u5165\u7684\u6548\u7387\uff0c\u5982\u4e0b\u4f8b\uff0c insert into customer ( c_custkey , lastname , firstName ) values ( 1 , 'Dan' , 'Mike' ),( 2 , 'Chaw' , 'Tomas' ),( 3 , 'Wang' , 'Nancy' ); \u4f46\u662f\u5982\u679c\u63d2\u5165\u7684\u6570\u636e\u91cf\u592a\u591a\uff0c\u8d85\u8fc7\u6570\u636e\u5e93\u7684\u9650\u5236\uff08MySQL: max_allowed_packet\uff09\uff0c\u5bfc\u81f4\u6570\u636e\u5e93\u7aef\u62a5\u9519\u3002\u5728PawSQL\u4e2d\uff0c\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u5bf9\u8d85\u8fc7\u9608\u503c\uff08\u9ed8\u8ba4\u4e3a500\uff09\u7684SQL\u63d0\u793a\u9884\u8b66\u3002 \u907f\u514d INSERT \u4e0d\u6307\u5b9a\u5217\u540d \u00b6 INSERT\u8bed\u53e5\u5e94\u8be5\u6307\u5b9a\u5217\u540d\uff0c\u5b83\u53ef\u4ee5\u51cf\u5c11\u63d2\u5165\u7684\u503c\u4e0e\u76ee\u6807\u8868\u7684\u5217\u4e4b\u95f4\u51fa\u73b0\u9519\u4f4d\u7684\u53ef\u80fd\u6027\u3002 insert into customer value ( 1 , 'Dan' , 'Mike' ); \u4e0b\u9762\u7684\u5199\u6cd5\u53ef\u4ee5\u51cf\u5c11\u63d2\u5165\u7684\u503c\u4e0e\u76ee\u6807\u8868\u7684\u5217\u4e4b\u95f4\u51fa\u73b0\u9519\u4f4d\u7684\u53ef\u80fd\u6027\uff0c\u4ee3\u7801\u66f4\u5bb9\u6613\u7ef4\u62a4\u3002 insert into customer ( c_custkey , lastname , firstName ) value ( 1 , 'Dan' , 'Mike' ); OFFSET \u7684\u503c\u8d85\u8fc7\u9608\u503c \u00b6 \u5728SQL\u67e5\u8be2\u4e2d\uff0cLIMIT\u5b50\u53e5\u7528\u4e8e\u9650\u5236\u67e5\u8be2\u7ed3\u679c\u7684\u6570\u91cf\uff0c\u800cOFFSET\u5b50\u53e5\u7528\u4e8e\u6307\u5b9a\u4ece\u67e5\u8be2\u7ed3\u679c\u96c6\u4e2d\u7684\u54ea\u4e00\u884c\u5f00\u59cb\u8fd4\u56de\u6570\u636e\u3002\u5f53OFFSET\u503c\u5f88\u5927\u65f6\uff0c\u67e5\u8be2\u5f15\u64ce\u5fc5\u987b\u626b\u63cf\u8d8a\u6765\u8d8a\u591a\u7684\u6570\u636e\uff0c\u4ee5\u627e\u5230\u504f\u79fb\u91cf\u4e4b\u540e\u7684\u6570\u636e\u884c\u3002\u5728\u6570\u636e\u96c6\u5f88\u5927\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u67e5\u8be2\u53d8\u5f97\u975e\u5e38\u6162\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u5360\u7528\u5927\u91cf\u7684\u7cfb\u7edf\u8d44\u6e90\u3002 \u907f\u514d%\u5f00\u5934\u7684LIKE\u67e5\u8be2 \u00b6 \u5728SQL\u67e5\u8be2\u4e2d\uff0cLIKE\u64cd\u4f5c\u7b26\u7528\u4e8e\u5339\u914d\u5b57\u7b26\u4e32\u3002\u5982\u679c\u6a21\u5f0f\u5b57\u7b26\u4e32\u4ee5%\u5f00\u5934\uff08\u4f8b\u5982 LIKE '%ABC' \uff09\uff0c\u5219\u6570\u636e\u5e93\u4f18\u5316\u5668\u65e0\u6cd5\u5229\u7528\u7d22\u5f15\u6765\u8fc7\u6ee4\u6570\u636e\uff0c\u5bb9\u6613\u9020\u6210\u5168\u8868\u626b\u63cf\u3002\u5728\u6ca1\u6709\u5176\u4ed6\u8fc7\u6ee4\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u5bf9\u67e5\u8be2\u6027\u80fd\u548c\u6548\u7387\u4ea7\u751f\u8f83\u5927\u7684\u5f71\u54cd\u3002\u6240\u4ee5\u5e94\u8be5\u5c3d\u91cf\u907f\u514d%\u5f00\u5934\u7684\u67e5\u8be2\u6761\u4ef6\uff0c\u5982\u679c\u4e0d\u5f97\u4e0d\u4f7f\u7528%\u5f00\u5934\u7684\u5339\u914d\uff0c\u53ef\u4ee5\u8003\u8651\u521b\u5efa\u5168\u6587\u7d22\u5f15\u6765\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u3002 OR \u6761\u4ef6\u7684 SELECT \u91cd\u5199\u4e3a UNION \u00b6 \u5982\u679c\u4f7f\u7528 OR \u6761\u4ef6\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u6570\u636e\u5e93\u4f18\u5316\u5668\u6709\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15\u6765\u5b8c\u6210\u67e5\u8be2\u3002\u8b6c\u5982\uff0c select * from lineitem where l_shipdate = date '2010-12-01' or l_partkey < 100 \u5982\u679c\u8fd9\u4e24\u4e2a\u5b57\u6bb5\u4e0a\u90fd\u6709\u7d22\u5f15\uff0c\u53ef\u4ee5\u628a\u67e5\u8be2\u8bed\u53e5\u91cd\u5199\u4e3a UNION \u67e5\u8be2\uff0c\u4ee5\u4fbf\u4f7f\u7528\u7d22\u5f15\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u3002 select * from lineitem where l_shipdate = date '2010-12-01' union select * from lineitem where l_partkey < 100 \u5982\u679c\u6570\u636e\u5e93\u652f\u6301 INDEX MERGING \uff08\u8bf7\u53c2\u8003 \u5982\u4f55\u521b\u5efa\u9ad8\u6548\u7684\u7d22\u5f15 \uff09\uff0c\u4e5f\u53ef\u4ee5\u8c03\u6574\u6570\u636e\u5e93\u76f8\u5173\u53c2\u6570\u542f\u7528 INDEX MERGING \u4f18\u5316\u7b56\u7565\u6765\u63d0\u5347\u6570\u636e\u5e93\u6027\u80fd\u3002\u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 OR \u6761\u4ef6\u7684 UPDELETE \u91cd\u5199\u4f18\u5316 \u00b6 \u5982\u679c\u6709\u4f7f\u7528 OR \u6761\u4ef6\u7684UPDATE\u6216DELETE\u8bed\u53e5\uff0c\u6570\u636e\u5e93\u4f18\u5316\u5668\u6709\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15\u6765\u5b8c\u6210\u64cd\u4f5c\u3002 delete from lineitem where l_shipdate = date '2010-12-01' or l_partkey < 100 \u5982\u679c\u8fd9\u4e24\u4e2a\u5b57\u6bb5\u4e0a\u90fd\u6709\u7d22\u5f15\uff0c\u53ef\u4ee5\u628a\u5b83\u91cd\u5199\u4e3a\u591a\u4e2aDELETE\u8bed\u53e5\uff0c\u5229\u7528\u7d22\u5f15\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u3002 delete from lineitem where l_shipdate = date '2010-12-01' ; delete from lineitem where l_partkey < 100 ; \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 \u65e0\u6761\u4ef6\u7684 DELETE \u91cd\u5199\u4f18\u5316 \u00b6 \u6ca1\u6709\u67e5\u8be2\u6761\u4ef6\u6216\u67e5\u8be2\u6761\u4ef6\u6052\u771f\u7684 DELETE \u8bed\u53e5\u4f1a\u5220\u9664\u8868\u4e2d\u7684\u6240\u6709\u6570\u636e\u3002 DELETE \u8bed\u53e5\u9700\u8981\u5199\u5927\u91cf\u65e5\u5fd7\uff0c\u4ee5\u4fbf\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u53ca\u4e3b\u5907\u540c\u6b65\u3002\u5bf9\u4e8e\u5927\u8868\u800c\u8a00\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u7684\u9501\u5b9a\u548c\u4e8b\u52a1\u963b\u585e\uff0c\u540c\u65f6\u4f1a\u5360\u7528\u5927\u91cf\u7684\u65e5\u5fd7\u7a7a\u95f4\u3002\u5982\u679c\u786e\u8ba4\u8868\u4e2d\u7684\u6570\u636e\u4e0d\u518d\u9700\u8981\uff0c\u53ef\u4ee5\u901a\u8fc7 TRUNCATE \u8868\u4e86\u4ee3\u66ff DELETE \u8bed\u53e5\u3002 TRUNCATE \u6bd4 DELETE \u8bed\u53e5\u66f4\u5feb\uff0c\u56e0\u4e3a\u5b83\u4e0d\u4f1a\u8bb0\u5f55\u6bcf\u4e2a\u5220\u9664\u7684\u884c\uff0c\u800c\u662f\u76f4\u63a5\u5c06\u8868\u6e05\u7a7a\u5e76\u91ca\u653e\u7a7a\u95f4\u3002 delete from lineitem \u91cd\u5199\u4e3a truncate lineitem \u907f\u514d\u5728\u7d22\u5f15\u5217\u4e0a\u8fd0\u7b97 \u00b6 \u5728\u7d22\u5f15\u5217\u4e0a\u7684\u8fd0\u7b97\u5c06\u5bfc\u81f4\u7d22\u5f15\u5931\u6548\uff0c\u5bb9\u6613\u9020\u6210\u5168\u8868\u626b\u63cf\uff0c\u4ea7\u751f\u4e25\u91cd\u7684\u6027\u80fd\u95ee\u9898\u3002\u6240\u4ee5\u9700\u8981\u5c3d\u91cf\u5c06\u7d22\u5f15\u5217\u4e0a\u7684\u8fd0\u7b97\u8f6c\u6362\u5230\u5e38\u91cf\u7aef\u8fdb\u884c\uff0c\u8b6c\u5982\u4e0b\u9762\u7684SQL\u3002 select * from tpch . orders where adddate ( o_orderdate , INTERVAL 31 DAY ) = date '2019-10-10' adddate \u51fd\u6570\u5c06\u5bfc\u81f4 o_orderdate \u4e0a\u7684\u7d22\u5f15\u4e0d\u53ef\u7528\uff0c\u53ef\u4ee5\u5c06\u5176\u8f6c\u6362\u6210\u4e0b\u9762\u8fd9\u4e2a\u7b49\u4ef7\u7684SQL\uff0c\u4ee5\u4fbf\u4f7f\u7528\u7d22\u5f15\u63d0\u5347\u67e5\u8be2\u6548\u7387\u3002 select * from tpch.orders where o_orderdate = subdate(date '2019-10-10' , INTERVAL 31 DAY); PawSQL\u53ef\u4ee5\u5e2e\u52a9\u8f6c\u6362\u5927\u91cf\u7684\u51fd\u6570\u4ee5\u53ca +\u3001-\u3001*\u3001/ \u8fd0\u7b97\u7b26\u76f8\u5173\u7684\u64cd\u4f5c\u3002\u70b9\u51fb\u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 IN\u5b50\u67e5\u8be2\u91cd\u5199\u4f18\u5316 \u00b6 IN\u5b50\u67e5\u8be2\u662f\u6307\u7b26\u5408\u4e0b\u9762\u5f62\u5f0f\u7684\u5b50\u67e5\u8be2\uff0cIN\u5b50\u67e5\u8be2\u53ef\u4ee5\u6539\u5199\u6210\u7b49\u4ef7\u7684\u76f8\u5173EXISTS\u5b50\u67e5\u8be2\u6216\u662f\u5185\u8fde\u63a5\uff0c\u4ece\u800c\u53ef\u4ee5\u4ea7\u751f\u4e00\u4e2a\u65b0\u7684\u8fc7\u6ee4\u6761\u4ef6\uff0c\u5982\u679c\u8be5\u8fc7\u6ee4\u6761\u4ef6\u4e0a\u6709\u5408\u9002\u7684\u7d22\u5f15\uff0c\u6216\u662f\u901a\u8fc7PawSQL\u7d22\u5f15\u63a8\u8350\u5f15\u64ce\u63a8\u8350\u5408\u9002\u7684\u7d22\u5f15\uff0c\u53ef\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u3002 ( expr1 , expr2 ...) [ NOT ] IN ( SELECT expr3 , expr4 , ...) IN\u5b50\u67e5\u8be2\u91cd\u5199\u4e3aEXISTS \u8b6c\u5982\u4e0b\u9762\u7684IN\u5b50\u67e5\u8be2\u8bed\u8a00\u662f\u4e3a\u4e86\u83b7\u53d6\u6700\u8fd1\u4e00\u5e74\u5185\u6709\u8ba2\u5355\u7684\u7528\u6237\u4fe1\u606f\uff0c select * from customer where c_custkey in ( select o_custkey from orders where O_ORDERDATE >= current_date - interval 1 year ) \u5b83\u53ef\u4ee5\u91cd\u5199\u4e3aexists\u5b50\u67e5\u8be2\uff0c\u4ece\u800c\u53ef\u4ee5\u4ea7\u751f\u4e00\u4e2a\u8fc7\u6ee4\u6761\u4ef6\uff08c_custkey = o_custkey\uff09\uff1a select * from customer where exists ( select * from orders where c_custkey = o_custkey and O_ORDERDATE >= current_date - interval 1 year ) IN\u5b50\u67e5\u8be2\u91cd\u5199\u4e3a\u5185\u5173\u8054 \u5982\u679c\u5b50\u67e5\u8be2\u7684\u67e5\u8be2\u7ed3\u679c\u662f\u4e0d\u91cd\u590d\u7684\uff0c\u5219IN\u5b50\u67e5\u8be2\u53ef\u4ee5\u91cd\u5199\u4e3a\u4e24\u4e2a\u8868\u7684\u5173\u8054\uff0c\u4ece\u800c\u8ba9\u6570\u636e\u5e93\u4f18\u5316\u5668\u53ef\u4ee5\u89c4\u5212\u66f4\u4f18\u7684\u8868\u8fde\u63a5\u987a\u5e8f\uff0c\u4e5f\u53ef\u4ee5\u8ba9PawSQL\u63a8\u8350\u66f4\u597d\u7684\u4f18\u5316\u65b9\u6cd5\u3002 \u8b6c\u5982\u4e0b\u9762\u7684SQL\uff0c c_custkey\u662f\u8868customer\u7684\u4e3b\u952e\uff0c select * from orders where o_custkey in ( select c_custkey from customer where c_phone like '139%' ) \u5219\u4e0a\u9762\u7684\u67e5\u8be2\u8bed\u53e5\u53ef\u4ee5\u91cd\u5199\u4e3a select orders . * from orders , customer where o_custkey = c_custkey and c_phone like '139%' \u70b9\u51fb\u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002 Exists\u5b50\u67e5\u8be2\u8f6c\u6362\u4e3a\u8868\u5173\u8054 \u00b6 Exists\u5b50\u67e5\u8be2\u5411\u5916\u5c42\u67e5\u8be2\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c,\u8868\u793a\u662f\u5426\u5b58\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u884c\u3002\u6ee1\u8db3\u4e00\u5b9a\u6761\u4ef6\u7684EXISTS \u5b50\u67e5\u8be2\u53ef\u4ee5\u8f6c\u6362\u4e3a JOIN\uff0c\u4ece\u800c\u53ef\u4ee5\u8ba9\u6570\u636e\u5e93\u4f18\u5316\u5668\u5bf9\u9a71\u52a8\u8868\u7684\u9009\u62e9\u6709\u66f4\u591a\u7684\u9009\u62e9\uff0c\u4ece\u800c\u751f\u6210\u66f4\u4f18\u7684\u67e5\u8be2\u8ba1\u5212\u3002 \u8b6c\u5982\u5bf9\u4e8e\u5982\u4e0b\u7684\u67e5\u8be2\uff0c select * from lineitem l where exists ( select * from part p where p . p_partkey = l . l_partkey and p . p_name = 'a' ) \u5982\u679c\u5b50\u67e5\u8be2\u5bf9\u4e8e\u6bcf\u4e00\u4e2a l.l_partkey ,\u90fd\u81f3\u591a\u8fd4\u56de\u4e00\u884c\u8bb0\u5f55\uff08\u5373\u5728\u7b49\u503c\u6761\u4ef6\u7684\u5217\u4e0a (p_partkey\uff0cp_name) \u6709\u4e00\u4e2a\u552f\u4e00\u6027\u7ea6\u675f\uff09\uff0c\u5219\u6b64\u5b50\u67e5\u8be2\u53ef\u4ee5\u91cd\u5199\u4e3a\u5982\u4e0b\u7684\u5f62\u5f0f: select l . * from lineitem as l , part as p where p . p_partkey = l . l_partkey and p . p_name = 'a' \u5b50\u67e5\u8be2\u4e2d\u7684DISTINCT\u6d88\u9664 \u00b6 \u5bf9\u4e8e\u4ec5\u8fdb\u884c\u5b58\u5728\u6027\u6d4b\u8bd5\u7684\u5b50\u67e5\u8be2,\u5982\u679c\u5b50\u67e5\u8be2\u5305\u542bdistinct\u901a\u5e38\u53ef\u4ee5\u5220\u9664,\u4ee5\u907f\u514d\u4e00\u6b21\u53bb\u91cd\u64cd\u4f5c IN\u5b50\u67e5\u8be2: SELECT * FROM customer WHERE c_custkey IN ( SELECT DISTINCT o_custkey FROM orders ); \u53ef\u4ee5\u7b80\u5316\u4e3a: SELECT * FROM customer WHERE c_custkey IN ( SELECT o_custkey FROM orders ); \u5b50\u67e5\u8be2\u4e2d\u6ca1\u6709LIMIT\u7684\u6392\u5e8f\u6d88\u9664 \u00b6 \u5982\u679c\u5b50\u67e5\u8be2\u6ca1\u6709LIMIT\u5b50\u53e5\uff0c\u90a3\u4e48\u5b50\u67e5\u8be2\u7684\u6392\u5e8f\u64cd\u4f5c\u5c31\u6ca1\u6709\u610f\u4e49\uff0c\u53ef\u4ee5\u5c06\u5176\u5220\u9664\u800c\u4e0d\u5f71\u54cd\u6700\u7ec8\u7684\u7ed3\u679c\u3002\u4e00\u4e9b\u6848\u4f8b\u5982\u4e0b\uff1a EXISTS\u5b50\u67e5\u8be2 select * from lineitem l where exists ( select * from part p where p . p_partkey = l . l_partkey and p . p_name = 'a' order by p_name ) \u53ef\u4ee5\u91cd\u5199\u4e3a select * from lineitem l where exists ( select * from part p where p . p_partkey = l . l_partkey and p . p_name = 'a' ) \u6392\u5e8f\u5206\u7ec4\u5b57\u6bb5\u6765\u81ea\u4e0d\u540c\u8868\u91cd\u5199\u4f18\u5316 \u00b6 \u5982\u679c\u6392\u5e8f\u6216\u5206\u7ec4\u5b57\u6bb5\u6765\u81ea\u4e0d\u540c\u7684\u8868\uff0c\u6570\u636e\u5e93\u4f18\u5316\u5668\u5c06\u6ca1\u6709\u529e\u6cd5\u5229\u7528\u7d22\u5f15\u7684\u6709\u5e8f\u6027\u6765\u907f\u514d\u4e00\u6b21\u6392\u5e8f\u3002\u5982\u679cWHERE\u6216\u662fHAVING\u5b50\u53e5\u91cc\u5b58\u5728\u7b49\u503c\u6761\u4ef6\uff0cPawSQL\u53ef\u4ee5\u6392\u5e8f\u6216\u5206\u7ec4\u5b57\u6bb5\u8fdb\u884c\u66ff\u6362\uff0c\u4f7f\u5176\u6765\u81ea\u540c\u4e00\u5f20\u8868\uff0c\u4ece\u800c\u80fd\u591f\u5229\u7528\u7d22\u5f15\u6765\u907f\u514d\u4e00\u6b21\u6392\u5e8f\u3002\u8b6c\u5982\u4e0b\u9762\u7684\u67e5\u8be2 select o_custkey , c_name , sum ( o . O_TOTALPRICE ) from customer c , orders o where o_custkey = c_custkey group by o_custkey , c_name \u5206\u7ec4\u5b57\u6bb5 o_custkey, c_name \u6765\u81ea\u4e24\u4e2a\u8868\uff0c\u4e14\u5b58\u5728\u8fc7\u6ee4\u6761\u4ef6 o_custkey = c_custkey \uff0c\u53ef\u4ee5\u91cd\u5199\u4e3a select c_custkey , c_name , sum ( o . O_TOTALPRICE ) from customer c , orders o where o_custkey = c_custkey group by c_custkey , c_name ANY/SOME/ALL\u4fee\u9970\u7684\u5b50\u67e5\u8be2\u4f18\u5316 \u00b6 ANY/SOME/ALL\u4fee\u9970\u7684\u5b50\u67e5\u8be2\u6765\u6e90\u81eaSQL-92 \u6807\u51c6, \u901a\u5e38\u7528\u4e8e\u68c0\u67e5\u67d0\u4e2a\u503c\u4e0e\u5b50\u67e5\u8be2\u8fd4\u56de\u7684\u5168\u90e8\u503c\u6216\u4efb\u610f\u503c\u7684\u5927\u5c0f\u5173\u7cfb\u3002\u4f7f\u7528ANY/SOME/ALL\u4fee\u9970\u7684\u5b50\u67e5\u8be2\u6267\u884c\u6548\u7387\u4f4e\u4e0b,\u56e0\u4e3a\u9700\u8981\u5bf9\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u9010\u884c\u8fdb\u884c\u6bd4\u8f83,\u968f\u7740\u7ed3\u679c\u96c6\u5927\u5c0f\u589e\u52a0\u800c\u7ebf\u6027\u4e0b\u964d\u3002\u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u91cd\u5199\u7684\u65b9\u5f0f\u63d0\u5347\u5176\u6267\u884c\u6548\u7387\u3002 \u8b6c\u5982\u5bf9\u4e8e\u4e0b\u9762\u7684SQL\uff1a select * from orders where o_orderdate < all ( select o_orderdate from orders where o_custkey > 100 ) \u5bf9\u4e8eMySQL\uff0c\u53ef\u4ee5\u91cd\u5199\u4e3a select * from orders where o_orderdate < ( select o_orderdate from orders where o_custkey > 100 order by o_orderdate asc limit 1 ) \u5bf9\u4e8ePostgreSQL\u6216Oracle\uff0c\u5219\u53ef\u4ee5\u91cd\u5199\u4e3a select * from orders where o_orderdate < ( select o_orderdate from orders where o_custkey > 100 order by o_orderdate asc nulls first limit 1 ) \u5173\u4e8ePawSQL \u00b6 PawSQL\u4e13\u6ce8\u6570\u636e\u5e93\u6027\u80fd\u4f18\u5316\u7684\u81ea\u52a8\u5316\u548c\u667a\u80fd\u5316\uff0c\u652f\u6301MySQL\uff0cPostgreSQL\uff0cOpengauss\u7b49\uff0c\u63d0\u4f9b\u7684SQL\u4f18\u5316\u4ea7\u54c1\u5305\u62ec PawSQL Cloud \uff0c\u5728\u7ebf\u81ea\u52a8\u5316SQL\u4f18\u5316\u5de5\u5177\uff0c\u652f\u6301SQL\u5ba1\u67e5\uff0c\u667a\u80fd\u67e5\u8be2\u91cd\u5199\u3001\u57fa\u4e8e\u4ee3\u4ef7\u7684\u7d22\u5f15\u63a8\u8350\uff0c\u9002\u7528\u4e8e\u6570\u636e\u5e93\u7ba1\u7406\u5458\u53ca\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c PawSQL Advisor \uff0cIntelliJ \u63d2\u4ef6, \u9002\u7528\u4e8e\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c\u53ef\u4ee5IDEA/DataGrip\u5e94\u7528\u5e02\u573a\u901a\u8fc7\u540d\u79f0\u641c\u7d22\u201cPawSQL Advisor\u201d\u5b89\u88c5\u3002 PawSQL Engine, \u662fPawSQL\u7cfb\u5217\u4ea7\u54c1\u7684\u540e\u7aef\u4f18\u5316\u5f15\u64ce\uff0c\u53ef\u4ee5\u4ee5docker\u955c\u50cf\u7684\u65b9\u5f0f\u72ec\u7acb\u5b89\u88c5\u90e8\u7f72\uff0c\u5e76\u901a\u8fc7http/json\u7684\u63a5\u53e3\u63d0\u4f9bSQL\u4f18\u5316\u670d\u52a1\u3002 PawSQL Ora2pg/PawsQL Ora2op\uff0cOracle\u8bed\u6cd5\u7684SQL\u5e94\u7528\u8f6c\u6362\u4e3aPostgreSQL\u548copenGauss\u8bed\u6cd5\u7684\u5de5\u5177\u3002 \u8054\u7cfb\u6211\u4eec \u00b6 \u7f51\u5740: https://app.pawsql.com \u90ae\u4ef6\uff1a service@pawsql.com Twitter: https://twitter.com/pawsql \u626b\u63cf\u5173\u6ce8PawSQL\u516c\u4f17\u53f7","title":"\u91cd\u5199\u4f18\u5316\u6982\u8ff0"},{"location":"pawreference/rewrite-rules/#pawsql","text":"Copyright \u00a9 2022 PawSQL","title":"PawSQL \u4f18\u5316\u7b97\u6cd5\uff08\u7b80\u7565\u7248\uff09"},{"location":"pawreference/rewrite-rules/#_1","text":"\u8fde\u63a5\u6d88\u9664\uff08Join Elimination\uff09\u901a\u8fc7\u5728\u4e0d\u5f71\u54cd\u6700\u7ec8\u7ed3\u679c\u7684\u60c5\u51b5\u4e0b\u4ece\u67e5\u8be2\u4e2d\u5220\u9664\u8868\uff0c\u6765\u7b80\u5316SQL\u4ee5\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\u3002\u901a\u5e38\uff0c\u5f53\u67e5\u8be2\u5305\u542b\u4e3b\u952e-\u5916\u952e\u8fde\u63a5\u5e76\u4e14\u67e5\u8be2\u4e2d\u4ec5\u5f15\u7528\u4e3b\u8868\u7684\u4e3b\u952e\u5217\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b64\u4f18\u5316\u3002 \u8003\u8651\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c select o . * from orders o inner join customer c on c . c_custkey = o . o_custkey \u8ba2\u5355\u8868\uff08orders\uff09\u548c\u5ba2\u6237\u8868\uff08customer\uff09\u5173\u8054\uff0c\u4e14c_custkey\u662f\u5ba2\u6237\u8868\u7684\u4e3b\u952e\uff0c\u90a3\u4e48\u5ba2\u6237\u8868\u53ef\u4ee5\u88ab\u6d88\u9664\u6389\uff0c\u91cd\u5199\u540e\u7684SQL\u5982\u4e0b\uff1a select * from orders where o_custkey \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"\u8868\u8fde\u63a5\u6d88\u9664"},{"location":"pawreference/rewrite-rules/#_2","text":"\u5916\u8fde\u63a5\u4f18\u5316\u6307\u7684\u662f\u6ee1\u8db3\u4e00\u5b9a\u6761\u4ef6\uff08\u5916\u8868\u5177\u6709NULL\u62d2\u7edd\u6761\u4ef6\uff09\u7684\u5916\u8fde\u63a5\u53ef\u4ee5\u8f6c\u5316\u4e3a\u5185\u8fde\u63a5\uff0c\u4ece\u800c\u53ef\u4ee5\u8ba9\u6570\u636e\u5e93\u4f18\u5316\u5668\u53ef\u4ee5\u9009\u62e9\u66f4\u4f18\u7684\u6267\u884c\u8ba1\u5212\uff0c\u63d0\u5347SQL\u67e5\u8be2\u7684\u6027\u80fd\u3002 \u8003\u8651\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c select c_custkey from orders left join customer on c_custkey = o_custkey where C_NATIONKEY < 20 C_NATIONKEY < 20 \u662f\u4e00\u4e2acustomer\u8868\u4e0a\u7684NULL\u62d2\u7edd\u6761\u4ef6\uff0c\u6240\u4ee5\u4e0a\u9762\u7684\u5de6\u5916\u8fde\u63a5\u53ef\u4ee5\u91cd\u5199\u4e3a\u5185\u8fde\u63a5\uff0c select c_custkey from orders inner join customer on c_custkey = o_custkey where C_NATIONKEY < 20 \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"\u5916\u8fde\u63a5\u8f6c\u5316\u4e3a\u5185\u8fde\u63a5"},{"location":"pawreference/rewrite-rules/#sattc","text":"SAT-TC(SATisfiability-Transitive Closure) \u91cd\u5199\u4f18\u5316\u662f\u6307\u5206\u6790\u4e00\u7ec4\u76f8\u5173\u7684\u67e5\u8be2\u6761\u4ef6\uff0c\u53bb\u53d1\u73b0\u662f\u5426\u6709\u6761\u4ef6\u81ea\u76f8\u77db\u76fe\u3001\u7b80\u5316\u6216\u662f\u63a8\u65ad\u51fa\u65b0\u7684\u6761\u4ef6\uff0c\u4ece\u800c\u5e2e\u52a9\u6570\u636e\u5e93\u4f18\u5316\u5668\u9009\u62e9\u66f4\u597d\u7684\u6267\u884c\u8ba1\u5212\uff0c\u63d0\u5347SQL\u6027\u80fd\u3002 \u8003\u8651\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c select c.c_name FROM customer c where c.c_name = 'John' and c.c_name = 'Jessey' \u7531\u4e8e\u6761\u4ef6\u81ea\u76f8\u77db\u76fe\uff0c\u6240\u4ee5\u91cd\u5199\u540e\u7684SQL\u4e3a\uff0c select c.c_name from customer as c where 1 = 0 \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"SATTC\u91cd\u5199\u4f18\u5316"},{"location":"pawreference/rewrite-rules/#query-folding","text":"\u67e5\u8be2\u6298\u53e0\u6307\u7684\u662f\u628a\u89c6\u56fe\u3001CTE\u6216\u662fDT\u5b50\u67e5\u8be2\u5c55\u5f00\uff0c\u5e76\u4e0e\u5f15\u7528\u5b83\u7684\u67e5\u8be2\u8bed\u53e5\u5408\u5e76\uff0c\u6765\u51cf\u5c11\u5e8f\u5217\u5316\u4e2d\u95f4\u7ed3\u679c\u96c6\uff0c\u6216\u662f\u89e6\u53d1\u66f4\u4f18\u7684\u5173\u4e8e\u8868\u8fde\u63a5\u89c4\u5212\u7684\u4f18\u5316\u6280\u672f\u3002 \u8003\u8651\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c SELECT * FROM (SELECT c_custkey, c_name FROM customer) AS derived_t1; \u91cd\u5199\u540e\u7684SQL\u4e3a\uff0c SELECT c_custkey, c_name FROM customer \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"\u67e5\u8be2\u6298\u53e0(Query Folding)"},{"location":"pawreference/rewrite-rules/#projection-pushdown","text":"\u6295\u5f71\u4e0b\u63a8\u6307\u7684\u901a\u8fc7\u5220\u9664DT\u5b50\u67e5\u8be2\u4e2d\u65e0\u610f\u4e49\u7684\u5217\uff08\u5728\u5916\u67e5\u8be2\u4e2d\u6ca1\u6709\u4f7f\u7528\uff09\uff0c\u6765\u51cf\u5c11IO\u548c\u7f51\u7edc\u7684\u4ee3\u4ef7\uff0c\u540c\u65f6\u63d0\u5347\u4f18\u5316\u5668\u5728\u8fdb\u884c\u8868\u8bbf\u95ee\u7684\u89c4\u5212\u65f6\uff0c\u91c7\u7528\u65e0\u9700\u56de\u8868\u7684\u4f18\u5316\u9009\u9879\u7684\u51e0\u7387\u3002 \u8003\u8651\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c SELECT count ( 1 ) FROM ( SELECT c_custkey , avg ( age ) FROM customer group by c_custkey ) AS derived_t1 ; \u91cd\u5199\u540e\u7684SQL\u4e3a\uff0c SELECT count ( 1 ) FROM ( SELECT 1 FROM customer group by c_custkey ) AS derived_t1 ; \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"\u6295\u5f71\u4e0b\u63a8(Projection Pushdown)"},{"location":"pawreference/rewrite-rules/#in","text":"\u5bf9\u4e8e\u4ee5\u4e0b\u60f3\u8981\u67e5\u8be2\u6ca1\u6709\u8ba2\u5355\u7528\u6237\u7684SQL\uff0c select * from customer where c_custkey not in ( select o_custkey from orders ) \u5982\u679c\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u91cc\u6709\u7a7a\u503c\uff0c\u8fd9\u4e2aSQL\u6c38\u8fdc\u8fd4\u56de\u4e3a\u7a7a\u3002\u6b63\u786e\u7684\u5199\u6cd5\u5e94\u8be5\u662f\u5728\u5b50\u67e5\u8be2\u91cc\u52a0\u4e0a\u975e\u7a7a\u9650\u5236\uff0c\u5373 select * from customer where c_custkey not in ( select o_custkey from orders where o_custkey is not null ) \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"IN\u53ef\u7a7a\u5b50\u67e5\u8be2\u91cd\u5199"},{"location":"pawreference/rewrite-rules/#havingwhere","text":"\u4ece\u903b\u8f91\u4e0a\uff0cHAVING\u6761\u4ef6\u662f\u5728\u5206\u7ec4\u4e4b\u540e\u6267\u884c\u7684\uff0c\u800cWHERE\u5b50\u53e5\u4e0a\u7684\u6761\u4ef6\u53ef\u4ee5\u5728\u8868\u8bbf\u95ee\u7684\u65f6\u5019\uff08\u7d22\u5f15\u8bbf\u95ee\uff09,\u6216\u662f\u8868\u8bbf\u95ee\u4e4b\u540e\u3001\u5206\u7ec4\u4e4b\u524d\u6267\u884c\uff0c\u8fd9\u4e24\u79cd\u6761\u4ef6\u90fd\u6bd4\u5728\u5206\u7ec4\u4e4b\u540e\u6267\u884c\u4ee3\u4ef7\u8981\u5c0f\u3002 \u8003\u8651\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c select c_custkey , count ( * ) from customer group by c_custkey having c_custkey < 100 \u91cd\u5199\u540e\u7684SQL\u4e3a\uff0c select c_custkey , count ( * ) from customer where c_custkey < 100 group by c_custkey","title":"HAVING\u6761\u4ef6\u4e0b\u63a8\u5230WHERE"},{"location":"pawreference/rewrite-rules/#all","text":"\u5047\u8bbe\u901a\u8fc7\u4e0b\u9762\u7684SQL\u6765\u83b7\u53d6\u8ba2\u5355\u7cfb\u7edf\u5173\u95ed\u540e\u6ce8\u518c\u7684\u7528\u6237 select * from customer where c_regdate > all ( select o_orderdate from orders ) \u5982\u679c\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u4e2d\u5b58\u5728NULL\uff0c\u8fd9\u4e2aSQL\u6c38\u8fdc\u8fd4\u56de\u4e3a\u7a7a\u3002\u6b63\u786e\u7684\u5199\u6cd5\u5e94\u8be5\u662f\u5728\u5b50\u67e5\u8be2\u91cc\u52a0\u4e0a\u975e\u7a7a\u9650\u5236\uff0c\u6216\u4f7f\u7528max/min\u7684\u5199\u6cd5 select * from customer where c_regdate > ( select max ( o_custkey ) from orders ) PawSQL\u63a8\u8350\u91c7\u7528\u7b2c\u4e8c\u79cd\u5199\u6cd5\uff0c\u53ef\u4ee5\u901a\u8fc7max/min\u91cd\u5199\u8fdb\u4e00\u6b65\u4f18\u5316SQL\uff0c\u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"ALL\u4fee\u9970\u7684\u5b50\u67e5\u8be2\u91cd\u5199\u4f18\u5316"},{"location":"pawreference/rewrite-rules/#maxmin","text":"\u5bf9\u4e8e\u4f7f\u7528MAX/MIN\u7684\u5b50\u67e5\u8be2\uff0c select * from customer where c_custkey = ( select max ( o_custkey ) from orders ) \u53ef\u4ee5\u91cd\u5199\u4e3a\u4ee5\u4e0b\u7684\u5f62\u5f0f\uff0c\u4ece\u800c\u5229\u7528\u7d22\u5f15\u7684\u6709\u5e8f\u6765\u907f\u514d\u4e00\u6b21\u805a\u96c6\u8fd0\u7b97\uff0c select * from customer where c_custkey = ( select o_custkey from orders order by o_custkey desc null last limit 1 ) \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"MAX/MIN\u5b50\u67e5\u8be2\u91cd\u5199\u4f18\u5316"},{"location":"pawreference/rewrite-rules/#count","text":"\u5bf9\u4e8e\u4e0b\u9762\u5b50\u67e5\u8be2\uff0c select * from customer where (select count(*) from orders where c_custkey=o_custkey) > 0 \u53ef\u4ee5\u91cd\u5199\u4e3a, \u907f\u514d\u4e86\u4e00\u6b21\u805a\u96c6\u8fd0\u7b97 select * from customer where exists(select 1 from orders where c_custkey=o_custkey) \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"COUNT\u6807\u91cf\u5b50\u67e5\u8be2\u91cd\u5199\u4f18\u5316"},{"location":"pawreference/rewrite-rules/#null","text":"=null \u6216\u662f case when null \u5e76\u4e0d\u80fd\u5224\u65ad\u8868\u8fbe\u5f0f\u4e3a\u7a7a, \u5224\u65ad\u8868\u8fbe\u5f0f\u4e3a\u7a7a\u5e94\u8be5\u4f7f\u7528 is null \u3002\u5728SQL\u4e2d\u51fa\u73b0 =null \u6216\u662f case when null \u5927\u6982\u7387\u662f\u5f00\u53d1\u4eba\u5458\u7684\u9519\u8bef\u5199\u6cd5\uff0c\u56e0\u4e3a\u5b83\u4eec\u603b\u662f\u88ab\u5224\u65ad\u4e3a\u5047\uff0c\u548c1=0\u662f\u7b49\u4ef7\u7684\u3002\u6240\u4ee5PawSQL\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u548c\u91cd\u5199\u3002 \u8b6c\u5982\u5982\u4e0b\u7684SQL\uff0c select case c_phone when null then 0 else 1 end from customer ; PawSQL\u4f1a\u5c06\u5176\u91cd\u5199\u4e3a select case when c_phone is null then 0 else 1 end from customer ; \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"\u907f\u514d\u4f7f\u7528=NULL\u5224\u65ad\u7a7a\u503c"},{"location":"pawreference/rewrite-rules/#select","text":"\u5728\u67e5\u8be2\u4e2d\u4f7f\u7528 SELECT * \u7684\u7f3a\u70b9\u5982\u4e0b\uff1a SELECT * \u4e2d\u5982\u679c\u5305\u542b\u65e0\u7528\u7684\u5927\u5b57\u6bb5\uff0c\u5c24\u5176\u662f text /CLOB\u7c7b\u578b\u7684\u5b57\u6bb5\uff0c\u5bb9\u6613\u9020\u6210\u65e0\u8c13\u78c1\u76d8IO\u548c\u7f51\u7edc\u5f00\u9500\uff0c \u4f7f\u7528 SELECT * \u5bb9\u6613\u589e\u52a0\u4ee3\u7801\u7ef4\u62a4\u7684\u6210\u672c\uff0c\u8b6c\u5982\u589e\u51cf\u5b57\u6bb5\u5bb9\u6613\u4e0e resultMap \u914d\u7f6e\u4e0d\u4e00\u81f4\u3001 insert into select * \u65f6\u5b57\u6bb5\u6620\u5c04\u51fa\u9519 \u6570\u636e\u5e93\u4f18\u5316\u5668\u65e0\u6cd5\u8fdb\u884c\u8986\u76d6\u7d22\u5f15\u7684\u89c4\u5212 PawSQL\u7d22\u5f15\u63a8\u8350\u65e0\u6cd5\u63a8\u8350\u8986\u76d6\u7d22\u5f15 \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"\u907f\u514d\u5728\u67e5\u8be2\u4e2d\u4f7f\u7528SELECT *"},{"location":"pawreference/rewrite-rules/#_3","text":"MySQL\u7684\u51fd\u6570 rand \u6216PostgreSQL\u7684\u51fd\u6570 random \u4f1a\u8fd4\u56de\u4e00\u4e2a\u5728\u8303\u56f40\u52301.0\u4e4b\u95f4\u7684\u968f\u673a\u6d6e\u70b9\u6570\u3002\u6211\u4eec\u6709\u65f6\u5019\u4f1a\u4f7f\u7528\u4ee5\u4e0b\u67e5\u8be2\u8bed\u53e5\u83b7\u53d6\u6570\u636e\u96c6\u7684\u968f\u673a\u6837\u672c\u3002 select * from orders order by rand () limit 1 ; \u5982\u679c customer \u8868\u5c11\u4e8e10,000\u884c\uff0c\u5219\u6b64\u65b9\u6cd5\u6548\u679c\u5f88\u597d\u3002\u4f46\u662f\u5f53\u60a8\u67091,000,000\u884c\u65f6\uff0c\u6392\u5e8f\u7684\u5f00\u9500\u53d8\u5f97\u4e0d\u53ef\u63a5\u53d7\u3002\u539f\u56e0\u5f88\u660e\u663e\uff1a \u6211\u4eec\u5c06\u6240\u6709\u884c\u6392\u5e8f\uff0c\u4f46\u53ea\u4fdd\u7559\u5176\u4e2d\u7684\u4e00\u884c \u3002\u5176\u5b9e\u6709\u66f4\u9ad8\u6548\u7684\u65b9\u6cd5\u6765\u5b9e\u73b0\u6b64\u9700\u6c42\uff0c\u70b9\u51fb\u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"\u907f\u514d\u4f7f\u7528\u968f\u673a\u51fd\u6570\u6392\u5e8f"},{"location":"pawreference/rewrite-rules/#union-allunion","text":"\u4f7f\u7528UNION\u6765\u5f97\u5230\u4e24\u4e2a\u7ed3\u679c\u96c6\u7684\u5e76\u96c6\u65f6\uff0c\u4f1a\u5bf9\u5e76\u96c6\u7684\u7ed3\u679c\u96c6\u8fdb\u884c\u53bb\u91cd\uff0c\u53bb\u91cd\u64cd\u4f5c\u5728\u6570\u636e\u5e93\u5185\u90e8\u662f\u901a\u8fc7\u6392\u5e8f\u6216\u662f\u54c8\u5e0c\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u8fd9\u4e24\u79cd\u65b9\u5f0f\u90fd\u4f1a\u9700\u8981\u5927\u91cf\u7684\u8ba1\u7b97\u8d44\u6e90\u3002\u5982\u679c\u903b\u8f91\u4e0a\u53ef\u4ee5\u4fdd\u8bc1\u4e24\u4e2a\u7ed3\u679c\u96c6\u6ca1\u6709\u91cd\u590d\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528UNION ALL\u6765\u4ee3\u66ffUNION\uff0c\u53ef\u4ee5\u83b7\u5f97\u8f83\u5927\u7684\u6027\u80fd\u63d0\u5347\u3002","title":"\u5c3d\u91cf\u4f7f\u7528UNION ALL\u4ee3\u66ffUNION"},{"location":"pawreference/rewrite-rules/#_4","text":"\u5b50\u67e5\u8be2\u7684\u5d4c\u5957\u4f1a\u8ba9SQL\u53d8\u5f97\u590d\u6742\uff0c\u800c\u592a\u590d\u6742\u7684SQL\u4f1a\u8ba9\u6570\u636e\u5e93\u7684\u4f18\u5316\u5668\u751f\u6210\u6267\u884c\u8ba1\u5212\u7684\u65f6\u95f4\u6bd4\u8f83\u957f\uff0c\u4e14\u5bb9\u6613\u751f\u6210\u6027\u80fd\u8f83\u5dee\u7684\u6267\u884c\u8ba1\u5212\uff0c\u6240\u4ee5PawSQL\u68c0\u6d4b\u5b50\u67e5\u8be2\u5d4c\u5957\u7684\u5c42\u6b21\u662f\u5426\u8d85\u8fc7\u67d0\u4e2a\u9608\u503c\uff0c\u5e76\u63d0\u9192\u7528\u6237\u53ef\u80fd\u7684\u98ce\u9669\u3002\u5728PawSQL\u4e2d\uff0c\u9608\u503c\u7684\u9ed8\u8ba4\u503c\u662f2\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u521b\u5efa\u4f18\u5316\u4efb\u52a1\u65f6\u4fee\u6539\u6b64\u9608\u503c\u3002","title":"\u9650\u5236\u5b50\u67e5\u8be2\u7684\u5d4c\u5957\u5c42\u6b21"},{"location":"pawreference/rewrite-rules/#_5","text":"\u5728\u6267\u884c\u8ba1\u5212\u7684\u89c4\u5212\u4e2d\uff0c\u8868\u8fde\u63a5\u7684\u987a\u5e8f\u548c\u8fde\u63a5\u7684\u65b9\u6cd5\u662f\u6570\u636e\u5e93\u4f18\u5316\u5668\u6700\u91cd\u8981\u7684\u89c4\u5212\u5185\u5bb9\u3002\u8868\u8fde\u63a5\u6570\u76ee\u7684\u589e\u52a0\u5c06\u51e0\u4f55\u7ea7\u6570\u5730\u589e\u52a0\u6570\u636e\u5e93\u4f18\u5316\u5668\u5bf9\u4e8e\u6700\u4f18\u6267\u884c\u8ba1\u5212\u7684\u641c\u5bfb\u7a7a\u95f4\uff0c\u5bfc\u81f4\u751f\u6210\u6267\u884c\u8ba1\u5212\u7684\u65f6\u95f4\u6bd4\u8f83\u957f\uff0c\u4e14\u5bb9\u6613\u751f\u6210\u6027\u80fd\u8f83\u5dee\u7684\u6267\u884c\u8ba1\u5212\u3002\u6240\u4ee5PawSQL\u68c0\u6d4b\u67e5\u8be2\u4e2d\u8868\u8fde\u63a5\u5f97\u6570\u76ee\u662f\u5426\u8d85\u8fc7\u67d0\u4e2a\u9608\u503c\uff0c\u5e76\u63d0\u9192\u7528\u6237\u53ef\u80fd\u7684\u98ce\u9669\u3002\u5728PawSQL\u4e2d\uff0c\u9608\u503c\u7684\u9ed8\u8ba4\u503c\u662f5\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u521b\u5efa\u4f18\u5316\u4efb\u52a1\u65f6\u4fee\u6539\u6b64\u9608\u503c\u3002","title":"\u9650\u5236\u67e5\u8be2\u4e2d\u8868\u8fde\u63a5\u7684\u4e2a\u6570"},{"location":"pawreference/rewrite-rules/#_6","text":"\u5f53\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u540c\u65f6\uff0c\u5728\u67e5\u8be2\u6267\u884c\u8fc7\u7a0b\u4e2d\u4f1a\u8fdb\u884c\u4e00\u4e9b\u9690\u5f0f\u7684\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u3002\u7c7b\u578b\u8f6c\u6362\u6709\u65f6\u4f1a\u5e94\u7528\u4e8e\u6761\u4ef6\u4e2d\u7684\u5e38\u91cf\uff0c\u6709\u65f6\u4f1a\u5e94\u7528\u4e8e\u6761\u4ef6\u4e2d\u7684\u5217\u3002\u5f53\u5728\u5217\u4e0a\u5e94\u7528\u7c7b\u578b\u8f6c\u6362\u65f6\uff0c\u5728\u67e5\u8be2\u6267\u884c\u671f\u95f4\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15\uff0c\u53ef\u80fd\u5bfc\u81f4\u4e25\u91cd\u7684\u6027\u80fd\u95ee\u9898\u3002\u8b6c\u5982\u5bf9\u4e8e\u4ee5\u4e0b\u7684SQL\uff0c select count ( * ) from ORDERS where O_ORDERDATE = current_date (); \u5982\u679c O_ORDERDATE \u5217\u7684\u6570\u636e\u7c7b\u578b\u662f CHAR(16) \uff0c\u90a3\u4e48 O_ORDERDATE \u4e0a\u7684\u7d22\u5f15\u5c06\u4e0d\u4f1a\u88ab\u4f7f\u7528\uff0c\u5bfc\u81f4\u5168\u8868\u626b\u63cf\u3002\u89e3\u51b3\u65b9\u6848\u901a\u5e38\u6709\u4e24\u4e2a\uff0c\u4e00\u662f ALTER TABLE \u6539\u53d8 O_ORDERDATE \u7684\u6570\u636e\u7c7b\u578b\uff0c\u4e8c\u662f\u628a current_date \u5f3a\u5236\u6362\u6362\u4e3a CHAR \u7c7b\u578b\uff08PawSQL\u63d0\u4f9b\u8be5\u91cd\u5199\u5efa\u8bae\uff09\u3002 select count ( * ) ORDERS where ORDERS . O_ORDERDATE = cast ( current_date () as CHAR ( 16 )); \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"\u7c7b\u578b\u8f6c\u6362\u5bfc\u81f4\u7d22\u5f15\u5931\u6548"},{"location":"pawreference/rewrite-rules/#_7","text":"\u5f53\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u540c\u65f6\uff0c\u5728\u67e5\u8be2\u6267\u884c\u8fc7\u7a0b\u4e2d\u4f1a\u8fdb\u884c\u4e00\u4e9b\u9690\u5f0f\u7684\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u3002\u5f53\u5728\u5217\u4e0a\u5e94\u7528\u7c7b\u578b\u8f6c\u6362\u65f6\uff0c\u5728\u67e5\u8be2\u6267\u884c\u671f\u95f4\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15\uff0c\u53ef\u80fd\u5bfc\u81f4\u4e25\u91cd\u7684\u6027\u80fd\u95ee\u9898\u3002PawSQL\u4f1a\u68c0\u67e5\u7c7b\u578b\u4e0d\u5339\u914d\u7684\u8fde\u63a5\u6761\u4ef6\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u3002 \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"\u907f\u514d\u8fde\u63a5\u5b57\u6bb5\u7c7b\u578b\u4e0d\u5339\u914d"},{"location":"pawreference/rewrite-rules/#selectfor-update","text":"SELECT \u8bed\u53e5\u6dfb\u52a0 FOR UPDATE \u4f1a\u5bfc\u81f4\u9501\u8868\u6216\u9501\u6570\u636e\u884c\uff0c\u5f71\u54cd\u67e5\u8be2\u7684\u5e76\u53d1\u6027\uff0c\u5bfc\u81f4\u963b\u585e\u548c\u6574\u4f53\u6027\u80fd\u4e0b\u964d\uff0c\u9700\u8c28\u614e\u4f7f\u7528\u3002\u6240\u4ee5PawSQL\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u3002","title":"\u907f\u514d\u5728SELECT\u8bed\u53e5\u6dfb\u52a0FOR UPDATE"},{"location":"pawreference/rewrite-rules/#updatelimit","text":"\u5728 UPDATE \u8bed\u53e5\u4e2d\u4f7f\u7528 LIMIT \u4f1a\u5bfc\u81f4\u4e0d\u53ef\u9884\u6d4b\u66f4\u65b0\u7684\u6570\u636e\uff0c\u9700\u8c28\u614e\u4f7f\u7528\u3002\u6240\u4ee5PawSQL\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u3002","title":"\u907f\u514d\u5728UPDATE\u8bed\u53e5\u4e2d\u4f7f\u7528LIMIT"},{"location":"pawreference/rewrite-rules/#updeletelimitorder-by","text":"\u5728 UPDATE \u6216 DELETE \u8bed\u53e5\u4e2d\u4f7f\u7528 LIMIT \u800c\u6ca1\u6709 ORDER BY ,\u4f1a\u5bfc\u81f4\u6bcf\u6b21\u6267\u884c\u7684\u7ed3\u679c\u4e0d\u4e00\u81f4\u3002PawSQL\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u3002 PostgreSQL/Opengauss\u4e0d\u652f\u6301\u5728 UPDATE \u6216 DELETE \u8bed\u53e5\u4e2d\u4f7f\u7528 ORDER BY \u5b50\u53e5\u3002","title":"\u907f\u514d\u5728UPDELETE\u8bed\u53e5\u4e2d\u4f7f\u7528LIMIT\u800c\u6ca1\u6709ORDER BY"},{"location":"pawreference/rewrite-rules/#selectlimitorder-by","text":"\u5728 SELECT \u8bed\u53e5\u4e2d\u4f7f\u7528 LIMIT \u800c\u6ca1\u6709 ORDER BY ,\u4f1a\u5bfc\u81f4\u6bcf\u6b21\u6267\u884c\u7684\u7ed3\u679c\u4e0d\u4e00\u81f4\u3002PawSQL\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u3002","title":"\u907f\u514d\u5728SELECT\u8bed\u53e5\u4e2d\u4f7f\u7528LIMIT\u800c\u6ca1\u6709ORDER BY"},{"location":"pawreference/rewrite-rules/#select_1","text":"\u6ca1\u6709\u67e5\u8be2\u6761\u4ef6\u6216\u67e5\u8be2\u6761\u4ef6\u6052\u771f\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u4e14\u65e0\u5206\u7ec4\u8bed\u6cd5\uff0c\u4f1a\u5bfc\u81f4\u5168\u8868\u626b\u63cf\u4ee5\u53ca\u7ed3\u679c\u96c6\u5de8\u5927\u3002PawSQL\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u3002","title":"\u907f\u514d\u65e0\u6761\u4ef6\u4e14\u65e0\u5206\u7ec4\u7684SELECT\u8bed\u53e5"},{"location":"pawreference/rewrite-rules/#updelete","text":"\u6ca1\u6709\u67e5\u8be2\u6761\u4ef6\u6216\u67e5\u8be2\u6761\u4ef6\u6052\u771f\u7684 UPDATE \u6216 DELETE \u8bed\u53e5\uff0c\u4f1a\u66f4\u65b0\u6216\u5220\u9664\u6240\u6709\u6570\u636e\u8bb0\u5f55\uff0c\u662f\u975e\u5e38\u5371\u9669\u7684\u64cd\u4f5c\u3002PawSQL\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u8fdb\u884c\u63d0\u9192\u3002","title":"\u907f\u514d\u65e0\u6761\u4ef6\u7684UPDELETE\u8bed\u53e5"},{"location":"pawreference/rewrite-rules/#insert","text":"\u6279\u91cf\u63d2\u5165\u503c\u53ef\u4ee5\u6709\u6548\u7684\u63d0\u5347\u6570\u636e\u63d2\u5165\u7684\u6548\u7387\uff0c\u5982\u4e0b\u4f8b\uff0c insert into customer ( c_custkey , lastname , firstName ) values ( 1 , 'Dan' , 'Mike' ),( 2 , 'Chaw' , 'Tomas' ),( 3 , 'Wang' , 'Nancy' ); \u4f46\u662f\u5982\u679c\u63d2\u5165\u7684\u6570\u636e\u91cf\u592a\u591a\uff0c\u8d85\u8fc7\u6570\u636e\u5e93\u7684\u9650\u5236\uff08MySQL: max_allowed_packet\uff09\uff0c\u5bfc\u81f4\u6570\u636e\u5e93\u7aef\u62a5\u9519\u3002\u5728PawSQL\u4e2d\uff0c\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5199\u6cd5\uff0c\u5e76\u5bf9\u8d85\u8fc7\u9608\u503c\uff08\u9ed8\u8ba4\u4e3a500\uff09\u7684SQL\u63d0\u793a\u9884\u8b66\u3002","title":"INSERT\u8bed\u53e5\u4e2d\u503c\u7684\u6570\u91cf\u4e0d\u8981\u8d85\u8fc7\u9608\u503c"},{"location":"pawreference/rewrite-rules/#insert_1","text":"INSERT\u8bed\u53e5\u5e94\u8be5\u6307\u5b9a\u5217\u540d\uff0c\u5b83\u53ef\u4ee5\u51cf\u5c11\u63d2\u5165\u7684\u503c\u4e0e\u76ee\u6807\u8868\u7684\u5217\u4e4b\u95f4\u51fa\u73b0\u9519\u4f4d\u7684\u53ef\u80fd\u6027\u3002 insert into customer value ( 1 , 'Dan' , 'Mike' ); \u4e0b\u9762\u7684\u5199\u6cd5\u53ef\u4ee5\u51cf\u5c11\u63d2\u5165\u7684\u503c\u4e0e\u76ee\u6807\u8868\u7684\u5217\u4e4b\u95f4\u51fa\u73b0\u9519\u4f4d\u7684\u53ef\u80fd\u6027\uff0c\u4ee3\u7801\u66f4\u5bb9\u6613\u7ef4\u62a4\u3002 insert into customer ( c_custkey , lastname , firstName ) value ( 1 , 'Dan' , 'Mike' );","title":"\u907f\u514dINSERT\u4e0d\u6307\u5b9a\u5217\u540d"},{"location":"pawreference/rewrite-rules/#offset","text":"\u5728SQL\u67e5\u8be2\u4e2d\uff0cLIMIT\u5b50\u53e5\u7528\u4e8e\u9650\u5236\u67e5\u8be2\u7ed3\u679c\u7684\u6570\u91cf\uff0c\u800cOFFSET\u5b50\u53e5\u7528\u4e8e\u6307\u5b9a\u4ece\u67e5\u8be2\u7ed3\u679c\u96c6\u4e2d\u7684\u54ea\u4e00\u884c\u5f00\u59cb\u8fd4\u56de\u6570\u636e\u3002\u5f53OFFSET\u503c\u5f88\u5927\u65f6\uff0c\u67e5\u8be2\u5f15\u64ce\u5fc5\u987b\u626b\u63cf\u8d8a\u6765\u8d8a\u591a\u7684\u6570\u636e\uff0c\u4ee5\u627e\u5230\u504f\u79fb\u91cf\u4e4b\u540e\u7684\u6570\u636e\u884c\u3002\u5728\u6570\u636e\u96c6\u5f88\u5927\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u67e5\u8be2\u53d8\u5f97\u975e\u5e38\u6162\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u5360\u7528\u5927\u91cf\u7684\u7cfb\u7edf\u8d44\u6e90\u3002","title":"OFFSET\u7684\u503c\u8d85\u8fc7\u9608\u503c"},{"location":"pawreference/rewrite-rules/#like","text":"\u5728SQL\u67e5\u8be2\u4e2d\uff0cLIKE\u64cd\u4f5c\u7b26\u7528\u4e8e\u5339\u914d\u5b57\u7b26\u4e32\u3002\u5982\u679c\u6a21\u5f0f\u5b57\u7b26\u4e32\u4ee5%\u5f00\u5934\uff08\u4f8b\u5982 LIKE '%ABC' \uff09\uff0c\u5219\u6570\u636e\u5e93\u4f18\u5316\u5668\u65e0\u6cd5\u5229\u7528\u7d22\u5f15\u6765\u8fc7\u6ee4\u6570\u636e\uff0c\u5bb9\u6613\u9020\u6210\u5168\u8868\u626b\u63cf\u3002\u5728\u6ca1\u6709\u5176\u4ed6\u8fc7\u6ee4\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u5bf9\u67e5\u8be2\u6027\u80fd\u548c\u6548\u7387\u4ea7\u751f\u8f83\u5927\u7684\u5f71\u54cd\u3002\u6240\u4ee5\u5e94\u8be5\u5c3d\u91cf\u907f\u514d%\u5f00\u5934\u7684\u67e5\u8be2\u6761\u4ef6\uff0c\u5982\u679c\u4e0d\u5f97\u4e0d\u4f7f\u7528%\u5f00\u5934\u7684\u5339\u914d\uff0c\u53ef\u4ee5\u8003\u8651\u521b\u5efa\u5168\u6587\u7d22\u5f15\u6765\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u3002","title":"\u907f\u514d%\u5f00\u5934\u7684LIKE\u67e5\u8be2"},{"location":"pawreference/rewrite-rules/#orselectunion","text":"\u5982\u679c\u4f7f\u7528 OR \u6761\u4ef6\u7684\u67e5\u8be2\u8bed\u53e5\uff0c\u6570\u636e\u5e93\u4f18\u5316\u5668\u6709\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15\u6765\u5b8c\u6210\u67e5\u8be2\u3002\u8b6c\u5982\uff0c select * from lineitem where l_shipdate = date '2010-12-01' or l_partkey < 100 \u5982\u679c\u8fd9\u4e24\u4e2a\u5b57\u6bb5\u4e0a\u90fd\u6709\u7d22\u5f15\uff0c\u53ef\u4ee5\u628a\u67e5\u8be2\u8bed\u53e5\u91cd\u5199\u4e3a UNION \u67e5\u8be2\uff0c\u4ee5\u4fbf\u4f7f\u7528\u7d22\u5f15\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u3002 select * from lineitem where l_shipdate = date '2010-12-01' union select * from lineitem where l_partkey < 100 \u5982\u679c\u6570\u636e\u5e93\u652f\u6301 INDEX MERGING \uff08\u8bf7\u53c2\u8003 \u5982\u4f55\u521b\u5efa\u9ad8\u6548\u7684\u7d22\u5f15 \uff09\uff0c\u4e5f\u53ef\u4ee5\u8c03\u6574\u6570\u636e\u5e93\u76f8\u5173\u53c2\u6570\u542f\u7528 INDEX MERGING \u4f18\u5316\u7b56\u7565\u6765\u63d0\u5347\u6570\u636e\u5e93\u6027\u80fd\u3002\u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"OR\u6761\u4ef6\u7684SELECT\u91cd\u5199\u4e3aUNION"},{"location":"pawreference/rewrite-rules/#orupdelete","text":"\u5982\u679c\u6709\u4f7f\u7528 OR \u6761\u4ef6\u7684UPDATE\u6216DELETE\u8bed\u53e5\uff0c\u6570\u636e\u5e93\u4f18\u5316\u5668\u6709\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15\u6765\u5b8c\u6210\u64cd\u4f5c\u3002 delete from lineitem where l_shipdate = date '2010-12-01' or l_partkey < 100 \u5982\u679c\u8fd9\u4e24\u4e2a\u5b57\u6bb5\u4e0a\u90fd\u6709\u7d22\u5f15\uff0c\u53ef\u4ee5\u628a\u5b83\u91cd\u5199\u4e3a\u591a\u4e2aDELETE\u8bed\u53e5\uff0c\u5229\u7528\u7d22\u5f15\u63d0\u5347\u67e5\u8be2\u6027\u80fd\u3002 delete from lineitem where l_shipdate = date '2010-12-01' ; delete from lineitem where l_partkey < 100 ; \u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"OR\u6761\u4ef6\u7684UPDELETE\u91cd\u5199\u4f18\u5316"},{"location":"pawreference/rewrite-rules/#delete","text":"\u6ca1\u6709\u67e5\u8be2\u6761\u4ef6\u6216\u67e5\u8be2\u6761\u4ef6\u6052\u771f\u7684 DELETE \u8bed\u53e5\u4f1a\u5220\u9664\u8868\u4e2d\u7684\u6240\u6709\u6570\u636e\u3002 DELETE \u8bed\u53e5\u9700\u8981\u5199\u5927\u91cf\u65e5\u5fd7\uff0c\u4ee5\u4fbf\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u53ca\u4e3b\u5907\u540c\u6b65\u3002\u5bf9\u4e8e\u5927\u8868\u800c\u8a00\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u7684\u9501\u5b9a\u548c\u4e8b\u52a1\u963b\u585e\uff0c\u540c\u65f6\u4f1a\u5360\u7528\u5927\u91cf\u7684\u65e5\u5fd7\u7a7a\u95f4\u3002\u5982\u679c\u786e\u8ba4\u8868\u4e2d\u7684\u6570\u636e\u4e0d\u518d\u9700\u8981\uff0c\u53ef\u4ee5\u901a\u8fc7 TRUNCATE \u8868\u4e86\u4ee3\u66ff DELETE \u8bed\u53e5\u3002 TRUNCATE \u6bd4 DELETE \u8bed\u53e5\u66f4\u5feb\uff0c\u56e0\u4e3a\u5b83\u4e0d\u4f1a\u8bb0\u5f55\u6bcf\u4e2a\u5220\u9664\u7684\u884c\uff0c\u800c\u662f\u76f4\u63a5\u5c06\u8868\u6e05\u7a7a\u5e76\u91ca\u653e\u7a7a\u95f4\u3002 delete from lineitem \u91cd\u5199\u4e3a truncate lineitem","title":"\u65e0\u6761\u4ef6\u7684DELETE\u91cd\u5199\u4f18\u5316"},{"location":"pawreference/rewrite-rules/#_8","text":"\u5728\u7d22\u5f15\u5217\u4e0a\u7684\u8fd0\u7b97\u5c06\u5bfc\u81f4\u7d22\u5f15\u5931\u6548\uff0c\u5bb9\u6613\u9020\u6210\u5168\u8868\u626b\u63cf\uff0c\u4ea7\u751f\u4e25\u91cd\u7684\u6027\u80fd\u95ee\u9898\u3002\u6240\u4ee5\u9700\u8981\u5c3d\u91cf\u5c06\u7d22\u5f15\u5217\u4e0a\u7684\u8fd0\u7b97\u8f6c\u6362\u5230\u5e38\u91cf\u7aef\u8fdb\u884c\uff0c\u8b6c\u5982\u4e0b\u9762\u7684SQL\u3002 select * from tpch . orders where adddate ( o_orderdate , INTERVAL 31 DAY ) = date '2019-10-10' adddate \u51fd\u6570\u5c06\u5bfc\u81f4 o_orderdate \u4e0a\u7684\u7d22\u5f15\u4e0d\u53ef\u7528\uff0c\u53ef\u4ee5\u5c06\u5176\u8f6c\u6362\u6210\u4e0b\u9762\u8fd9\u4e2a\u7b49\u4ef7\u7684SQL\uff0c\u4ee5\u4fbf\u4f7f\u7528\u7d22\u5f15\u63d0\u5347\u67e5\u8be2\u6548\u7387\u3002 select * from tpch.orders where o_orderdate = subdate(date '2019-10-10' , INTERVAL 31 DAY); PawSQL\u53ef\u4ee5\u5e2e\u52a9\u8f6c\u6362\u5927\u91cf\u7684\u51fd\u6570\u4ee5\u53ca +\u3001-\u3001*\u3001/ \u8fd0\u7b97\u7b26\u76f8\u5173\u7684\u64cd\u4f5c\u3002\u70b9\u51fb\u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"\u907f\u514d\u5728\u7d22\u5f15\u5217\u4e0a\u8fd0\u7b97"},{"location":"pawreference/rewrite-rules/#in_1","text":"IN\u5b50\u67e5\u8be2\u662f\u6307\u7b26\u5408\u4e0b\u9762\u5f62\u5f0f\u7684\u5b50\u67e5\u8be2\uff0cIN\u5b50\u67e5\u8be2\u53ef\u4ee5\u6539\u5199\u6210\u7b49\u4ef7\u7684\u76f8\u5173EXISTS\u5b50\u67e5\u8be2\u6216\u662f\u5185\u8fde\u63a5\uff0c\u4ece\u800c\u53ef\u4ee5\u4ea7\u751f\u4e00\u4e2a\u65b0\u7684\u8fc7\u6ee4\u6761\u4ef6\uff0c\u5982\u679c\u8be5\u8fc7\u6ee4\u6761\u4ef6\u4e0a\u6709\u5408\u9002\u7684\u7d22\u5f15\uff0c\u6216\u662f\u901a\u8fc7PawSQL\u7d22\u5f15\u63a8\u8350\u5f15\u64ce\u63a8\u8350\u5408\u9002\u7684\u7d22\u5f15\uff0c\u53ef\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u3002 ( expr1 , expr2 ...) [ NOT ] IN ( SELECT expr3 , expr4 , ...) IN\u5b50\u67e5\u8be2\u91cd\u5199\u4e3aEXISTS \u8b6c\u5982\u4e0b\u9762\u7684IN\u5b50\u67e5\u8be2\u8bed\u8a00\u662f\u4e3a\u4e86\u83b7\u53d6\u6700\u8fd1\u4e00\u5e74\u5185\u6709\u8ba2\u5355\u7684\u7528\u6237\u4fe1\u606f\uff0c select * from customer where c_custkey in ( select o_custkey from orders where O_ORDERDATE >= current_date - interval 1 year ) \u5b83\u53ef\u4ee5\u91cd\u5199\u4e3aexists\u5b50\u67e5\u8be2\uff0c\u4ece\u800c\u53ef\u4ee5\u4ea7\u751f\u4e00\u4e2a\u8fc7\u6ee4\u6761\u4ef6\uff08c_custkey = o_custkey\uff09\uff1a select * from customer where exists ( select * from orders where c_custkey = o_custkey and O_ORDERDATE >= current_date - interval 1 year ) IN\u5b50\u67e5\u8be2\u91cd\u5199\u4e3a\u5185\u5173\u8054 \u5982\u679c\u5b50\u67e5\u8be2\u7684\u67e5\u8be2\u7ed3\u679c\u662f\u4e0d\u91cd\u590d\u7684\uff0c\u5219IN\u5b50\u67e5\u8be2\u53ef\u4ee5\u91cd\u5199\u4e3a\u4e24\u4e2a\u8868\u7684\u5173\u8054\uff0c\u4ece\u800c\u8ba9\u6570\u636e\u5e93\u4f18\u5316\u5668\u53ef\u4ee5\u89c4\u5212\u66f4\u4f18\u7684\u8868\u8fde\u63a5\u987a\u5e8f\uff0c\u4e5f\u53ef\u4ee5\u8ba9PawSQL\u63a8\u8350\u66f4\u597d\u7684\u4f18\u5316\u65b9\u6cd5\u3002 \u8b6c\u5982\u4e0b\u9762\u7684SQL\uff0c c_custkey\u662f\u8868customer\u7684\u4e3b\u952e\uff0c select * from orders where o_custkey in ( select c_custkey from customer where c_phone like '139%' ) \u5219\u4e0a\u9762\u7684\u67e5\u8be2\u8bed\u53e5\u53ef\u4ee5\u91cd\u5199\u4e3a select orders . * from orders , customer where o_custkey = c_custkey and c_phone like '139%' \u70b9\u51fb\u83b7\u53d6\u8be5\u4f18\u5316\u7684\u66f4 \u8be6\u7ec6\u4fe1\u606f \u3002","title":"IN\u5b50\u67e5\u8be2\u91cd\u5199\u4f18\u5316"},{"location":"pawreference/rewrite-rules/#exists","text":"Exists\u5b50\u67e5\u8be2\u5411\u5916\u5c42\u67e5\u8be2\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c,\u8868\u793a\u662f\u5426\u5b58\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u884c\u3002\u6ee1\u8db3\u4e00\u5b9a\u6761\u4ef6\u7684EXISTS \u5b50\u67e5\u8be2\u53ef\u4ee5\u8f6c\u6362\u4e3a JOIN\uff0c\u4ece\u800c\u53ef\u4ee5\u8ba9\u6570\u636e\u5e93\u4f18\u5316\u5668\u5bf9\u9a71\u52a8\u8868\u7684\u9009\u62e9\u6709\u66f4\u591a\u7684\u9009\u62e9\uff0c\u4ece\u800c\u751f\u6210\u66f4\u4f18\u7684\u67e5\u8be2\u8ba1\u5212\u3002 \u8b6c\u5982\u5bf9\u4e8e\u5982\u4e0b\u7684\u67e5\u8be2\uff0c select * from lineitem l where exists ( select * from part p where p . p_partkey = l . l_partkey and p . p_name = 'a' ) \u5982\u679c\u5b50\u67e5\u8be2\u5bf9\u4e8e\u6bcf\u4e00\u4e2a l.l_partkey ,\u90fd\u81f3\u591a\u8fd4\u56de\u4e00\u884c\u8bb0\u5f55\uff08\u5373\u5728\u7b49\u503c\u6761\u4ef6\u7684\u5217\u4e0a (p_partkey\uff0cp_name) \u6709\u4e00\u4e2a\u552f\u4e00\u6027\u7ea6\u675f\uff09\uff0c\u5219\u6b64\u5b50\u67e5\u8be2\u53ef\u4ee5\u91cd\u5199\u4e3a\u5982\u4e0b\u7684\u5f62\u5f0f: select l . * from lineitem as l , part as p where p . p_partkey = l . l_partkey and p . p_name = 'a'","title":"Exists\u5b50\u67e5\u8be2\u8f6c\u6362\u4e3a\u8868\u5173\u8054"},{"location":"pawreference/rewrite-rules/#distinct","text":"\u5bf9\u4e8e\u4ec5\u8fdb\u884c\u5b58\u5728\u6027\u6d4b\u8bd5\u7684\u5b50\u67e5\u8be2,\u5982\u679c\u5b50\u67e5\u8be2\u5305\u542bdistinct\u901a\u5e38\u53ef\u4ee5\u5220\u9664,\u4ee5\u907f\u514d\u4e00\u6b21\u53bb\u91cd\u64cd\u4f5c IN\u5b50\u67e5\u8be2: SELECT * FROM customer WHERE c_custkey IN ( SELECT DISTINCT o_custkey FROM orders ); \u53ef\u4ee5\u7b80\u5316\u4e3a: SELECT * FROM customer WHERE c_custkey IN ( SELECT o_custkey FROM orders );","title":"\u5b50\u67e5\u8be2\u4e2d\u7684DISTINCT\u6d88\u9664"},{"location":"pawreference/rewrite-rules/#limit","text":"\u5982\u679c\u5b50\u67e5\u8be2\u6ca1\u6709LIMIT\u5b50\u53e5\uff0c\u90a3\u4e48\u5b50\u67e5\u8be2\u7684\u6392\u5e8f\u64cd\u4f5c\u5c31\u6ca1\u6709\u610f\u4e49\uff0c\u53ef\u4ee5\u5c06\u5176\u5220\u9664\u800c\u4e0d\u5f71\u54cd\u6700\u7ec8\u7684\u7ed3\u679c\u3002\u4e00\u4e9b\u6848\u4f8b\u5982\u4e0b\uff1a EXISTS\u5b50\u67e5\u8be2 select * from lineitem l where exists ( select * from part p where p . p_partkey = l . l_partkey and p . p_name = 'a' order by p_name ) \u53ef\u4ee5\u91cd\u5199\u4e3a select * from lineitem l where exists ( select * from part p where p . p_partkey = l . l_partkey and p . p_name = 'a' )","title":"\u5b50\u67e5\u8be2\u4e2d\u6ca1\u6709LIMIT\u7684\u6392\u5e8f\u6d88\u9664"},{"location":"pawreference/rewrite-rules/#_9","text":"\u5982\u679c\u6392\u5e8f\u6216\u5206\u7ec4\u5b57\u6bb5\u6765\u81ea\u4e0d\u540c\u7684\u8868\uff0c\u6570\u636e\u5e93\u4f18\u5316\u5668\u5c06\u6ca1\u6709\u529e\u6cd5\u5229\u7528\u7d22\u5f15\u7684\u6709\u5e8f\u6027\u6765\u907f\u514d\u4e00\u6b21\u6392\u5e8f\u3002\u5982\u679cWHERE\u6216\u662fHAVING\u5b50\u53e5\u91cc\u5b58\u5728\u7b49\u503c\u6761\u4ef6\uff0cPawSQL\u53ef\u4ee5\u6392\u5e8f\u6216\u5206\u7ec4\u5b57\u6bb5\u8fdb\u884c\u66ff\u6362\uff0c\u4f7f\u5176\u6765\u81ea\u540c\u4e00\u5f20\u8868\uff0c\u4ece\u800c\u80fd\u591f\u5229\u7528\u7d22\u5f15\u6765\u907f\u514d\u4e00\u6b21\u6392\u5e8f\u3002\u8b6c\u5982\u4e0b\u9762\u7684\u67e5\u8be2 select o_custkey , c_name , sum ( o . O_TOTALPRICE ) from customer c , orders o where o_custkey = c_custkey group by o_custkey , c_name \u5206\u7ec4\u5b57\u6bb5 o_custkey, c_name \u6765\u81ea\u4e24\u4e2a\u8868\uff0c\u4e14\u5b58\u5728\u8fc7\u6ee4\u6761\u4ef6 o_custkey = c_custkey \uff0c\u53ef\u4ee5\u91cd\u5199\u4e3a select c_custkey , c_name , sum ( o . O_TOTALPRICE ) from customer c , orders o where o_custkey = c_custkey group by c_custkey , c_name","title":"\u6392\u5e8f\u5206\u7ec4\u5b57\u6bb5\u6765\u81ea\u4e0d\u540c\u8868\u91cd\u5199\u4f18\u5316"},{"location":"pawreference/rewrite-rules/#anysomeall","text":"ANY/SOME/ALL\u4fee\u9970\u7684\u5b50\u67e5\u8be2\u6765\u6e90\u81eaSQL-92 \u6807\u51c6, \u901a\u5e38\u7528\u4e8e\u68c0\u67e5\u67d0\u4e2a\u503c\u4e0e\u5b50\u67e5\u8be2\u8fd4\u56de\u7684\u5168\u90e8\u503c\u6216\u4efb\u610f\u503c\u7684\u5927\u5c0f\u5173\u7cfb\u3002\u4f7f\u7528ANY/SOME/ALL\u4fee\u9970\u7684\u5b50\u67e5\u8be2\u6267\u884c\u6548\u7387\u4f4e\u4e0b,\u56e0\u4e3a\u9700\u8981\u5bf9\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u9010\u884c\u8fdb\u884c\u6bd4\u8f83,\u968f\u7740\u7ed3\u679c\u96c6\u5927\u5c0f\u589e\u52a0\u800c\u7ebf\u6027\u4e0b\u964d\u3002\u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u91cd\u5199\u7684\u65b9\u5f0f\u63d0\u5347\u5176\u6267\u884c\u6548\u7387\u3002 \u8b6c\u5982\u5bf9\u4e8e\u4e0b\u9762\u7684SQL\uff1a select * from orders where o_orderdate < all ( select o_orderdate from orders where o_custkey > 100 ) \u5bf9\u4e8eMySQL\uff0c\u53ef\u4ee5\u91cd\u5199\u4e3a select * from orders where o_orderdate < ( select o_orderdate from orders where o_custkey > 100 order by o_orderdate asc limit 1 ) \u5bf9\u4e8ePostgreSQL\u6216Oracle\uff0c\u5219\u53ef\u4ee5\u91cd\u5199\u4e3a select * from orders where o_orderdate < ( select o_orderdate from orders where o_custkey > 100 order by o_orderdate asc nulls first limit 1 )","title":"ANY/SOME/ALL\u4fee\u9970\u7684\u5b50\u67e5\u8be2\u4f18\u5316"},{"location":"pawreference/rewrite-rules/#pawsql_1","text":"PawSQL\u4e13\u6ce8\u6570\u636e\u5e93\u6027\u80fd\u4f18\u5316\u7684\u81ea\u52a8\u5316\u548c\u667a\u80fd\u5316\uff0c\u652f\u6301MySQL\uff0cPostgreSQL\uff0cOpengauss\u7b49\uff0c\u63d0\u4f9b\u7684SQL\u4f18\u5316\u4ea7\u54c1\u5305\u62ec PawSQL Cloud \uff0c\u5728\u7ebf\u81ea\u52a8\u5316SQL\u4f18\u5316\u5de5\u5177\uff0c\u652f\u6301SQL\u5ba1\u67e5\uff0c\u667a\u80fd\u67e5\u8be2\u91cd\u5199\u3001\u57fa\u4e8e\u4ee3\u4ef7\u7684\u7d22\u5f15\u63a8\u8350\uff0c\u9002\u7528\u4e8e\u6570\u636e\u5e93\u7ba1\u7406\u5458\u53ca\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c PawSQL Advisor \uff0cIntelliJ \u63d2\u4ef6, \u9002\u7528\u4e8e\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c\u53ef\u4ee5IDEA/DataGrip\u5e94\u7528\u5e02\u573a\u901a\u8fc7\u540d\u79f0\u641c\u7d22\u201cPawSQL Advisor\u201d\u5b89\u88c5\u3002 PawSQL Engine, \u662fPawSQL\u7cfb\u5217\u4ea7\u54c1\u7684\u540e\u7aef\u4f18\u5316\u5f15\u64ce\uff0c\u53ef\u4ee5\u4ee5docker\u955c\u50cf\u7684\u65b9\u5f0f\u72ec\u7acb\u5b89\u88c5\u90e8\u7f72\uff0c\u5e76\u901a\u8fc7http/json\u7684\u63a5\u53e3\u63d0\u4f9bSQL\u4f18\u5316\u670d\u52a1\u3002 PawSQL Ora2pg/PawsQL Ora2op\uff0cOracle\u8bed\u6cd5\u7684SQL\u5e94\u7528\u8f6c\u6362\u4e3aPostgreSQL\u548copenGauss\u8bed\u6cd5\u7684\u5de5\u5177\u3002","title":"\u5173\u4e8ePawSQL"},{"location":"pawreference/rewrite-rules/#_10","text":"\u7f51\u5740: https://app.pawsql.com \u90ae\u4ef6\uff1a service@pawsql.com Twitter: https://twitter.com/pawsql \u626b\u63cf\u5173\u6ce8PawSQL\u516c\u4f17\u53f7","title":"\u8054\u7cfb\u6211\u4eec"},{"location":"pawreference/sat-tc/","text":"SAT-TC Rewrite \u00b6 Channel of advanced SQL tuning Definition \u00b6 SAT-TC(Satisfiability-Transitive Closure) rewrite rule analyzes a set of predicates and try to determine if 1) there is a contradiction (e.g., c_custkey=1 AND c_custkey=0 ), or 2) new predicates can be inferred from the set (e.g., c_custkey=1 AND c_custkey=o_custkey implies o_custkey=1 . 3) predicates can simplified (e.g. c_custkey <> c_custkey or c_name = 'b' can be simplified to c_name = 'b' ) Benefit \u00b6 Save unnecessary predicate evaluations (for database optimizer ) Provide additional access path to the Join Planner (for database optimizer ) Enable other rewrite rules (for both database optimizer and PawSQL engine ) Provide more predicates for index recommendation(for PawSQL ); Examples \u00b6 SAT Example : original query select c.c_name FROM customer c where c.c_name = 'John' and c.c_name = 'Jessey' rewritten query select c.c_name from customer as c where 1 = 0 TC Example original query select o_custkey as cust_no, l_extendedprice * (1 - l_discount) from orders, lineitem where l_orderkey = o_orderkey and l_orderkey = 'ORD1234'; rewritten query select o_custkey as cust_no, l_extendedprice * (1 - l_discount) from orders, lineitem where l_orderkey = o_orderkey and l_orderkey = 'ORD1234' and o_orderkey = 'ORD1234';","title":"SAT-TC\u91cd\u5199"},{"location":"pawreference/sat-tc/#sat-tc-rewrite","text":"Channel of advanced SQL tuning","title":"SAT-TC Rewrite"},{"location":"pawreference/sat-tc/#definition","text":"SAT-TC(Satisfiability-Transitive Closure) rewrite rule analyzes a set of predicates and try to determine if 1) there is a contradiction (e.g., c_custkey=1 AND c_custkey=0 ), or 2) new predicates can be inferred from the set (e.g., c_custkey=1 AND c_custkey=o_custkey implies o_custkey=1 . 3) predicates can simplified (e.g. c_custkey <> c_custkey or c_name = 'b' can be simplified to c_name = 'b' )","title":"Definition"},{"location":"pawreference/sat-tc/#benefit","text":"Save unnecessary predicate evaluations (for database optimizer ) Provide additional access path to the Join Planner (for database optimizer ) Enable other rewrite rules (for both database optimizer and PawSQL engine ) Provide more predicates for index recommendation(for PawSQL );","title":"Benefit"},{"location":"pawreference/sat-tc/#examples","text":"SAT Example : original query select c.c_name FROM customer c where c.c_name = 'John' and c.c_name = 'Jessey' rewritten query select c.c_name from customer as c where 1 = 0 TC Example original query select o_custkey as cust_no, l_extendedprice * (1 - l_discount) from orders, lineitem where l_orderkey = o_orderkey and l_orderkey = 'ORD1234'; rewritten query select o_custkey as cust_no, l_extendedprice * (1 - l_discount) from orders, lineitem where l_orderkey = o_orderkey and l_orderkey = 'ORD1234' and o_orderkey = 'ORD1234';","title":"Examples"},{"location":"pawreference/sql-syntax/","text":"\u7d22\u5f15\u63a8\u8350\u5f15\u64ce \u00b6 Copyright \u00a9 2022 PawSQL PawSQL \u7d22\u5f15\u63a8\u8350\u5f15\u64ce\u652f\u6301ANSI\u6807\u51c6\u7684DML\u8bed\u6cd5\uff0c\u5bf9\u6240\u6709\u53ef\u80fd\u7684\u8bed\u6cd5\u7ec4\u5408\u90fd\u80fd\u63a8\u8350\u51fa\u5408\u9002\u7684\u7d22\u5f15\uff0c\u4ee5\u63d0\u5347\u6570\u636e\u5e93\u67e5\u8be2\u6027\u80fd\u3002 \u7d22\u5f15\u7684\u4f5c\u7528 \u00b6 1\u3001\u5feb\u901f\u5b9a\u4f4d \u7b49\u503c\u5e38\u91cf\u6761\u4ef6 \u7b49\u503c\u5173\u8054\u6761\u4ef6 \u8303\u56f4\u6761\u4ef6 2\u3001\u907f\u514d\u6392\u5e8f\uff08B+ Tree\uff09 - order by - group by - distinct - join planning 3\u3001\u907f\u514d\u56de\u8868\uff08index only\uff09 \u6848\u4f8b\u89e3\u91ca SELECT classid , avg ( score ) tscore FROM score WHERE subject = '\u8bed\u6587' GROUP BY classid Index on score(subject ) - \u5feb\u901f\u5b9a\u4f4d Index on score(subject,classid) - \u5feb\u901f\u5b9a\u4f4d + \u907f\u514d\u6392\u5e8f Index on score(subject,classid,score) - \u5feb\u901f\u5b9a\u4f4d + \u907f\u514d\u6392\u5e8f + \u56de\u8868 SQL\u8bed\u6cd5\u53ca\u7d22\u5f15\u63a8\u8350 \u00b6 \u7b49\u503c\u6761\u4ef6 -- \u5355\u5217\u6761\u4ef6 select * from lineitem where l_shipdate = date '1998-12-01' ; -- \u63a8\u8350\u7d22\u5f15 CREATE INDEX PAW_IDX1533504424 ON LINEITEM ( L_SHIPDATE ); -- is null select * from lineitem where l_shipmode is null ; CREATE INDEX PAW_IDX2000792795 ON LINEITEM ( L_SHIPMODE ); -- in \u5355\u503c select * from lineitem where l_shipmode in ( '0' ); CREATE INDEX PAW_IDX2000792795 ON LINEITEM ( L_SHIPMODE ); -- \u591a\u5217\u6761\u4ef6\uff0c\u533a\u5206\u5ea6\u5927\u7684\u5217\u653e\u5728\u524d\u9762 select * from lineitem where l_shipdate = date '1998-12-01' and l_shipmode = '0' ; CREATE INDEX PAW_IDX1942674217 ON LINEITEM ( L_SHIPDATE , L_SHIPMODE ); -- \u6807\u91cf\u5b50\u67e5\u8be2 select * from lineitem where l_shipdate = ( select max ( l_shipdate ) from lineitem ); CREATE INDEX PAW_IDX1533504424 ON LINEITEM ( L_SHIPDATE ); \u8303\u56f4\u6761\u4ef6 -- \u8303\u56f4\u6761\u4ef6>\u3001<\u3001>=\u3001<= select * from lineitem where l_shipdate >= date '1998-12-01' ; CREATE INDEX PAW_IDX0156881833 ON LINEITEM ( L_SHIPDATE ); -- in \u591a\u503c select * from lineitem where l_shipmode in ( '0' , '1' ); CREATE INDEX PAW_IDX2000792795 ON LINEITEM ( L_SHIPMODE ); -- between ... and ... select * from lineitem where l_shipdate between date '2010-12-01' and date '2020-12-01' ; CREATE INDEX PAW_IDX1241878058 ON LINEITEM ( L_SHIPDATE ) \uff1b -- Like \u4e00\u4e2a\u5de6\u524d\u7f00 select * from customer where c_phone like \"139%\" ; CREATE INDEX PAW_IDX0326568991 ON CUSTOMER ( C_PHONE ); \u5206\u7ec4 - \u907f\u514d\u6392\u5e8f -- grouping select l_shipdate , count ( * ) as sum_qty from lineitem group by l_shipdate ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX1614428511 ON LINEITEM ( L_SHIPDATE ); \u6392\u5e8f - \u907f\u514d\u6392\u5e8f -- order by select * from lineitem order by l_shipdate limit 10 ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX1424903467 ON LINEITEM ( L_SHIPDATE ); \u8986\u76d6\u7d22\u5f15 - \u907f\u514d\u56de\u8868 -- index only select l_shipdate , sum ( l_quantity ) as sum_qty from lineitem group by l_shipdate ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX1614428511 ON LINEITEM ( L_SHIPDATE \uff0c L_QUANTITY ); \u8bed\u6cd5\u7ec4\u5408 \uff1a\u7b49\u503c+\u8303\u56f4\uff0c\u7b49\u503c\u6761\u4ef6\u653e\u5728\u524d\u9762 -- equal + range select * from lineitem where l_shipdate = date '1998-12-01' and l_quantity > 100 ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX2048143506 ON LINEITEM ( L_SHIPDATE , L_QUANTITY ); \u8bed\u6cd5\u7ec4\u5408 \uff1a\u7b49\u503c+\u5206\u7ec4+\u8986\u76d6\uff0c\u7b49\u503c\u6761\u4ef6\u653e\u5728\u524d\u9762\uff0c\u8986\u76d6\u5217\u653e\u5230\u6700\u540e -- where+group select l_shipdate , sum ( l_quantity ) as sum_qty from lineitem where l_receiptdate = '2020-01-01' group by l_shipdate ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX2000792795 ON LINEITEM ( L_RECEIPTDATE , L_SHIPDATE , l_quantity ); \u591a\u8868\u5173\u8054 -- \u5185\u8fde\u63a5\uff0c\u4e24\u4e2a\u8868\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u9a71\u52a8\u8868 SELECT * FROM ORDERS , LINEITEM WHERE O_ORDERKEY = L_ORDERKEY ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX2127618499 ON ORDERS ( O_ORDERKEY ); CREATE INDEX PAW_IDX0339323878 ON LINEITEM ( L_ORDERKEY ); -- \u5185\u8fde\u63a5\uff0c\u4e24\u4e2a\u8868\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u9a71\u52a8\u8868 SELECT * FROM ORDERS JOIN LINEITEM ON O_ORDERKEY = L_ORDERKEY ; CREATE INDEX PAW_IDX1531629550 ON ORDERS ( O_ORDERKEY ); CREATE INDEX PAW_IDX1365836084 ON LINEITEM ( L_ORDERKEY ); -- \u5916\u8fde\u63a5\uff0c\u5916\u8868\u4f5c\u4e3a\u9a71\u52a8\u8868\uff0cjoin\u6761\u4ef6\u4f5c\u4e3a\u5347\u7ea7\u4e3a\u7b49\u503c\u6761\u4ef6\uff0c\u53c2\u4e0e\u7d22\u5f15\u63a8\u8350 SELECT * FROM ORDERS LEFT JOIN LINEITEM ON O_ORDERKEY = L_ORDERKEY ; CREATE INDEX PAW_IDX1336974557 ON LINEITEM ( L_ORDERKEY ); SELECT * FROM ORDERS RIGHT JOIN LINEITEM ON O_ORDERKEY = L_ORDERKEY ; CREATE INDEX PAW_IDX1002609246 ON ORDERS ( O_ORDERKEY ); SELECT * FROM ORDERS LEFT JOIN LINEITEM ON O_ORDERKEY = L_ORDERKEY WHERE l_shipdate = date '1998-12-01' ; CREATE INDEX PAW_IDX0711368375 ON LINEITEM ( L_ORDERKEY , L_SHIPDATE ); DT\u5b50\u67e5\u8be2 -- Derived table\uff0c\u4e0d\u540c\u7684\u67e5\u8be2\u5757\u5206\u522b\u8fdb\u884c\u7d22\u5f15\u63a8\u8350\uff0c\u7136\u540e\u8fdb\u884c\u5408\u5e76\u53bb\u91cd select * from supplier ,( select l_suppkey , sum ( l_extendedprice ) as total_revenue from lineitem group by l_suppkey ) revenuewhere s_suppkey = revenue . l_suppkey ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX0151075817 ON SUPPLIER ( S_SUPPKEY ); CREATE INDEX PAW_IDX1968327707 ON LINEITEM ( L_SUPPKEY , L_EXTENDEDPRICE ); \u6761\u4ef6\u5b50\u67e5\u8be2 -- \u6761\u4ef6\u5b50\u67e5\u8be2 select * from supplierwhere s_suppkey = ( select l_suppkey from lineitem order by l_suppkey desc limit 1 ); -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX0664775210 ON SUPPLIER ( S_SUPPKEY ); CREATE INDEX PAW_IDX1518532301 ON LINEITEM ( L_SUPPKEY ); CTE\u5b50\u67e5\u8be2 -- CTE with revenue as ( select l_suppkey , sum ( l_extendedprice ) as total_revenue from lineitem group by l_suppkey ) select * from supplier , revenuewhere s_suppkey = l_suppkey ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX0343576594 ON SUPPLIER ( S_SUPPKEY ); CREATE INDEX PAW_IDX1518532301 ON LINEITEM ( L_SUPPKEY , L_EXTENDEDPRICE ); \u4f20\u9012\u95ed\u5305\u91cd\u5199 - \u91cd\u5199\u540e\u8fdb\u884c\u7d22\u5f15\u63a8\u8350 -- \u4f20\u9012\u95ed\u5305\uff0c\u91cd\u5199\u540e\u8fdb\u884c\u7d22\u5f15\u63a8\u8350 select o_custkey as cust_no , l_extendedprice * ( 1 - l_discount ) from orders , lineitemwhere l_orderkey = o_orderkey and l_orderkey = 'ORD1234' ; -- \u91cd\u5199\u4e3a\uff0corders\u8868\u4e0a\u65b0\u589e\u4e00\u4e2a\u7b49\u503c\u6761\u4ef6o_orderkey = 'ORD1234' select o_custkey as cust_no , l_extendedprice * ( 1 - l_discount ) from orders , lineitemwhere l_orderkey = o_orderkey and l_orderkey = 'ORD1234' and o_orderkey = 'ORD1234' ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX0837835805 ON ORDERS ( O_ORDERKEY , O_CUSTKEY ); CREATE INDEX PAW_IDX1989932894 ON LINEITEM ( L_ORDERKEY , L_DISCOUNT , L_EXTENDEDPRICE ); Ordinal\u91cd\u5199 - \u91cd\u5199\u540e\u8fdb\u884c\u7d22\u5f15\u63a8\u8350 -- orderby ordinal \u91cd\u5199 select L_SHIPDATE \uff0c count ( * ) as cnt , sum ( bal ) as bal from lineitem order by 1 \uff1b -- \u91cd\u5199\u540e\u7684sql\u4e3a select L_SHIPDATE \uff0c count ( * ) as cnt , sum ( bal ) as bal from lineitem order by L_SHIPDATE \uff1b -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX1424903467 ON LINEITEM ( L_SHIPDATE ); -- groupby ordinal \u91cd\u5199 select l_shipdate , sum ( l_quantity ) as sum_qty from lineitem group by 1 \uff1b -- \u91cd\u5199\u540e\u7684SQL\u4e3a select l_shipdate , sum ( l_quantity ) as sum_qty from lineitem group by l_shipdate \uff1b -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX1614428511 ON LINEITEM ( L_SHIPDATE , L_QUANTITY ); DELETE\u8bed\u53e5 delete from lineitem where l_shipdate = date '1998-12-01' ; CREATE INDEX PAW_IDX1533504424 ON LINEITEM ( L_SHIPDATE ); UPDATE\u8bed\u53e5 update lineitem set l_shipmode = '' where l_shipmode is null ; CREATE INDEX PAW_IDX2000792795 ON LINEITEM ( L_SHIPMODE ); INSERT\u8bed\u53e5 insert into lineitem select * from lineitem where l_shipmode in ( '0' ); CREATE INDEX PAW_IDX2000792795 ON LINEITEM ( L_SHIPMODE ); Merge\u8bed\u53e5 replace into lineitem select * where l_shipdate = date '1998-12-01' and l_shipmode = '0' ; CREATE INDEX PAW_IDX1942674217 ON LINEITEM ( L_SHIPDATE , L_SHIPMODE ); \u5173\u4e8ePawSQL \u00b6 PawSQL\u4e13\u6ce8\u6570\u636e\u5e93\u6027\u80fd\u4f18\u5316\u7684\u81ea\u52a8\u5316\u548c\u667a\u80fd\u5316\uff0c\u652f\u6301MySQL\uff0cPostgreSQL\uff0cOpengauss\u7b49\uff0c\u63d0\u4f9b\u7684SQL\u4f18\u5316\u4ea7\u54c1\u5305\u62ec PawSQL Cloud \uff0c\u5728\u7ebf\u81ea\u52a8\u5316SQL\u4f18\u5316\u5de5\u5177\uff0c\u652f\u6301SQL\u5ba1\u67e5\uff0c\u667a\u80fd\u67e5\u8be2\u91cd\u5199\u3001\u57fa\u4e8e\u4ee3\u4ef7\u7684\u7d22\u5f15\u63a8\u8350\uff0c\u9002\u7528\u4e8e\u6570\u636e\u5e93\u7ba1\u7406\u5458\u53ca\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c PawSQL Advisor \uff0cIntelliJ \u63d2\u4ef6, \u9002\u7528\u4e8e\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c\u53ef\u4ee5IDEA/DataGrip\u5e94\u7528\u5e02\u573a\u901a\u8fc7\u540d\u79f0\u641c\u7d22\u201cPawSQL Advisor\u201d\u5b89\u88c5\u3002 PawSQL Engine, \u662fPawSQL\u7cfb\u5217\u4ea7\u54c1\u7684\u540e\u7aef\u4f18\u5316\u5f15\u64ce\uff0c\u53ef\u4ee5\u72ec\u7acb\u5b89\u88c5\u90e8\u7f72\uff0c\u5e76\u901a\u8fc7http/json\u7684\u63a5\u53e3\u63d0\u4f9bSQL\u4f18\u5316\u670d\u52a1\u3002PawSQL Engine\u4ee5docker\u955c\u50cf\u7684\u65b9\u5f0f\u63d0\u4f9b\u90e8\u7f72\u5b89\u88c5\u3002 PawSQL Ora2pg/PawsQL Ora2op\uff0cOracle\u8bed\u6cd5\u7684SQL\u5e94\u7528\u8f6c\u6362\u4e3aPostgreSQL\u548copenGauss\u8bed\u6cd5\u7684\u5de5\u5177\u3002 \u8054\u7cfb\u6211\u4eec \u00b6 \u90ae\u4ef6\uff1a service@pawsql.com Twitter: https://twitter.com/pawsql \u626b\u63cf\u5173\u6ce8PawSQL\u516c\u4f17\u53f7","title":"\u7d22\u5f15\u63a8\u8350\u5f15\u64ce"},{"location":"pawreference/sql-syntax/#_1","text":"Copyright \u00a9 2022 PawSQL PawSQL \u7d22\u5f15\u63a8\u8350\u5f15\u64ce\u652f\u6301ANSI\u6807\u51c6\u7684DML\u8bed\u6cd5\uff0c\u5bf9\u6240\u6709\u53ef\u80fd\u7684\u8bed\u6cd5\u7ec4\u5408\u90fd\u80fd\u63a8\u8350\u51fa\u5408\u9002\u7684\u7d22\u5f15\uff0c\u4ee5\u63d0\u5347\u6570\u636e\u5e93\u67e5\u8be2\u6027\u80fd\u3002","title":"\u7d22\u5f15\u63a8\u8350\u5f15\u64ce"},{"location":"pawreference/sql-syntax/#_2","text":"1\u3001\u5feb\u901f\u5b9a\u4f4d \u7b49\u503c\u5e38\u91cf\u6761\u4ef6 \u7b49\u503c\u5173\u8054\u6761\u4ef6 \u8303\u56f4\u6761\u4ef6 2\u3001\u907f\u514d\u6392\u5e8f\uff08B+ Tree\uff09 - order by - group by - distinct - join planning 3\u3001\u907f\u514d\u56de\u8868\uff08index only\uff09 \u6848\u4f8b\u89e3\u91ca SELECT classid , avg ( score ) tscore FROM score WHERE subject = '\u8bed\u6587' GROUP BY classid Index on score(subject ) - \u5feb\u901f\u5b9a\u4f4d Index on score(subject,classid) - \u5feb\u901f\u5b9a\u4f4d + \u907f\u514d\u6392\u5e8f Index on score(subject,classid,score) - \u5feb\u901f\u5b9a\u4f4d + \u907f\u514d\u6392\u5e8f + \u56de\u8868","title":"\u7d22\u5f15\u7684\u4f5c\u7528"},{"location":"pawreference/sql-syntax/#sql","text":"\u7b49\u503c\u6761\u4ef6 -- \u5355\u5217\u6761\u4ef6 select * from lineitem where l_shipdate = date '1998-12-01' ; -- \u63a8\u8350\u7d22\u5f15 CREATE INDEX PAW_IDX1533504424 ON LINEITEM ( L_SHIPDATE ); -- is null select * from lineitem where l_shipmode is null ; CREATE INDEX PAW_IDX2000792795 ON LINEITEM ( L_SHIPMODE ); -- in \u5355\u503c select * from lineitem where l_shipmode in ( '0' ); CREATE INDEX PAW_IDX2000792795 ON LINEITEM ( L_SHIPMODE ); -- \u591a\u5217\u6761\u4ef6\uff0c\u533a\u5206\u5ea6\u5927\u7684\u5217\u653e\u5728\u524d\u9762 select * from lineitem where l_shipdate = date '1998-12-01' and l_shipmode = '0' ; CREATE INDEX PAW_IDX1942674217 ON LINEITEM ( L_SHIPDATE , L_SHIPMODE ); -- \u6807\u91cf\u5b50\u67e5\u8be2 select * from lineitem where l_shipdate = ( select max ( l_shipdate ) from lineitem ); CREATE INDEX PAW_IDX1533504424 ON LINEITEM ( L_SHIPDATE ); \u8303\u56f4\u6761\u4ef6 -- \u8303\u56f4\u6761\u4ef6>\u3001<\u3001>=\u3001<= select * from lineitem where l_shipdate >= date '1998-12-01' ; CREATE INDEX PAW_IDX0156881833 ON LINEITEM ( L_SHIPDATE ); -- in \u591a\u503c select * from lineitem where l_shipmode in ( '0' , '1' ); CREATE INDEX PAW_IDX2000792795 ON LINEITEM ( L_SHIPMODE ); -- between ... and ... select * from lineitem where l_shipdate between date '2010-12-01' and date '2020-12-01' ; CREATE INDEX PAW_IDX1241878058 ON LINEITEM ( L_SHIPDATE ) \uff1b -- Like \u4e00\u4e2a\u5de6\u524d\u7f00 select * from customer where c_phone like \"139%\" ; CREATE INDEX PAW_IDX0326568991 ON CUSTOMER ( C_PHONE ); \u5206\u7ec4 - \u907f\u514d\u6392\u5e8f -- grouping select l_shipdate , count ( * ) as sum_qty from lineitem group by l_shipdate ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX1614428511 ON LINEITEM ( L_SHIPDATE ); \u6392\u5e8f - \u907f\u514d\u6392\u5e8f -- order by select * from lineitem order by l_shipdate limit 10 ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX1424903467 ON LINEITEM ( L_SHIPDATE ); \u8986\u76d6\u7d22\u5f15 - \u907f\u514d\u56de\u8868 -- index only select l_shipdate , sum ( l_quantity ) as sum_qty from lineitem group by l_shipdate ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX1614428511 ON LINEITEM ( L_SHIPDATE \uff0c L_QUANTITY ); \u8bed\u6cd5\u7ec4\u5408 \uff1a\u7b49\u503c+\u8303\u56f4\uff0c\u7b49\u503c\u6761\u4ef6\u653e\u5728\u524d\u9762 -- equal + range select * from lineitem where l_shipdate = date '1998-12-01' and l_quantity > 100 ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX2048143506 ON LINEITEM ( L_SHIPDATE , L_QUANTITY ); \u8bed\u6cd5\u7ec4\u5408 \uff1a\u7b49\u503c+\u5206\u7ec4+\u8986\u76d6\uff0c\u7b49\u503c\u6761\u4ef6\u653e\u5728\u524d\u9762\uff0c\u8986\u76d6\u5217\u653e\u5230\u6700\u540e -- where+group select l_shipdate , sum ( l_quantity ) as sum_qty from lineitem where l_receiptdate = '2020-01-01' group by l_shipdate ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX2000792795 ON LINEITEM ( L_RECEIPTDATE , L_SHIPDATE , l_quantity ); \u591a\u8868\u5173\u8054 -- \u5185\u8fde\u63a5\uff0c\u4e24\u4e2a\u8868\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u9a71\u52a8\u8868 SELECT * FROM ORDERS , LINEITEM WHERE O_ORDERKEY = L_ORDERKEY ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX2127618499 ON ORDERS ( O_ORDERKEY ); CREATE INDEX PAW_IDX0339323878 ON LINEITEM ( L_ORDERKEY ); -- \u5185\u8fde\u63a5\uff0c\u4e24\u4e2a\u8868\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u9a71\u52a8\u8868 SELECT * FROM ORDERS JOIN LINEITEM ON O_ORDERKEY = L_ORDERKEY ; CREATE INDEX PAW_IDX1531629550 ON ORDERS ( O_ORDERKEY ); CREATE INDEX PAW_IDX1365836084 ON LINEITEM ( L_ORDERKEY ); -- \u5916\u8fde\u63a5\uff0c\u5916\u8868\u4f5c\u4e3a\u9a71\u52a8\u8868\uff0cjoin\u6761\u4ef6\u4f5c\u4e3a\u5347\u7ea7\u4e3a\u7b49\u503c\u6761\u4ef6\uff0c\u53c2\u4e0e\u7d22\u5f15\u63a8\u8350 SELECT * FROM ORDERS LEFT JOIN LINEITEM ON O_ORDERKEY = L_ORDERKEY ; CREATE INDEX PAW_IDX1336974557 ON LINEITEM ( L_ORDERKEY ); SELECT * FROM ORDERS RIGHT JOIN LINEITEM ON O_ORDERKEY = L_ORDERKEY ; CREATE INDEX PAW_IDX1002609246 ON ORDERS ( O_ORDERKEY ); SELECT * FROM ORDERS LEFT JOIN LINEITEM ON O_ORDERKEY = L_ORDERKEY WHERE l_shipdate = date '1998-12-01' ; CREATE INDEX PAW_IDX0711368375 ON LINEITEM ( L_ORDERKEY , L_SHIPDATE ); DT\u5b50\u67e5\u8be2 -- Derived table\uff0c\u4e0d\u540c\u7684\u67e5\u8be2\u5757\u5206\u522b\u8fdb\u884c\u7d22\u5f15\u63a8\u8350\uff0c\u7136\u540e\u8fdb\u884c\u5408\u5e76\u53bb\u91cd select * from supplier ,( select l_suppkey , sum ( l_extendedprice ) as total_revenue from lineitem group by l_suppkey ) revenuewhere s_suppkey = revenue . l_suppkey ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX0151075817 ON SUPPLIER ( S_SUPPKEY ); CREATE INDEX PAW_IDX1968327707 ON LINEITEM ( L_SUPPKEY , L_EXTENDEDPRICE ); \u6761\u4ef6\u5b50\u67e5\u8be2 -- \u6761\u4ef6\u5b50\u67e5\u8be2 select * from supplierwhere s_suppkey = ( select l_suppkey from lineitem order by l_suppkey desc limit 1 ); -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX0664775210 ON SUPPLIER ( S_SUPPKEY ); CREATE INDEX PAW_IDX1518532301 ON LINEITEM ( L_SUPPKEY ); CTE\u5b50\u67e5\u8be2 -- CTE with revenue as ( select l_suppkey , sum ( l_extendedprice ) as total_revenue from lineitem group by l_suppkey ) select * from supplier , revenuewhere s_suppkey = l_suppkey ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX0343576594 ON SUPPLIER ( S_SUPPKEY ); CREATE INDEX PAW_IDX1518532301 ON LINEITEM ( L_SUPPKEY , L_EXTENDEDPRICE ); \u4f20\u9012\u95ed\u5305\u91cd\u5199 - \u91cd\u5199\u540e\u8fdb\u884c\u7d22\u5f15\u63a8\u8350 -- \u4f20\u9012\u95ed\u5305\uff0c\u91cd\u5199\u540e\u8fdb\u884c\u7d22\u5f15\u63a8\u8350 select o_custkey as cust_no , l_extendedprice * ( 1 - l_discount ) from orders , lineitemwhere l_orderkey = o_orderkey and l_orderkey = 'ORD1234' ; -- \u91cd\u5199\u4e3a\uff0corders\u8868\u4e0a\u65b0\u589e\u4e00\u4e2a\u7b49\u503c\u6761\u4ef6o_orderkey = 'ORD1234' select o_custkey as cust_no , l_extendedprice * ( 1 - l_discount ) from orders , lineitemwhere l_orderkey = o_orderkey and l_orderkey = 'ORD1234' and o_orderkey = 'ORD1234' ; -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX0837835805 ON ORDERS ( O_ORDERKEY , O_CUSTKEY ); CREATE INDEX PAW_IDX1989932894 ON LINEITEM ( L_ORDERKEY , L_DISCOUNT , L_EXTENDEDPRICE ); Ordinal\u91cd\u5199 - \u91cd\u5199\u540e\u8fdb\u884c\u7d22\u5f15\u63a8\u8350 -- orderby ordinal \u91cd\u5199 select L_SHIPDATE \uff0c count ( * ) as cnt , sum ( bal ) as bal from lineitem order by 1 \uff1b -- \u91cd\u5199\u540e\u7684sql\u4e3a select L_SHIPDATE \uff0c count ( * ) as cnt , sum ( bal ) as bal from lineitem order by L_SHIPDATE \uff1b -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX1424903467 ON LINEITEM ( L_SHIPDATE ); -- groupby ordinal \u91cd\u5199 select l_shipdate , sum ( l_quantity ) as sum_qty from lineitem group by 1 \uff1b -- \u91cd\u5199\u540e\u7684SQL\u4e3a select l_shipdate , sum ( l_quantity ) as sum_qty from lineitem group by l_shipdate \uff1b -- \u63a8\u8350\u7684\u7d22\u5f15\u4e3a CREATE INDEX PAW_IDX1614428511 ON LINEITEM ( L_SHIPDATE , L_QUANTITY ); DELETE\u8bed\u53e5 delete from lineitem where l_shipdate = date '1998-12-01' ; CREATE INDEX PAW_IDX1533504424 ON LINEITEM ( L_SHIPDATE ); UPDATE\u8bed\u53e5 update lineitem set l_shipmode = '' where l_shipmode is null ; CREATE INDEX PAW_IDX2000792795 ON LINEITEM ( L_SHIPMODE ); INSERT\u8bed\u53e5 insert into lineitem select * from lineitem where l_shipmode in ( '0' ); CREATE INDEX PAW_IDX2000792795 ON LINEITEM ( L_SHIPMODE ); Merge\u8bed\u53e5 replace into lineitem select * where l_shipdate = date '1998-12-01' and l_shipmode = '0' ; CREATE INDEX PAW_IDX1942674217 ON LINEITEM ( L_SHIPDATE , L_SHIPMODE );","title":"SQL\u8bed\u6cd5\u53ca\u7d22\u5f15\u63a8\u8350"},{"location":"pawreference/sql-syntax/#pawsql","text":"PawSQL\u4e13\u6ce8\u6570\u636e\u5e93\u6027\u80fd\u4f18\u5316\u7684\u81ea\u52a8\u5316\u548c\u667a\u80fd\u5316\uff0c\u652f\u6301MySQL\uff0cPostgreSQL\uff0cOpengauss\u7b49\uff0c\u63d0\u4f9b\u7684SQL\u4f18\u5316\u4ea7\u54c1\u5305\u62ec PawSQL Cloud \uff0c\u5728\u7ebf\u81ea\u52a8\u5316SQL\u4f18\u5316\u5de5\u5177\uff0c\u652f\u6301SQL\u5ba1\u67e5\uff0c\u667a\u80fd\u67e5\u8be2\u91cd\u5199\u3001\u57fa\u4e8e\u4ee3\u4ef7\u7684\u7d22\u5f15\u63a8\u8350\uff0c\u9002\u7528\u4e8e\u6570\u636e\u5e93\u7ba1\u7406\u5458\u53ca\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c PawSQL Advisor \uff0cIntelliJ \u63d2\u4ef6, \u9002\u7528\u4e8e\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c\u53ef\u4ee5IDEA/DataGrip\u5e94\u7528\u5e02\u573a\u901a\u8fc7\u540d\u79f0\u641c\u7d22\u201cPawSQL Advisor\u201d\u5b89\u88c5\u3002 PawSQL Engine, \u662fPawSQL\u7cfb\u5217\u4ea7\u54c1\u7684\u540e\u7aef\u4f18\u5316\u5f15\u64ce\uff0c\u53ef\u4ee5\u72ec\u7acb\u5b89\u88c5\u90e8\u7f72\uff0c\u5e76\u901a\u8fc7http/json\u7684\u63a5\u53e3\u63d0\u4f9bSQL\u4f18\u5316\u670d\u52a1\u3002PawSQL Engine\u4ee5docker\u955c\u50cf\u7684\u65b9\u5f0f\u63d0\u4f9b\u90e8\u7f72\u5b89\u88c5\u3002 PawSQL Ora2pg/PawsQL Ora2op\uff0cOracle\u8bed\u6cd5\u7684SQL\u5e94\u7528\u8f6c\u6362\u4e3aPostgreSQL\u548copenGauss\u8bed\u6cd5\u7684\u5de5\u5177\u3002","title":"\u5173\u4e8ePawSQL"},{"location":"pawreference/sql-syntax/#_3","text":"\u90ae\u4ef6\uff1a service@pawsql.com Twitter: https://twitter.com/pawsql \u626b\u63cf\u5173\u6ce8PawSQL\u516c\u4f17\u53f7","title":"\u8054\u7cfb\u6211\u4eec"},{"location":"pawsqladvisor/","text":"\u6982\u8ff0 \u00b6 PawSQL Advisor\u662f\u7531PawSQL\u56e2\u961f\u5f00\u53d1\u7684\uff0c\u9762\u5411\u6570\u636e\u5e93\u5e94\u7528\u5f00\u53d1\u4eba\u5458\u7684\u81ea\u52a8\u5316\u3001\u667a\u80fd\u5316SQL\u4f18\u5316\u5de5\u5177, \u5b83\u878d\u5408\u4e86\u4e1a\u754c\u5173\u4e8e\u6570\u636e\u5e93\u4f18\u5316\u7684\u6700\u4f73\u5b9e\u8df5, \u4ece\u6b63\u786e\u6027\u548c\u6027\u80fd\u4e24\u4e2a\u65b9\u9762\u5bf9SQL\u8fdb\u884c\u5ba1\u67e5\u548c\u91cd\u5199\u4f18\u5316\uff1b\u5e76\u57fa\u4e8eSQL\u67e5\u8be2\u7684\u7ed3\u6784\u3001\u6570\u636e\u5e93\u5bf9\u8c61\u7684\u5b9a\u4e49\u53ca\u7edf\u8ba1\u4fe1\u606f\uff0c\u63d0\u4f9b\u667a\u80fd\u7d22\u5f15\u63a8\u8350\u529f\u80fd\uff0c\u5e2e\u52a9\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\u4e00\u952e\u63d0\u5347\u5e94\u7528\u6027\u80fd\u3002 \u6838\u5fc3\u529f\u80fd \u00b6 \u57fa\u4e8e\u89c4\u5219\u7684SQL\u5ba1\u67e5\uff0c\u5305\u62ec\u6b63\u786e\u6027\u5ba1\u67e5\u548c\u6027\u80fd\u4f18\u5316\u5ba1\u67e5\u89c4\u5219\uff1b \u57fa\u4e8e\u89c4\u5219\u7684\u91cd\u5199\u4f18\u5316\uff0c\u63a8\u8350\u8bed\u4e49\u7b49\u4ef7\u3001\u4f46\u6267\u884c\u6548\u7387\u66f4\u9ad8\u7684SQL\uff1b \u667a\u80fd\u7d22\u5f15\u63a8\u8350\uff0c\u6ee1\u8db3\u5404\u79cdSQL\u8bed\u6cd5\u7ec4\u5408\u7684\u573a\u666f\u4e0b\uff0c\u63a8\u8350\u6700\u4f18\u7684\u7d22\u5f15\u7ec4\u5408\uff1b \u57fa\u4e8e\u4ee3\u4ef7\u7684\u4f18\u5316\u9a8c\u8bc1\uff0c\u786e\u4fdd\u57fa\u4e8eSQL\u91cd\u5199\u548c\u7d22\u5f15\u63a8\u8350\u7684\u65b0\u65b9\u6848\u6709\u7740\u66f4\u597d\u7684\u6027\u80fd\uff1b \u7d22\u5f15\u5206\u6790\u5f15\u64ce\uff0c\u5bf9\u5df2\u6709\u7684\u7d22\u5f15\u8fdb\u884c\u5206\u6790\uff0c\u8bc6\u522b\u5197\u4f59\u7d22\u5f15\u3002 \u652f\u6301\u6570\u636e\u5e93 \u00b6 PawSQL\u57fa\u4e8e\u81ea\u7814\u7684SQL\u89e3\u6790\u5668\uff0c\u652f\u6301\u591a\u79cd\u6570\u636e\u5e93\u7c7b\u578b\u4ee5\u53caSQL\u65b9\u8a00\uff0c\u5f53\u524d\u652f\u6301\u7684\u6570\u636e\u5e93\u5217\u8868\u5982\u4e0b\uff0c\u8fd8\u5728\u4e0d\u65ad\u589e\u52a0\u4e2d... MySQL 5.6\u53ca\u4ee5\u4e0a (official) PostgreSQL 9.1\u53ca\u4ee5\u4e0a (official) openGauss 1.0\u53ca\u4ee5\u4e0a (official) MariaDB 5.6\u53ca\u4ee5\u4e0a\uff08\u03b2\u6d4b\u8bd5\uff09 Oracle 9i\u53ca\u4ee5\u4e0a\uff08\u03b2\u6d4b\u8bd5\uff09 KingbaseES V8\uff08\u03b2\u6d4b\u8bd5\uff09 \u4f7f\u7528\u624b\u518c \u00b6 1. \u63d2\u4ef6\u5b89\u88c5 \u00b6 PawSQL Advisor\u662f\u57fa\u4e8eIntelliJ\u7684IDE\u63d2\u4ef6\uff0c\u652f\u6301\u7684Jetbrain\u5de5\u5177\u5305\u62ecIntelliJ IDEA\uff0cDataGrip\uff0cPyCharm\uff0cAndroid Studio, AppCode, DataSpell, GoLand, PhpStorm, WebStorm\u7b49, \u53ef\u4ee5\u901a\u8fc7Jetbrain\u5e94\u7528\u5e02\u573a\u5b89\u88c5\u3002 2. \u914d\u7f6e\u9875\u9762 \u00b6 PawSQL Advisor\u63d0\u4f9b\u4e00\u4e2a\u9879\u76ee\u7ea7\u7684\u914d\u7f6e\u9875\u9762\uff0c\u4f9b\u7528\u6237\u8fdb\u884c\u4f18\u5316\u4efb\u52a1\u8f93\u5165\u3001\u8f93\u51fa\u3001\u6570\u636e\u6e90\u4ee5\u53ca\u6267\u884c\u8fc7\u7a0b\u7684\u53c2\u6570\u914d\u7f6e\uff0c 2.1 \u4f18\u5316\u914d\u7f6e \u00b6 \u8f93\u5165\u7c7b\u578b \uff0c\u6307\u5b9a\u8f93\u5165\u5f85\u5206\u6790SQL\u7684\u7c7b\u578b\uff0c\u76ee\u524d\u652f\u6301\u4ee5\u4e0b\u4e24\u79cd\u683c\u5f0f\uff0c SQL \u6587\u4ef6\uff0c\u4ee3\u8868\u5f85\u4f18\u5316\u7684SQL\u6765\u81ea\u539f\u751fSQL\u6587\u4ef6\uff0c \u652f\u6301ANSI\u6807\u51c6\u7684SQL\u8bed\u6cd5\u53ca\u591a\u79cdSQL\u65b9\u8a00\uff0c\u591a\u4e2aSQL\u4e4b\u95f4\u901a\u8fc7 ; \u5206\u5272\u3002 Mapper \u6587\u4ef6\uff0c\u4eceMybatis\u7684mapper\u914d\u7f6e\u6587\u4ef6\u91cc\u63d0\u53d6SQL, \u5e76\u901a\u8fc7\u89e3\u6790\u83b7\u53d6\u6240\u6709\u53ef\u80fd\u7684SQL\u7ec4\u5408\u3002PawSQL Advisor\u901a\u8fc7\u4e00\u4e2a\u667a\u80fd\u7684\u5f15\u64ce\uff0c\u80fd\u591f\u5bf9mapper\u6587\u4ef6\u4e2d\u7684\u5360\u4f4d\u7b26\u6839\u636e\u5176\u4e0a\u4e0b\u6587\u63a8\u65ad\u5176\u6570\u636e\u7c7b\u578b\u5e76\u5bf9\u5176\u8d4b\u4e8e\u4e00\u4e2a\u5408\u6cd5\u7684\u5e38\u91cf\uff0c\u4ece\u800c\u4f7f\u5176\u80fd\u591f\u751f\u4ea7\u5408\u6cd5\u7684SQL\u8bed\u53e5\uff0c\u4ee5\u4fbf\u8fdb\u884c\u540e\u7eed\u7684\u67e5\u8be2\u8bed\u53e5\u7ed3\u6784\u5206\u6790\u3002 Mapper\u6587\u4ef6\u4f5c\u4e3a\u8f93\u5165\u5bf9\u4e8e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\u975e\u5e38\u91cd\u8981\uff0c\u56e0\u4e3a\u5728\u5e94\u7528\u5f00\u53d1\u521d\u671f\uff0c\u5f00\u53d1\u4eba\u5458\u5bf9\u4e8e\u524d\u7aef\u7684\u8f93\u5165\u7ec4\u5408\u65e0\u6cd5\u5b8c\u5168\u638c\u63e1\uff0c\u6240\u80fd\u7ec4\u5408\u7684SQL\u4e1a\u52a1\u65e0\u6cd5\u786e\u5b9a\uff0c\u6b64\u9009\u9879\u53ef\u4ee5\u786e\u4fdd\u5bf9\u4e8e\u6240\u6709\u7684\u7ec4\u5408\uff0c\u90fd\u80fd\u591f\u5408\u9002\u7684\u7d22\u5f15\u63a8\u8350\u51fa\u6765\u4ee5\u63d0\u5347\u6027\u80fd\u3002 \u6ce8\u610f\uff1a\u7531\u4e8eMapper\u914d\u7f6e\u6587\u4ef6\u53ef\u80fd\u4e66\u5199\u4e0d\u591f\u89c4\u8303\uff0c\u5bfc\u81f4\u7ec4\u5408\u51fa\u7684\u67d0\u4e9bSQL\u8bed\u53e5\u5728\u771f\u5b9e\u7684\u573a\u666f\u4e0b\u6c38\u8fdc\u4e0d\u4f1a\u51fa\u73b0\uff0c\u8fdb\u800c\u63a8\u8350\u51fa\u65e0\u7528\u7684\u7d22\u5f15\u3002\u6240\u4ee5\u5efa\u8bae\u5728\u7a0b\u5e8f\u4e0a\u7ebf\u540e\uff0c\u6216\u662f\u5728UAT\u6d4b\u8bd5\u9636\u6bb5\uff0c\u901a\u8fc7querylog\u6293\u53d6\u771f\u5b9e\u7684SQL\u4f5c\u4e3a\u8f93\u5165. \u7ed3\u679c\u5c55\u793a \uff0c\u7528\u6765\u8bbe\u5b9a\u8f93\u51fa\u7684SQL\u4f18\u5316\u5efa\u8bae\u7684\u8bed\u8a00\uff0c\u76ee\u524d\u652f\u6301\u4e2d\u6587\u53ca\u82f1\u6587\u4e24\u79cd\u3002 \u662f\u5426\u542f\u7528\u91cd\u5199\u4f18\u5316 \uff0c\u6b64\u9009\u9879\u63a7\u5236\u662f\u5426\u542f\u7528\u91cd\u5199\u4f18\u5316\uff0c\u5728SQL\u4ee5\u53ca\u4e0a\u7ebf\u7684\u60c5\u51b5\u4e0b\uff0c\u4fee\u6539SQL\u53ef\u80fd\u65e0\u6cd5\u7acb\u5373\u5b9e\u65bd\uff0c\u5728\u6b64\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u7981\u7528\u6b64\u9009\u9879\uff0c\u6765\u83b7\u53d6\u7d22\u5f15\u63a8\u8350\u7684\u5efa\u8bae\uff0c\u5feb\u901f\u8fdb\u884c\u6027\u80fd\u4f18\u5316\u3002 \u662f\u5426\u542f\u7528What-If\u6027\u80fd\u9a8c\u8bc1 \uff0c\u6b64\u9009\u9879\u63a7\u5236\u662f\u5426\u5bf9\u63a8\u8350\u7684\u4f18\u5316\u5efa\u8bae\u8fdb\u884c\u6027\u80fd\u9a8c\u8bc1\uff0c\u5982\u679c\u542f\u7528\u6b64\u9009\u9879\uff0cPawSQL\u5728\u4f18\u5316\u8be6\u60c5\u4e2d\u4f1a\u63d0\u4f9bSQL\u4f18\u5316\u524d\u540e\u7684\u6267\u884c\u8ba1\u5212\u53ca\u4ee3\u4ef7\u4fe1\u606f\uff0c\u4ece\u800c\u786e\u4fdd\u63a8\u8350\u7684\u4f18\u5316\u5efa\u8bae\uff08\u91cd\u5199\u4f18\u5316\u53ca\u7d22\u5f15\u63a8\u8350\uff09\u80fd\u591f\u771f\u5b9e\u63d0\u5347\u6570\u636e\u5e93\u6027\u80fd\u3002 \u6027\u80fd\u9a8c\u8bc1\u65f6\u662f\u5426\u6267\u884cSQL \uff0c\u5982\u679c\u542f\u7528\u6b64\u9009\u9879\uff0c\u5219\u5728\u8fdb\u884cWhat-If\u6027\u80fd\u9a8c\u8bc1\u65f6\u83b7\u53d6SQL\u7684\u771f\u5b9e\u89e3\u6790\u53ca\u6267\u884c\u65f6\u95f4\uff0c\u907f\u514d\u4e86MySQL\u5bf9\u4e2d\u95f4\u7ed3\u679c\u8868explain\u7684\u7f3a\u9677\uff0c\u4ee3\u4ef7\u4f30\u7b97\u66f4\u52a0\u7cbe\u786e\u3002 **\u6ce8\u610f\uff1a**\u6700\u540e\u4e24\u4e2a\u6027\u80fd\u9a8c\u8bc1\u7684\u9009\u9879\u5e94\u907f\u514d\u5728\u751f\u4ea7\u5e93\u4e0a\u4f7f\u7528\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u6ca1\u6709\u5185\u7f6ewhat-if(\u5185\u7f6e\u865a\u62df\u7d22\u5f15)\u7684\u6570\u636e\u5e93(MySQL/Postgres\u7686\u662f)\u6765\u8bf4\uff0c\u6027\u80fd\u9a8c\u8bc1\u662f\u901a\u8fc7\u521b\u5efa\u63a8\u8350\u7d22\u5f15\u5e76\u8fdb\u884cexplain\u5206\u6790\u6267\u884c\u8ba1\u5212\uff0c\u7136\u540e\u5220\u9664\u63a8\u8350\u7d22\u5f15\u7684\u65b9\u5f0f\u6765\u505a\u7684\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5728\u751f\u4ea7\u5e93\u4e0a\u4f1a\u6d88\u8017\u4e00\u5b9a\u7684\u8d44\u6e90\uff0c\u4e14\u6267\u884c\u65f6\u95f4\u53ef\u80fd\u4f1a\u6bd4\u8f83\u957f\uff0c\u53ef\u80fd\u5bf9\u751f\u4ea7\u5e93\u4e0a\u7684\u4e1a\u52a1\u8fd0\u884c\u4ea7\u751f\u5f71\u54cd\u3002 2.2 \u6570\u636e\u5e93\u914d\u7f6e \u00b6 \u5728PawSQL Advisor\u4e2d\uff0c\u6570\u636e\u5e93\u8fde\u63a5\u4fe1\u606f\u4f5c\u7528\u6709\u4e24\u4e2a\uff1a\u4e00\u7528\u6765\u83b7\u53d6SQL\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u5bf9\u8c61\uff0c\u5305\u62ec\u6570\u636e\u5e93\u8868\u3001\u89c6\u56fe\u3001\u5217\u3001\u7d22\u5f15\u4fe1\u606f\u3002\u4e8c\u662f\u7528\u6765\u5bf9\u4f18\u5316\u5efa\u8bae\u8fdb\u884cWhat-If\u6027\u80fd\u9a8c\u8bc1\uff0c\u4ee5\u786e\u4fdd\u4f18\u5316\u5efa\u8bae\u80fd\u591f\u63d0\u5347SQL\u7684\u67e5\u8be2\u6027\u80fd\u3002 \u6570\u636e\u5e93\u7c7b\u578b \uff0c\u6307\u5b9a\u8fde\u63a5\u7684\u6570\u636e\u5e93\u7c7b\u578b\uff0c\u76ee\u524d\u652f\u6301MySQL\uff0cPostgreSQL\uff0cOpengauss, Oracle, MariaDB, KingbaseES\u516d\u79cd\u6570\u636e\u5e93\uff1b \u5730\u5740 \uff0c\u6570\u636e\u5e93\u5730\u5740\uff1b \u7aef\u53e3 \uff0c\u6570\u636e\u5e93\u7aef\u53e3\uff1b \u7528\u6237 \uff0c\u6570\u636e\u5e93\u7528\u6237\uff1b \u5bc6\u7801 \uff0c\u6570\u636e\u5e93\u7528\u6237\u5bc6\u7801\uff1b \u9ed8\u8ba4\u6570\u636e\u5e93 \uff0c\u9ed8\u8ba4\u6570\u636e\u5e93\u540d\u79f0\uff0c\u94fe\u63a5\u9ed8\u8ba4\u7684\u6570\u636e\u5e93\u540d\u79f0\uff1b \u6570\u636e\u5e93\u6216\u662f\u6a21\u5f0f\u5217\u8868 \uff0c\u6570\u636e\u5e93\u5217\u8868(MySQL)\u6216\u662f\u6a21\u5f0f\u5217\u8868(PostgreSQL/Opengauss)\uff0cPawSQL\u4f1a\u5c06\u5217\u8868\u9879\u4e0b\u7684\u8868\u3001\u89c6\u56fe\u3001\u7d22\u5f15\u53ca\u5176\u5bf9\u5e94\u7684\u7edf\u8ba1\u4fe1\u606f\u4f5c\u4e3aSQL\u6027\u80fd\u4f18\u5316\u7684\u8f93\u5165\u3002 3.3 \u7d22\u5f15\u63a8\u8350\u914d\u7f6e \u00b6 \u662f\u5426\u548c\u73b0\u6709\u7d22\u5f15\u53bb\u91cd \uff0c\u6b64\u9009\u9879\u8868\u793a\u63a8\u8350\u7d22\u5f15\u65f6\uff0c\u662f\u5426\u8003\u8651\u73b0\u6709\u7d22\u5f15\uff0c\u5e76\u628a\u73b0\u6709\u7d22\u5f15\u80fd\u591f\u8986\u76d6\u7684\u63a8\u8350\u7d22\u5f15\u6392\u9664\u6389\u3002\u542f\u7528\u6b64\u9009\u9879\u7684\u573a\u666f\u662f\u4e0d\u8003\u8651\u5220\u9664\u73b0\u6709\u7684\u7d22\u5f15\uff0c\u56e0\u4e3a\u8f93\u5165\u7684SQL\u53ea\u662f\u5e76\u4e0d\u80fd\u4ee3\u8868\u8fd9\u4e2a\u6570\u636e\u5e93\u4e0a\u6240\u6709\u7684SQL\u573a\u666f\uff0c\u6240\u4ee5\u53ea\u8003\u8651\u65b0\u589e\u5bf9\u8f93\u5165SQL\u6709\u5e2e\u52a9\u7684\u7d22\u5f15\u3002\u5982\u679c\u80fd\u591f\u786e\u4fdd\u8f93\u5165\u7684SQL\u5305\u542b\u6b64\u6570\u636e\u5e93\u6240\u6709\u7684\u67e5\u8be2\uff0c\u90a3\u4e48\u53ea\u4fdd\u7559\u63a8\u8350\u7684\u7d22\u5f15\u5c31\u53ef\u4ee5\u4e86\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4e0d\u9009\u62e9\u6b64\u9009\u9879\uff0c\u5e76\u4e14\u4f7f\u7528\u65b0\u63a8\u8350\u7684\u7d22\u5f15\u4ee3\u66ff\u73b0\u6709\u7684\u7d22\u5f15\u3002 \u662f\u5426\u63a8\u8350\u8986\u76d6\u7d22\u5f15 \uff0c\u6b64\u9009\u9879\u8868\u793a\u63a8\u8350\u7d22\u5f15\u65f6\u662f\u5426\u8003\u8651\u8986\u76d6\u7d22\u5f15\u7b56\u7565\u3002\u8986\u76d6\u7d22\u5f15\u53ef\u4ee5\u8ba9\u67e5\u8be2\u53ea\u8bbf\u95ee\u7d22\u5f15\u800c\u4e0d\u9700\u8981\u8bbf\u95ee\u6570\u636e\u8868\uff08\u8bf7\u53c2\u8003\u300a\u9ad8\u6548\u7d22\u5f15\u7684\u51c6\u5219\u300b\uff09\uff0c\u5728\u4e00\u4e9b\u573a\u666f\u4e0b\uff0c\u8986\u76d6\u7d22\u5f15\u80fd\u591f\u5927\u5e45\u63d0\u793a\u67e5\u8be2\u6027\u80fd\u3002\u4f46\u662f\u8986\u76d6\u7d22\u5f15\u4f1a\u5305\u542b\u67e5\u8be2\u6761\u4ef6\u4e2d\u6ca1\u6709\u4f7f\u7528\u7684\u5217\uff0c\u4ece\u800c\u589e\u52a0\u7d22\u5f15\u6240\u5360\u7684\u78c1\u76d8\u7a7a\u95f4\u5927\u5c0f\u3002 \u8986\u76d6\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570 \uff0c\u6b64\u9879\u8bbe\u7f6e\u8868\u793a\u5728\u8fdb\u884c\u8986\u76d6\u7d22\u5f15\u63a8\u8350\u65f6\uff0c\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570\u9650\u5236\u3002\u5982\u4ee5\u4e0a\u6240\u8ff0\uff0c\u8986\u76d6\u7d22\u5f15\u4f1a\u5305\u542b\u67e5\u8be2\u6761\u4ef6\u4e2d\u6ca1\u6709\u4f7f\u7528\u7684\u5217\uff0c\u4ece\u800c\u589e\u52a0\u7d22\u5f15\u6240\u5360\u7684\u78c1\u76d8\u7a7a\u95f4\u5927\u5c0f\u3002\u6b64\u9009\u9879\u53ef\u4ee5\u63a7\u5236\u8986\u76d6\u7d22\u5f15\u6240\u5360\u7a7a\u95f4\u7684\u5927\u5c0f\uff0c\u8ba9PawSQL\u80fd\u591f\u4e3a\u7528\u6237\u63d0\u4f9b\u4e00\u5b9a\u7a7a\u95f4\u9650\u5236\u7684\u60c5\u51b5\u4e0b\u5229\u7528\u8986\u76d6\u7d22\u5f15\u7684\u975e\u56de\u8868\u7279\u6027\u3002 \u7d22\u5f15\u7684\u6700\u5927\u5217\u6570 \uff0c\u6b64\u9009\u9879\u9650\u5236\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570\uff0c\u7d22\u5f15\u4f1a\u5360\u7528\u4e00\u5b9a\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u4e14\u592a\u591a\u5217\u7684\u7d22\u5f15\u4f1a\u8ba9\u7d22\u5f15\u6811\u7684\u5c42\u7ea7\u52a0\u6df1\uff0c\u4ece\u800c\u589e\u52a0\u7d22\u5f15\u8bbf\u95ee\u7684\u4ee3\u4ef7\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6b64\u9879\u8bbe\u7f6e\u63a7\u5236\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570\u3002 **\u5355\u8868\u6700\u5927\u7d22\u5f15\u6570\u76ee\uff0c**\u5982\u300a\u9ad8\u6548\u7d22\u5f15\u7684\u51c6\u5219\u300b\u4e2d\u6240\u8ff0\uff0c\u7d22\u5f15\u4e0d\u662f\u514d\u8d39\u7684\u5348\u9910\uff0c\u5b83\u4f1a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\uff0c\u5e76\u5bf9\u5bf9DML\u64cd\u4f5c\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u6570\u636e\u5e93\u7ba1\u7406\u5668\u5199\u5165\u8868\u7684\u6bcf\u4e00\u884c\uff0c\u5b83\u8fd8\u5fc5\u987b\u66f4\u65b0\u4efb\u4f55\u53d7\u5f71\u54cd\u7684\u7d22\u5f15\u3002\u56e0\u6b64\uff0cPawSQL\u901a\u8fc7\u6b64\u9009\u9879\u6765\u5ba1\u67e5\u5355\u8868\u7684\u7d22\u5f15\u6570\u91cf\uff0c\u5e76\u8fdb\u884c\u8b66\u544a\u63d0\u793a\u3002 3. \u6267\u884c\u4f18\u5316 \u00b6 3.1 \u5bf9\u6587\u4ef6/\u6587\u4ef6\u5939\u4e2d\u7684SQL\u8fdb\u884c\u4f18\u5316 \u00b6 \u53f3\u952e\u70b9\u51fb\u9700\u8981\u8fdb\u884c\u5206\u6790\u7684SQL\u6587\u4ef6\u6216\u662f\u6587\u4ef6\u5939\uff0c\u70b9\u51fbPawSQL Advisor->Optimize\uff0c\u542f\u52a8\u5bf9\u6b64\u6587\u4ef6\u6216\u662f\u6587\u4ef6\u5939\u4e2d\u7684\u6240\u6709SQL\u8bed\u53e5\u7684\u4f18\u5316\u3002 \u60a8\u4e5f\u53ef\u4ee5\u70b9\u51fbPawSQL Advisor->Optimize Config...\uff0c\u6b64\u6309\u94ae\u5c06\u8c03\u51fa\u53c2\u6570\u914d\u7f6e\u9875\u9762\uff0c\u65b9\u4fbf\u60a8\u5728\u6267\u884c\u524d\u5bf9\u6267\u884c\u53c2\u6570\u8fdb\u884c\u914d\u7f6e\uff0c\u5e76\u7acb\u5373\u8fdb\u884c\u4f18\u5316\u6267\u884c\u3002 3.2 \u5bf9\u9009\u4e2d\u7684SQL\u6587\u672c\u8fdb\u884c\u4f18\u5316 \u00b6 \u5728IDE\u7684\u6587\u672c/\u4ee3\u7801\u7f16\u8f91\u5668\u4e2d\u9009\u4e2d\u5f85\u4f18\u5316\u7684SQL\uff0c\u70b9\u51fb\u53f3\u952e\uff0c\u70b9\u51fbPawSQL Advisor->Optimize Selected \u540c\u6837\u7684\uff0c\u60a8\u4e5f\u53ef\u4ee5\u70b9\u51fbPawSQL Advisor->Optimize Selected Config...\uff0c\u6b64\u6309\u94ae\u5c06\u8c03\u51fa\u53c2\u6570\u914d\u7f6e\u9875\u9762\uff0c\u65b9\u4fbf\u60a8\u5728\u6267\u884c\u524d\u5bf9\u6267\u884c\u53c2\u6570\u8fdb\u884c\u914d\u7f6e\uff0c\u5e76\u7acb\u5373\u8fdb\u884c\u4f18\u5316\u6267\u884c\u3002 3.3 \u4f18\u5316\u8fc7\u7a0b\u65e5\u5fd7 \u00b6 \u67e5\u8be2\u4f18\u5316\u7684\u6267\u884c\u8fc7\u7a0b\u53ef\u4ee5\u901a\u8fc7\u4e0b\u65b9\u7684\u65e5\u5fd7\u7ec8\u7aef\u67e5\u770b\u3002 4. \u6267\u884c\u7ed3\u679c\u89e3\u8bfb \u00b6 \u5f53\u4f18\u5316\u5b8c\u6210\u540e\uff0cPawSQL\u4f1a\u751f\u6210\u4e00\u4e2a\u4f18\u5316\u6c47\u603b\u4fe1\u606f\u6587\u4ef6\uff0c\u5e76\u81ea\u52a8\u6253\u5f00\u8be5\u6587\u4ef6\u3002\u6b64\u6587\u4ef6\u662f\u4ee5pawTunningSummary\u7ed3\u5c3e\u7684markdown\u6587\u4ef6\uff0c\u5efa\u8bae\u60a8\u5b89\u88c5***Markdown***\u63d2\u4ef6\uff08\u5728\u5e94\u7528\u5e02\u573a\u641c\u7d22\"Markdown\"\u8fdb\u884c\u5b89\u88c5\uff09\uff0c\u4ee5\u4fbf\u80fd\u591f\u901a\u8fc7\u8d85\u94fe\u63a5\u67e5\u770b\u5355SQL\u7684\u4f18\u5316\u8be6\u60c5\u3002 4.1 \u6574\u4f53\u4f18\u5316\u5efa\u8bae \u00b6 \u67e5\u770bpawTuningSummary\u6587\u4ef6\u83b7\u53d6\u4f18\u5316\u7684\u6574\u4f53\u4fe1\u606f\uff0c\u4e3b\u8981\u5305\u62ec\u4e09\u90e8\u5206\u3002 \u6574\u4f53\u4f18\u5316\u6982\u8981 \u63a8\u8350\u7d22\u5f15\u4fe1\u606f SQL\u4f18\u5316\u5217\u8868 4.2 \u5355SQL\u4f18\u5316\u8be6\u60c5 \u00b6 \u70b9\u51fb\u6574\u4f53\u4f18\u5316\u5efa\u8baepawTunningSummary\u4e2d\u7684SQL\u4f18\u5316\u5217\u8868\u4e2d\u5177\u4f53\u7684SQL\u540d\u79f0\uff0c\u53ef\u4ee5\u8fdb\u5165\u5230\u5355SQL\u7684\u4f18\u5316\u8be6\u60c5\u6587\u4ef6\u3002\u6b64\u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\u4e3b\u8981\u5305\u62ec\uff1a \u539f\u59cbSQL \u91cd\u5199\u4f18\u5316 \u91cd\u5199\u540e\u7684SQL \u91cd\u5199\u6240\u5e94\u7528\u7684\u4f18\u5316\u7b56\u7565\uff0c \u91cd\u5199\u4f18\u5316\u5bf9\u5e94\u7684SQL\u7247\u6bb5 \u89c4\u5219\u5ba1\u67e5\u60c5\u51b5 \u8fdd\u53cd\u7684\u5ba1\u67e5\u89c4\u5219 \u8fdd\u53cd\u89c4\u5219\u7684SQL\u7247\u6bb5 \u7d22\u5f15\u63a8\u8350\u60c5\u51b5 \u63a8\u8350\u7684\u7d22\u5f15 \u7d22\u5f15\u63a8\u8350\u7684\u4f9d\u636e \u7d22\u5f15\u5206\u6790 \u5404\u4e2a\u8868\u4e0a\u7684\u7d22\u5f15\u5217\u8868 \u7d22\u5f15\u5982\u4f55\u5e2e\u52a9\u6b64SQL\u6267\u884c \u5197\u4f59\u7d22\u5f15\u5206\u6790 \u5355\u8868\u7d22\u5f15\u4e2a\u6570\u8d85\u8fc7\u9608\u503c\u63d0\u793a \u6027\u80fd\u9a8c\u8bc1 \u6027\u80fd\u63d0\u5347\u6bd4 \u9a8c\u8bc1\u751f\u6548\u7684\u63a8\u8350\u7d22\u5f15 \u4f18\u5316\u4e4b\u524d\u7684\u6267\u884c\u8ba1\u5212 \u4f18\u5316\u4e4b\u540e\u7684\u6267\u884c\u8ba1\u5212 \u5173\u4e8ePawSQL \u00b6 PawSQL\u4e13\u6ce8\u6570\u636e\u5e93\u6027\u80fd\u4f18\u5316\u7684\u81ea\u52a8\u5316\u548c\u667a\u80fd\u5316\uff0c\u652f\u6301MySQL\uff0cPostgreSQL\uff0cOpengauss\u7b49\uff0c\u63d0\u4f9b\u7684SQL\u4f18\u5316\u4ea7\u54c1\u5305\u62ec PawSQL Cloud \uff0c\u5728\u7ebf\u81ea\u52a8\u5316SQL\u4f18\u5316\u5de5\u5177\uff0c\u652f\u6301SQL\u5ba1\u67e5\uff0c\u667a\u80fd\u67e5\u8be2\u91cd\u5199\u3001\u57fa\u4e8e\u4ee3\u4ef7\u7684\u7d22\u5f15\u63a8\u8350\uff0c\u9002\u7528\u4e8e\u6570\u636e\u5e93\u7ba1\u7406\u5458\u53ca\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c PawSQL Advisor \uff0cIntelliJ \u63d2\u4ef6, \u9002\u7528\u4e8e\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c\u53ef\u4ee5IDEA/DataGrip\u5e94\u7528\u5e02\u573a\u901a\u8fc7\u540d\u79f0\u641c\u7d22\u201cPawSQL Advisor\u201d\u5b89\u88c5\u3002 PawSQL Engine, \u662fPawSQL\u7cfb\u5217\u4ea7\u54c1\u7684\u540e\u7aef\u4f18\u5316\u5f15\u64ce\uff0c\u53ef\u4ee5\u72ec\u7acb\u5b89\u88c5\u90e8\u7f72\uff0c\u5e76\u901a\u8fc7http/json\u7684\u63a5\u53e3\u63d0\u4f9bSQL\u4f18\u5316\u670d\u52a1\u3002PawSQL Engine\u4ee5docker\u955c\u50cf\u7684\u65b9\u5f0f\u63d0\u4f9b\u90e8\u7f72\u5b89\u88c5\u3002 \u8054\u7cfb\u6211\u4eec \u00b6 \u90ae\u4ef6\uff1a service@pawsql.com Twitter: https://twitter.com/pawsql \u626b\u63cf\u5173\u6ce8PawSQL\u516c\u4f17\u53f7","title":"PawSQL\u63d2\u4ef6"},{"location":"pawsqladvisor/#_1","text":"PawSQL Advisor\u662f\u7531PawSQL\u56e2\u961f\u5f00\u53d1\u7684\uff0c\u9762\u5411\u6570\u636e\u5e93\u5e94\u7528\u5f00\u53d1\u4eba\u5458\u7684\u81ea\u52a8\u5316\u3001\u667a\u80fd\u5316SQL\u4f18\u5316\u5de5\u5177, \u5b83\u878d\u5408\u4e86\u4e1a\u754c\u5173\u4e8e\u6570\u636e\u5e93\u4f18\u5316\u7684\u6700\u4f73\u5b9e\u8df5, \u4ece\u6b63\u786e\u6027\u548c\u6027\u80fd\u4e24\u4e2a\u65b9\u9762\u5bf9SQL\u8fdb\u884c\u5ba1\u67e5\u548c\u91cd\u5199\u4f18\u5316\uff1b\u5e76\u57fa\u4e8eSQL\u67e5\u8be2\u7684\u7ed3\u6784\u3001\u6570\u636e\u5e93\u5bf9\u8c61\u7684\u5b9a\u4e49\u53ca\u7edf\u8ba1\u4fe1\u606f\uff0c\u63d0\u4f9b\u667a\u80fd\u7d22\u5f15\u63a8\u8350\u529f\u80fd\uff0c\u5e2e\u52a9\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\u4e00\u952e\u63d0\u5347\u5e94\u7528\u6027\u80fd\u3002","title":"\u6982\u8ff0"},{"location":"pawsqladvisor/#_2","text":"\u57fa\u4e8e\u89c4\u5219\u7684SQL\u5ba1\u67e5\uff0c\u5305\u62ec\u6b63\u786e\u6027\u5ba1\u67e5\u548c\u6027\u80fd\u4f18\u5316\u5ba1\u67e5\u89c4\u5219\uff1b \u57fa\u4e8e\u89c4\u5219\u7684\u91cd\u5199\u4f18\u5316\uff0c\u63a8\u8350\u8bed\u4e49\u7b49\u4ef7\u3001\u4f46\u6267\u884c\u6548\u7387\u66f4\u9ad8\u7684SQL\uff1b \u667a\u80fd\u7d22\u5f15\u63a8\u8350\uff0c\u6ee1\u8db3\u5404\u79cdSQL\u8bed\u6cd5\u7ec4\u5408\u7684\u573a\u666f\u4e0b\uff0c\u63a8\u8350\u6700\u4f18\u7684\u7d22\u5f15\u7ec4\u5408\uff1b \u57fa\u4e8e\u4ee3\u4ef7\u7684\u4f18\u5316\u9a8c\u8bc1\uff0c\u786e\u4fdd\u57fa\u4e8eSQL\u91cd\u5199\u548c\u7d22\u5f15\u63a8\u8350\u7684\u65b0\u65b9\u6848\u6709\u7740\u66f4\u597d\u7684\u6027\u80fd\uff1b \u7d22\u5f15\u5206\u6790\u5f15\u64ce\uff0c\u5bf9\u5df2\u6709\u7684\u7d22\u5f15\u8fdb\u884c\u5206\u6790\uff0c\u8bc6\u522b\u5197\u4f59\u7d22\u5f15\u3002","title":"\u6838\u5fc3\u529f\u80fd"},{"location":"pawsqladvisor/#_3","text":"PawSQL\u57fa\u4e8e\u81ea\u7814\u7684SQL\u89e3\u6790\u5668\uff0c\u652f\u6301\u591a\u79cd\u6570\u636e\u5e93\u7c7b\u578b\u4ee5\u53caSQL\u65b9\u8a00\uff0c\u5f53\u524d\u652f\u6301\u7684\u6570\u636e\u5e93\u5217\u8868\u5982\u4e0b\uff0c\u8fd8\u5728\u4e0d\u65ad\u589e\u52a0\u4e2d... MySQL 5.6\u53ca\u4ee5\u4e0a (official) PostgreSQL 9.1\u53ca\u4ee5\u4e0a (official) openGauss 1.0\u53ca\u4ee5\u4e0a (official) MariaDB 5.6\u53ca\u4ee5\u4e0a\uff08\u03b2\u6d4b\u8bd5\uff09 Oracle 9i\u53ca\u4ee5\u4e0a\uff08\u03b2\u6d4b\u8bd5\uff09 KingbaseES V8\uff08\u03b2\u6d4b\u8bd5\uff09","title":"\u652f\u6301\u6570\u636e\u5e93"},{"location":"pawsqladvisor/#_4","text":"","title":"\u4f7f\u7528\u624b\u518c"},{"location":"pawsqladvisor/#1","text":"PawSQL Advisor\u662f\u57fa\u4e8eIntelliJ\u7684IDE\u63d2\u4ef6\uff0c\u652f\u6301\u7684Jetbrain\u5de5\u5177\u5305\u62ecIntelliJ IDEA\uff0cDataGrip\uff0cPyCharm\uff0cAndroid Studio, AppCode, DataSpell, GoLand, PhpStorm, WebStorm\u7b49, \u53ef\u4ee5\u901a\u8fc7Jetbrain\u5e94\u7528\u5e02\u573a\u5b89\u88c5\u3002","title":"1. \u63d2\u4ef6\u5b89\u88c5"},{"location":"pawsqladvisor/#2","text":"PawSQL Advisor\u63d0\u4f9b\u4e00\u4e2a\u9879\u76ee\u7ea7\u7684\u914d\u7f6e\u9875\u9762\uff0c\u4f9b\u7528\u6237\u8fdb\u884c\u4f18\u5316\u4efb\u52a1\u8f93\u5165\u3001\u8f93\u51fa\u3001\u6570\u636e\u6e90\u4ee5\u53ca\u6267\u884c\u8fc7\u7a0b\u7684\u53c2\u6570\u914d\u7f6e\uff0c","title":"2. \u914d\u7f6e\u9875\u9762"},{"location":"pawsqladvisor/#21","text":"\u8f93\u5165\u7c7b\u578b \uff0c\u6307\u5b9a\u8f93\u5165\u5f85\u5206\u6790SQL\u7684\u7c7b\u578b\uff0c\u76ee\u524d\u652f\u6301\u4ee5\u4e0b\u4e24\u79cd\u683c\u5f0f\uff0c SQL \u6587\u4ef6\uff0c\u4ee3\u8868\u5f85\u4f18\u5316\u7684SQL\u6765\u81ea\u539f\u751fSQL\u6587\u4ef6\uff0c \u652f\u6301ANSI\u6807\u51c6\u7684SQL\u8bed\u6cd5\u53ca\u591a\u79cdSQL\u65b9\u8a00\uff0c\u591a\u4e2aSQL\u4e4b\u95f4\u901a\u8fc7 ; \u5206\u5272\u3002 Mapper \u6587\u4ef6\uff0c\u4eceMybatis\u7684mapper\u914d\u7f6e\u6587\u4ef6\u91cc\u63d0\u53d6SQL, \u5e76\u901a\u8fc7\u89e3\u6790\u83b7\u53d6\u6240\u6709\u53ef\u80fd\u7684SQL\u7ec4\u5408\u3002PawSQL Advisor\u901a\u8fc7\u4e00\u4e2a\u667a\u80fd\u7684\u5f15\u64ce\uff0c\u80fd\u591f\u5bf9mapper\u6587\u4ef6\u4e2d\u7684\u5360\u4f4d\u7b26\u6839\u636e\u5176\u4e0a\u4e0b\u6587\u63a8\u65ad\u5176\u6570\u636e\u7c7b\u578b\u5e76\u5bf9\u5176\u8d4b\u4e8e\u4e00\u4e2a\u5408\u6cd5\u7684\u5e38\u91cf\uff0c\u4ece\u800c\u4f7f\u5176\u80fd\u591f\u751f\u4ea7\u5408\u6cd5\u7684SQL\u8bed\u53e5\uff0c\u4ee5\u4fbf\u8fdb\u884c\u540e\u7eed\u7684\u67e5\u8be2\u8bed\u53e5\u7ed3\u6784\u5206\u6790\u3002 Mapper\u6587\u4ef6\u4f5c\u4e3a\u8f93\u5165\u5bf9\u4e8e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\u975e\u5e38\u91cd\u8981\uff0c\u56e0\u4e3a\u5728\u5e94\u7528\u5f00\u53d1\u521d\u671f\uff0c\u5f00\u53d1\u4eba\u5458\u5bf9\u4e8e\u524d\u7aef\u7684\u8f93\u5165\u7ec4\u5408\u65e0\u6cd5\u5b8c\u5168\u638c\u63e1\uff0c\u6240\u80fd\u7ec4\u5408\u7684SQL\u4e1a\u52a1\u65e0\u6cd5\u786e\u5b9a\uff0c\u6b64\u9009\u9879\u53ef\u4ee5\u786e\u4fdd\u5bf9\u4e8e\u6240\u6709\u7684\u7ec4\u5408\uff0c\u90fd\u80fd\u591f\u5408\u9002\u7684\u7d22\u5f15\u63a8\u8350\u51fa\u6765\u4ee5\u63d0\u5347\u6027\u80fd\u3002 \u6ce8\u610f\uff1a\u7531\u4e8eMapper\u914d\u7f6e\u6587\u4ef6\u53ef\u80fd\u4e66\u5199\u4e0d\u591f\u89c4\u8303\uff0c\u5bfc\u81f4\u7ec4\u5408\u51fa\u7684\u67d0\u4e9bSQL\u8bed\u53e5\u5728\u771f\u5b9e\u7684\u573a\u666f\u4e0b\u6c38\u8fdc\u4e0d\u4f1a\u51fa\u73b0\uff0c\u8fdb\u800c\u63a8\u8350\u51fa\u65e0\u7528\u7684\u7d22\u5f15\u3002\u6240\u4ee5\u5efa\u8bae\u5728\u7a0b\u5e8f\u4e0a\u7ebf\u540e\uff0c\u6216\u662f\u5728UAT\u6d4b\u8bd5\u9636\u6bb5\uff0c\u901a\u8fc7querylog\u6293\u53d6\u771f\u5b9e\u7684SQL\u4f5c\u4e3a\u8f93\u5165. \u7ed3\u679c\u5c55\u793a \uff0c\u7528\u6765\u8bbe\u5b9a\u8f93\u51fa\u7684SQL\u4f18\u5316\u5efa\u8bae\u7684\u8bed\u8a00\uff0c\u76ee\u524d\u652f\u6301\u4e2d\u6587\u53ca\u82f1\u6587\u4e24\u79cd\u3002 \u662f\u5426\u542f\u7528\u91cd\u5199\u4f18\u5316 \uff0c\u6b64\u9009\u9879\u63a7\u5236\u662f\u5426\u542f\u7528\u91cd\u5199\u4f18\u5316\uff0c\u5728SQL\u4ee5\u53ca\u4e0a\u7ebf\u7684\u60c5\u51b5\u4e0b\uff0c\u4fee\u6539SQL\u53ef\u80fd\u65e0\u6cd5\u7acb\u5373\u5b9e\u65bd\uff0c\u5728\u6b64\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u7981\u7528\u6b64\u9009\u9879\uff0c\u6765\u83b7\u53d6\u7d22\u5f15\u63a8\u8350\u7684\u5efa\u8bae\uff0c\u5feb\u901f\u8fdb\u884c\u6027\u80fd\u4f18\u5316\u3002 \u662f\u5426\u542f\u7528What-If\u6027\u80fd\u9a8c\u8bc1 \uff0c\u6b64\u9009\u9879\u63a7\u5236\u662f\u5426\u5bf9\u63a8\u8350\u7684\u4f18\u5316\u5efa\u8bae\u8fdb\u884c\u6027\u80fd\u9a8c\u8bc1\uff0c\u5982\u679c\u542f\u7528\u6b64\u9009\u9879\uff0cPawSQL\u5728\u4f18\u5316\u8be6\u60c5\u4e2d\u4f1a\u63d0\u4f9bSQL\u4f18\u5316\u524d\u540e\u7684\u6267\u884c\u8ba1\u5212\u53ca\u4ee3\u4ef7\u4fe1\u606f\uff0c\u4ece\u800c\u786e\u4fdd\u63a8\u8350\u7684\u4f18\u5316\u5efa\u8bae\uff08\u91cd\u5199\u4f18\u5316\u53ca\u7d22\u5f15\u63a8\u8350\uff09\u80fd\u591f\u771f\u5b9e\u63d0\u5347\u6570\u636e\u5e93\u6027\u80fd\u3002 \u6027\u80fd\u9a8c\u8bc1\u65f6\u662f\u5426\u6267\u884cSQL \uff0c\u5982\u679c\u542f\u7528\u6b64\u9009\u9879\uff0c\u5219\u5728\u8fdb\u884cWhat-If\u6027\u80fd\u9a8c\u8bc1\u65f6\u83b7\u53d6SQL\u7684\u771f\u5b9e\u89e3\u6790\u53ca\u6267\u884c\u65f6\u95f4\uff0c\u907f\u514d\u4e86MySQL\u5bf9\u4e2d\u95f4\u7ed3\u679c\u8868explain\u7684\u7f3a\u9677\uff0c\u4ee3\u4ef7\u4f30\u7b97\u66f4\u52a0\u7cbe\u786e\u3002 **\u6ce8\u610f\uff1a**\u6700\u540e\u4e24\u4e2a\u6027\u80fd\u9a8c\u8bc1\u7684\u9009\u9879\u5e94\u907f\u514d\u5728\u751f\u4ea7\u5e93\u4e0a\u4f7f\u7528\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u6ca1\u6709\u5185\u7f6ewhat-if(\u5185\u7f6e\u865a\u62df\u7d22\u5f15)\u7684\u6570\u636e\u5e93(MySQL/Postgres\u7686\u662f)\u6765\u8bf4\uff0c\u6027\u80fd\u9a8c\u8bc1\u662f\u901a\u8fc7\u521b\u5efa\u63a8\u8350\u7d22\u5f15\u5e76\u8fdb\u884cexplain\u5206\u6790\u6267\u884c\u8ba1\u5212\uff0c\u7136\u540e\u5220\u9664\u63a8\u8350\u7d22\u5f15\u7684\u65b9\u5f0f\u6765\u505a\u7684\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5728\u751f\u4ea7\u5e93\u4e0a\u4f1a\u6d88\u8017\u4e00\u5b9a\u7684\u8d44\u6e90\uff0c\u4e14\u6267\u884c\u65f6\u95f4\u53ef\u80fd\u4f1a\u6bd4\u8f83\u957f\uff0c\u53ef\u80fd\u5bf9\u751f\u4ea7\u5e93\u4e0a\u7684\u4e1a\u52a1\u8fd0\u884c\u4ea7\u751f\u5f71\u54cd\u3002","title":"2.1 \u4f18\u5316\u914d\u7f6e"},{"location":"pawsqladvisor/#22","text":"\u5728PawSQL Advisor\u4e2d\uff0c\u6570\u636e\u5e93\u8fde\u63a5\u4fe1\u606f\u4f5c\u7528\u6709\u4e24\u4e2a\uff1a\u4e00\u7528\u6765\u83b7\u53d6SQL\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u5bf9\u8c61\uff0c\u5305\u62ec\u6570\u636e\u5e93\u8868\u3001\u89c6\u56fe\u3001\u5217\u3001\u7d22\u5f15\u4fe1\u606f\u3002\u4e8c\u662f\u7528\u6765\u5bf9\u4f18\u5316\u5efa\u8bae\u8fdb\u884cWhat-If\u6027\u80fd\u9a8c\u8bc1\uff0c\u4ee5\u786e\u4fdd\u4f18\u5316\u5efa\u8bae\u80fd\u591f\u63d0\u5347SQL\u7684\u67e5\u8be2\u6027\u80fd\u3002 \u6570\u636e\u5e93\u7c7b\u578b \uff0c\u6307\u5b9a\u8fde\u63a5\u7684\u6570\u636e\u5e93\u7c7b\u578b\uff0c\u76ee\u524d\u652f\u6301MySQL\uff0cPostgreSQL\uff0cOpengauss, Oracle, MariaDB, KingbaseES\u516d\u79cd\u6570\u636e\u5e93\uff1b \u5730\u5740 \uff0c\u6570\u636e\u5e93\u5730\u5740\uff1b \u7aef\u53e3 \uff0c\u6570\u636e\u5e93\u7aef\u53e3\uff1b \u7528\u6237 \uff0c\u6570\u636e\u5e93\u7528\u6237\uff1b \u5bc6\u7801 \uff0c\u6570\u636e\u5e93\u7528\u6237\u5bc6\u7801\uff1b \u9ed8\u8ba4\u6570\u636e\u5e93 \uff0c\u9ed8\u8ba4\u6570\u636e\u5e93\u540d\u79f0\uff0c\u94fe\u63a5\u9ed8\u8ba4\u7684\u6570\u636e\u5e93\u540d\u79f0\uff1b \u6570\u636e\u5e93\u6216\u662f\u6a21\u5f0f\u5217\u8868 \uff0c\u6570\u636e\u5e93\u5217\u8868(MySQL)\u6216\u662f\u6a21\u5f0f\u5217\u8868(PostgreSQL/Opengauss)\uff0cPawSQL\u4f1a\u5c06\u5217\u8868\u9879\u4e0b\u7684\u8868\u3001\u89c6\u56fe\u3001\u7d22\u5f15\u53ca\u5176\u5bf9\u5e94\u7684\u7edf\u8ba1\u4fe1\u606f\u4f5c\u4e3aSQL\u6027\u80fd\u4f18\u5316\u7684\u8f93\u5165\u3002","title":"2.2 \u6570\u636e\u5e93\u914d\u7f6e"},{"location":"pawsqladvisor/#33","text":"\u662f\u5426\u548c\u73b0\u6709\u7d22\u5f15\u53bb\u91cd \uff0c\u6b64\u9009\u9879\u8868\u793a\u63a8\u8350\u7d22\u5f15\u65f6\uff0c\u662f\u5426\u8003\u8651\u73b0\u6709\u7d22\u5f15\uff0c\u5e76\u628a\u73b0\u6709\u7d22\u5f15\u80fd\u591f\u8986\u76d6\u7684\u63a8\u8350\u7d22\u5f15\u6392\u9664\u6389\u3002\u542f\u7528\u6b64\u9009\u9879\u7684\u573a\u666f\u662f\u4e0d\u8003\u8651\u5220\u9664\u73b0\u6709\u7684\u7d22\u5f15\uff0c\u56e0\u4e3a\u8f93\u5165\u7684SQL\u53ea\u662f\u5e76\u4e0d\u80fd\u4ee3\u8868\u8fd9\u4e2a\u6570\u636e\u5e93\u4e0a\u6240\u6709\u7684SQL\u573a\u666f\uff0c\u6240\u4ee5\u53ea\u8003\u8651\u65b0\u589e\u5bf9\u8f93\u5165SQL\u6709\u5e2e\u52a9\u7684\u7d22\u5f15\u3002\u5982\u679c\u80fd\u591f\u786e\u4fdd\u8f93\u5165\u7684SQL\u5305\u542b\u6b64\u6570\u636e\u5e93\u6240\u6709\u7684\u67e5\u8be2\uff0c\u90a3\u4e48\u53ea\u4fdd\u7559\u63a8\u8350\u7684\u7d22\u5f15\u5c31\u53ef\u4ee5\u4e86\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4e0d\u9009\u62e9\u6b64\u9009\u9879\uff0c\u5e76\u4e14\u4f7f\u7528\u65b0\u63a8\u8350\u7684\u7d22\u5f15\u4ee3\u66ff\u73b0\u6709\u7684\u7d22\u5f15\u3002 \u662f\u5426\u63a8\u8350\u8986\u76d6\u7d22\u5f15 \uff0c\u6b64\u9009\u9879\u8868\u793a\u63a8\u8350\u7d22\u5f15\u65f6\u662f\u5426\u8003\u8651\u8986\u76d6\u7d22\u5f15\u7b56\u7565\u3002\u8986\u76d6\u7d22\u5f15\u53ef\u4ee5\u8ba9\u67e5\u8be2\u53ea\u8bbf\u95ee\u7d22\u5f15\u800c\u4e0d\u9700\u8981\u8bbf\u95ee\u6570\u636e\u8868\uff08\u8bf7\u53c2\u8003\u300a\u9ad8\u6548\u7d22\u5f15\u7684\u51c6\u5219\u300b\uff09\uff0c\u5728\u4e00\u4e9b\u573a\u666f\u4e0b\uff0c\u8986\u76d6\u7d22\u5f15\u80fd\u591f\u5927\u5e45\u63d0\u793a\u67e5\u8be2\u6027\u80fd\u3002\u4f46\u662f\u8986\u76d6\u7d22\u5f15\u4f1a\u5305\u542b\u67e5\u8be2\u6761\u4ef6\u4e2d\u6ca1\u6709\u4f7f\u7528\u7684\u5217\uff0c\u4ece\u800c\u589e\u52a0\u7d22\u5f15\u6240\u5360\u7684\u78c1\u76d8\u7a7a\u95f4\u5927\u5c0f\u3002 \u8986\u76d6\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570 \uff0c\u6b64\u9879\u8bbe\u7f6e\u8868\u793a\u5728\u8fdb\u884c\u8986\u76d6\u7d22\u5f15\u63a8\u8350\u65f6\uff0c\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570\u9650\u5236\u3002\u5982\u4ee5\u4e0a\u6240\u8ff0\uff0c\u8986\u76d6\u7d22\u5f15\u4f1a\u5305\u542b\u67e5\u8be2\u6761\u4ef6\u4e2d\u6ca1\u6709\u4f7f\u7528\u7684\u5217\uff0c\u4ece\u800c\u589e\u52a0\u7d22\u5f15\u6240\u5360\u7684\u78c1\u76d8\u7a7a\u95f4\u5927\u5c0f\u3002\u6b64\u9009\u9879\u53ef\u4ee5\u63a7\u5236\u8986\u76d6\u7d22\u5f15\u6240\u5360\u7a7a\u95f4\u7684\u5927\u5c0f\uff0c\u8ba9PawSQL\u80fd\u591f\u4e3a\u7528\u6237\u63d0\u4f9b\u4e00\u5b9a\u7a7a\u95f4\u9650\u5236\u7684\u60c5\u51b5\u4e0b\u5229\u7528\u8986\u76d6\u7d22\u5f15\u7684\u975e\u56de\u8868\u7279\u6027\u3002 \u7d22\u5f15\u7684\u6700\u5927\u5217\u6570 \uff0c\u6b64\u9009\u9879\u9650\u5236\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570\uff0c\u7d22\u5f15\u4f1a\u5360\u7528\u4e00\u5b9a\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u4e14\u592a\u591a\u5217\u7684\u7d22\u5f15\u4f1a\u8ba9\u7d22\u5f15\u6811\u7684\u5c42\u7ea7\u52a0\u6df1\uff0c\u4ece\u800c\u589e\u52a0\u7d22\u5f15\u8bbf\u95ee\u7684\u4ee3\u4ef7\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6b64\u9879\u8bbe\u7f6e\u63a7\u5236\u7d22\u5f15\u7684\u6700\u5927\u5217\u6570\u3002 **\u5355\u8868\u6700\u5927\u7d22\u5f15\u6570\u76ee\uff0c**\u5982\u300a\u9ad8\u6548\u7d22\u5f15\u7684\u51c6\u5219\u300b\u4e2d\u6240\u8ff0\uff0c\u7d22\u5f15\u4e0d\u662f\u514d\u8d39\u7684\u5348\u9910\uff0c\u5b83\u4f1a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\uff0c\u5e76\u5bf9\u5bf9DML\u64cd\u4f5c\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u6570\u636e\u5e93\u7ba1\u7406\u5668\u5199\u5165\u8868\u7684\u6bcf\u4e00\u884c\uff0c\u5b83\u8fd8\u5fc5\u987b\u66f4\u65b0\u4efb\u4f55\u53d7\u5f71\u54cd\u7684\u7d22\u5f15\u3002\u56e0\u6b64\uff0cPawSQL\u901a\u8fc7\u6b64\u9009\u9879\u6765\u5ba1\u67e5\u5355\u8868\u7684\u7d22\u5f15\u6570\u91cf\uff0c\u5e76\u8fdb\u884c\u8b66\u544a\u63d0\u793a\u3002","title":"3.3 \u7d22\u5f15\u63a8\u8350\u914d\u7f6e"},{"location":"pawsqladvisor/#3","text":"","title":"3. \u6267\u884c\u4f18\u5316"},{"location":"pawsqladvisor/#31-sql","text":"\u53f3\u952e\u70b9\u51fb\u9700\u8981\u8fdb\u884c\u5206\u6790\u7684SQL\u6587\u4ef6\u6216\u662f\u6587\u4ef6\u5939\uff0c\u70b9\u51fbPawSQL Advisor->Optimize\uff0c\u542f\u52a8\u5bf9\u6b64\u6587\u4ef6\u6216\u662f\u6587\u4ef6\u5939\u4e2d\u7684\u6240\u6709SQL\u8bed\u53e5\u7684\u4f18\u5316\u3002 \u60a8\u4e5f\u53ef\u4ee5\u70b9\u51fbPawSQL Advisor->Optimize Config...\uff0c\u6b64\u6309\u94ae\u5c06\u8c03\u51fa\u53c2\u6570\u914d\u7f6e\u9875\u9762\uff0c\u65b9\u4fbf\u60a8\u5728\u6267\u884c\u524d\u5bf9\u6267\u884c\u53c2\u6570\u8fdb\u884c\u914d\u7f6e\uff0c\u5e76\u7acb\u5373\u8fdb\u884c\u4f18\u5316\u6267\u884c\u3002","title":"3.1 \u5bf9\u6587\u4ef6/\u6587\u4ef6\u5939\u4e2d\u7684SQL\u8fdb\u884c\u4f18\u5316"},{"location":"pawsqladvisor/#32-sql","text":"\u5728IDE\u7684\u6587\u672c/\u4ee3\u7801\u7f16\u8f91\u5668\u4e2d\u9009\u4e2d\u5f85\u4f18\u5316\u7684SQL\uff0c\u70b9\u51fb\u53f3\u952e\uff0c\u70b9\u51fbPawSQL Advisor->Optimize Selected \u540c\u6837\u7684\uff0c\u60a8\u4e5f\u53ef\u4ee5\u70b9\u51fbPawSQL Advisor->Optimize Selected Config...\uff0c\u6b64\u6309\u94ae\u5c06\u8c03\u51fa\u53c2\u6570\u914d\u7f6e\u9875\u9762\uff0c\u65b9\u4fbf\u60a8\u5728\u6267\u884c\u524d\u5bf9\u6267\u884c\u53c2\u6570\u8fdb\u884c\u914d\u7f6e\uff0c\u5e76\u7acb\u5373\u8fdb\u884c\u4f18\u5316\u6267\u884c\u3002","title":"3.2 \u5bf9\u9009\u4e2d\u7684SQL\u6587\u672c\u8fdb\u884c\u4f18\u5316"},{"location":"pawsqladvisor/#33_1","text":"\u67e5\u8be2\u4f18\u5316\u7684\u6267\u884c\u8fc7\u7a0b\u53ef\u4ee5\u901a\u8fc7\u4e0b\u65b9\u7684\u65e5\u5fd7\u7ec8\u7aef\u67e5\u770b\u3002","title":"3.3 \u4f18\u5316\u8fc7\u7a0b\u65e5\u5fd7"},{"location":"pawsqladvisor/#4","text":"\u5f53\u4f18\u5316\u5b8c\u6210\u540e\uff0cPawSQL\u4f1a\u751f\u6210\u4e00\u4e2a\u4f18\u5316\u6c47\u603b\u4fe1\u606f\u6587\u4ef6\uff0c\u5e76\u81ea\u52a8\u6253\u5f00\u8be5\u6587\u4ef6\u3002\u6b64\u6587\u4ef6\u662f\u4ee5pawTunningSummary\u7ed3\u5c3e\u7684markdown\u6587\u4ef6\uff0c\u5efa\u8bae\u60a8\u5b89\u88c5***Markdown***\u63d2\u4ef6\uff08\u5728\u5e94\u7528\u5e02\u573a\u641c\u7d22\"Markdown\"\u8fdb\u884c\u5b89\u88c5\uff09\uff0c\u4ee5\u4fbf\u80fd\u591f\u901a\u8fc7\u8d85\u94fe\u63a5\u67e5\u770b\u5355SQL\u7684\u4f18\u5316\u8be6\u60c5\u3002","title":"4. \u6267\u884c\u7ed3\u679c\u89e3\u8bfb"},{"location":"pawsqladvisor/#41","text":"\u67e5\u770bpawTuningSummary\u6587\u4ef6\u83b7\u53d6\u4f18\u5316\u7684\u6574\u4f53\u4fe1\u606f\uff0c\u4e3b\u8981\u5305\u62ec\u4e09\u90e8\u5206\u3002 \u6574\u4f53\u4f18\u5316\u6982\u8981 \u63a8\u8350\u7d22\u5f15\u4fe1\u606f SQL\u4f18\u5316\u5217\u8868","title":"4.1 \u6574\u4f53\u4f18\u5316\u5efa\u8bae"},{"location":"pawsqladvisor/#42-sql","text":"\u70b9\u51fb\u6574\u4f53\u4f18\u5316\u5efa\u8baepawTunningSummary\u4e2d\u7684SQL\u4f18\u5316\u5217\u8868\u4e2d\u5177\u4f53\u7684SQL\u540d\u79f0\uff0c\u53ef\u4ee5\u8fdb\u5165\u5230\u5355SQL\u7684\u4f18\u5316\u8be6\u60c5\u6587\u4ef6\u3002\u6b64\u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\u4e3b\u8981\u5305\u62ec\uff1a \u539f\u59cbSQL \u91cd\u5199\u4f18\u5316 \u91cd\u5199\u540e\u7684SQL \u91cd\u5199\u6240\u5e94\u7528\u7684\u4f18\u5316\u7b56\u7565\uff0c \u91cd\u5199\u4f18\u5316\u5bf9\u5e94\u7684SQL\u7247\u6bb5 \u89c4\u5219\u5ba1\u67e5\u60c5\u51b5 \u8fdd\u53cd\u7684\u5ba1\u67e5\u89c4\u5219 \u8fdd\u53cd\u89c4\u5219\u7684SQL\u7247\u6bb5 \u7d22\u5f15\u63a8\u8350\u60c5\u51b5 \u63a8\u8350\u7684\u7d22\u5f15 \u7d22\u5f15\u63a8\u8350\u7684\u4f9d\u636e \u7d22\u5f15\u5206\u6790 \u5404\u4e2a\u8868\u4e0a\u7684\u7d22\u5f15\u5217\u8868 \u7d22\u5f15\u5982\u4f55\u5e2e\u52a9\u6b64SQL\u6267\u884c \u5197\u4f59\u7d22\u5f15\u5206\u6790 \u5355\u8868\u7d22\u5f15\u4e2a\u6570\u8d85\u8fc7\u9608\u503c\u63d0\u793a \u6027\u80fd\u9a8c\u8bc1 \u6027\u80fd\u63d0\u5347\u6bd4 \u9a8c\u8bc1\u751f\u6548\u7684\u63a8\u8350\u7d22\u5f15 \u4f18\u5316\u4e4b\u524d\u7684\u6267\u884c\u8ba1\u5212 \u4f18\u5316\u4e4b\u540e\u7684\u6267\u884c\u8ba1\u5212","title":"4.2 \u5355SQL\u4f18\u5316\u8be6\u60c5"},{"location":"pawsqladvisor/#pawsql","text":"PawSQL\u4e13\u6ce8\u6570\u636e\u5e93\u6027\u80fd\u4f18\u5316\u7684\u81ea\u52a8\u5316\u548c\u667a\u80fd\u5316\uff0c\u652f\u6301MySQL\uff0cPostgreSQL\uff0cOpengauss\u7b49\uff0c\u63d0\u4f9b\u7684SQL\u4f18\u5316\u4ea7\u54c1\u5305\u62ec PawSQL Cloud \uff0c\u5728\u7ebf\u81ea\u52a8\u5316SQL\u4f18\u5316\u5de5\u5177\uff0c\u652f\u6301SQL\u5ba1\u67e5\uff0c\u667a\u80fd\u67e5\u8be2\u91cd\u5199\u3001\u57fa\u4e8e\u4ee3\u4ef7\u7684\u7d22\u5f15\u63a8\u8350\uff0c\u9002\u7528\u4e8e\u6570\u636e\u5e93\u7ba1\u7406\u5458\u53ca\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c PawSQL Advisor \uff0cIntelliJ \u63d2\u4ef6, \u9002\u7528\u4e8e\u6570\u636e\u5e94\u7528\u5f00\u53d1\u4eba\u5458\uff0c\u53ef\u4ee5IDEA/DataGrip\u5e94\u7528\u5e02\u573a\u901a\u8fc7\u540d\u79f0\u641c\u7d22\u201cPawSQL Advisor\u201d\u5b89\u88c5\u3002 PawSQL Engine, \u662fPawSQL\u7cfb\u5217\u4ea7\u54c1\u7684\u540e\u7aef\u4f18\u5316\u5f15\u64ce\uff0c\u53ef\u4ee5\u72ec\u7acb\u5b89\u88c5\u90e8\u7f72\uff0c\u5e76\u901a\u8fc7http/json\u7684\u63a5\u53e3\u63d0\u4f9bSQL\u4f18\u5316\u670d\u52a1\u3002PawSQL Engine\u4ee5docker\u955c\u50cf\u7684\u65b9\u5f0f\u63d0\u4f9b\u90e8\u7f72\u5b89\u88c5\u3002","title":"\u5173\u4e8ePawSQL"},{"location":"pawsqladvisor/#_5","text":"\u90ae\u4ef6\uff1a service@pawsql.com Twitter: https://twitter.com/pawsql \u626b\u63cf\u5173\u6ce8PawSQL\u516c\u4f17\u53f7","title":"\u8054\u7cfb\u6211\u4eec"}]}